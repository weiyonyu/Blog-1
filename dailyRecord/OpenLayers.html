<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>OpenLayers 基础 | Notebook</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="">
    <meta name="description" content="📝每天记录一点点">
    
    <link rel="preload" href="./assets/css/0.styles.81cbcbf8.css" as="style"><link rel="preload" href="./assets/js/app.78793606.js" as="script"><link rel="preload" href="./assets/js/3.9a8cb714.js" as="script"><link rel="preload" href="./assets/js/37.64bf3a08.js" as="script"><link rel="preload" href="./assets/js/17.7a89769a.js" as="script"><link rel="prefetch" href="./assets/js/10.3f7afedc.js"><link rel="prefetch" href="./assets/js/11.849f2ab3.js"><link rel="prefetch" href="./assets/js/12.f69c7e94.js"><link rel="prefetch" href="./assets/js/13.ab50e66a.js"><link rel="prefetch" href="./assets/js/14.4b2fce32.js"><link rel="prefetch" href="./assets/js/15.8b353502.js"><link rel="prefetch" href="./assets/js/16.3195875f.js"><link rel="prefetch" href="./assets/js/18.fcadf835.js"><link rel="prefetch" href="./assets/js/19.231d3618.js"><link rel="prefetch" href="./assets/js/2.56707d7e.js"><link rel="prefetch" href="./assets/js/20.a85f560c.js"><link rel="prefetch" href="./assets/js/21.24336449.js"><link rel="prefetch" href="./assets/js/22.73659552.js"><link rel="prefetch" href="./assets/js/23.a091243a.js"><link rel="prefetch" href="./assets/js/24.c8ba16f0.js"><link rel="prefetch" href="./assets/js/25.882bb768.js"><link rel="prefetch" href="./assets/js/26.f04079ce.js"><link rel="prefetch" href="./assets/js/27.3ccd410f.js"><link rel="prefetch" href="./assets/js/28.58938703.js"><link rel="prefetch" href="./assets/js/29.a0b3a5cc.js"><link rel="prefetch" href="./assets/js/30.054f5cc9.js"><link rel="prefetch" href="./assets/js/31.2a2497ca.js"><link rel="prefetch" href="./assets/js/32.2fec2015.js"><link rel="prefetch" href="./assets/js/33.1c38360d.js"><link rel="prefetch" href="./assets/js/34.c6f368f7.js"><link rel="prefetch" href="./assets/js/35.eb21b972.js"><link rel="prefetch" href="./assets/js/36.d24643c3.js"><link rel="prefetch" href="./assets/js/38.9456e466.js"><link rel="prefetch" href="./assets/js/39.d6639e8e.js"><link rel="prefetch" href="./assets/js/4.3e5912c4.js"><link rel="prefetch" href="./assets/js/40.0be61706.js"><link rel="prefetch" href="./assets/js/41.83d228f2.js"><link rel="prefetch" href="./assets/js/42.4a8c6e1b.js"><link rel="prefetch" href="./assets/js/43.ed4184d6.js"><link rel="prefetch" href="./assets/js/44.84f96688.js"><link rel="prefetch" href="./assets/js/45.99c1db7a.js"><link rel="prefetch" href="./assets/js/46.38462d37.js"><link rel="prefetch" href="./assets/js/47.18ad8970.js"><link rel="prefetch" href="./assets/js/5.07eb40e3.js"><link rel="prefetch" href="./assets/js/6.be2121ec.js"><link rel="prefetch" href="./assets/js/7.198c5ca7.js"><link rel="prefetch" href="./assets/js/8.0d657d1b.js"><link rel="prefetch" href="./assets/js/9.35e5878d.js">
    <link rel="stylesheet" href="./assets/css/0.styles.81cbcbf8.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/./" class="home-link router-link-active"><!----> <span class="site-name">Notebook</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/./dailyRecord/" class="nav-link router-link-active">
  📚学习总结
</a></div><div class="nav-item"><a href="/./bookmark/" class="nav-link">
  📌书签整理
</a></div><div class="nav-item"><a href="/./lint/" class="nav-link">
  ✔️编码规范&amp;协同开发
</a></div><div class="nav-item"><a href="http://shooterblog.site/Learn-JS-Demo/%E5%89%8D%E7%AB%AF%E7%9F%A5%E8%AF%86%E5%9B%BE%E8%B0%B1/index.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  📖知识脑图
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/./dailyRecord/" class="nav-link router-link-active">
  📚学习总结
</a></div><div class="nav-item"><a href="/./bookmark/" class="nav-link">
  📌书签整理
</a></div><div class="nav-item"><a href="/./lint/" class="nav-link">
  ✔️编码规范&amp;协同开发
</a></div><div class="nav-item"><a href="http://shooterblog.site/Learn-JS-Demo/%E5%89%8D%E7%AB%AF%E7%9F%A5%E8%AF%86%E5%9B%BE%E8%B0%B1/index.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  📖知识脑图
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>前端模块化和打包工具</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>前端异常监控</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Vue3原理</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Vue3源码</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>内功修炼</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>总结</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>GIS</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/./dailyRecord/OpenLayers.html" aria-current="page" class="active sidebar-link">OpenLayers 基础</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/./dailyRecord/OpenLayers.html#地图" class="sidebar-link">地图</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/./dailyRecord/OpenLayers.html#ol-map-地图" class="sidebar-link">ol/Map（地图）</a></li><li class="sidebar-sub-header"><a href="/./dailyRecord/OpenLayers.html#ol-view-视图" class="sidebar-link">ol/View（视图）</a></li><li class="sidebar-sub-header"><a href="/./dailyRecord/OpenLayers.html#ol-proj-projection-坐标系" class="sidebar-link">ol/proj/Projection（坐标系）</a></li><li class="sidebar-sub-header"><a href="/./dailyRecord/OpenLayers.html#ol-overlay-地图弹窗" class="sidebar-link">ol/Overlay（地图弹窗）</a></li></ul></li><li class="sidebar-sub-header"><a href="/./dailyRecord/OpenLayers.html#图层" class="sidebar-link">图层</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/./dailyRecord/OpenLayers.html#ol-layer-image" class="sidebar-link">ol/layer/Image</a></li><li class="sidebar-sub-header"><a href="/./dailyRecord/OpenLayers.html#ol-layer-tile" class="sidebar-link">ol/layer/Tile</a></li><li class="sidebar-sub-header"><a href="/./dailyRecord/OpenLayers.html#ol-source-xyz" class="sidebar-link">ol/source/XYZ</a></li><li class="sidebar-sub-header"><a href="/./dailyRecord/OpenLayers.html#ol-tilegrid-tilegrid" class="sidebar-link">ol/tilegrid/TileGrid</a></li><li class="sidebar-sub-header"><a href="/./dailyRecord/OpenLayers.html#arcgis动态图层" class="sidebar-link">arcgis动态图层</a></li><li class="sidebar-sub-header"><a href="/./dailyRecord/OpenLayers.html#arcgis动态图层-类切片" class="sidebar-link">arcgis动态图层（类切片）</a></li><li class="sidebar-sub-header"><a href="/./dailyRecord/OpenLayers.html#arcgis切片图层" class="sidebar-link">arcgis切片图层</a></li><li class="sidebar-sub-header"><a href="/./dailyRecord/OpenLayers.html#supermap动态图层" class="sidebar-link">supermap动态图层</a></li><li class="sidebar-sub-header"><a href="/./dailyRecord/OpenLayers.html#supermap动态图层-类切片" class="sidebar-link">supermap动态图层（类切片）</a></li><li class="sidebar-sub-header"><a href="/./dailyRecord/OpenLayers.html#supermap切片图层" class="sidebar-link">supermap切片图层</a></li></ul></li><li class="sidebar-sub-header"><a href="/./dailyRecord/OpenLayers.html#空间图形" class="sidebar-link">空间图形</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/./dailyRecord/OpenLayers.html#geometryol-geom-geometry-几何" class="sidebar-link">geometryol/geom/Geometry（几何）</a></li><li class="sidebar-sub-header"><a href="/./dailyRecord/OpenLayers.html#ol-feature-要素" class="sidebar-link">ol/Feature（要素）</a></li><li class="sidebar-sub-header"><a href="/./dailyRecord/OpenLayers.html#ol-style-style-样式" class="sidebar-link">ol/style/Style（样式）</a></li><li class="sidebar-sub-header"><a href="/./dailyRecord/OpenLayers.html#ol-layer-vector-矢量图层" class="sidebar-link">ol/layer/Vector（矢量图层）</a></li><li class="sidebar-sub-header"><a href="/./dailyRecord/OpenLayers.html#ol-interaction-draw-绘制" class="sidebar-link">ol/interaction/Draw（绘制）</a></li></ul></li><li class="sidebar-sub-header"><a href="/./dailyRecord/OpenLayers.html#关于查询服务" class="sidebar-link">关于查询服务</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/./dailyRecord/OpenLayers.html#arcgis服务" class="sidebar-link">arcgis服务</a></li><li class="sidebar-sub-header"><a href="/./dailyRecord/OpenLayers.html#超图服务" class="sidebar-link">超图服务</a></li></ul></li></ul></li><li><a href="/./dailyRecord/OLSourceCode1.html" class="sidebar-link">OpenLayers 源码分析(上篇)</a></li><li><a href="/./dailyRecord/OLSourceCode2.html" class="sidebar-link">OpenLayers 源码分析(下篇)</a></li><li><a href="/./dailyRecord/ArcgisAPI.html" class="sidebar-link">Arcgis API</a></li><li><a href="/./dailyRecord/GISsystem.html" class="sidebar-link">GIS 体系介绍</a></li><li><a href="/./dailyRecord/SuperMapWebGL.html" class="sidebar-link">SuperMap iClient 3D for WebGL</a></li><li><a href="/./dailyRecord/SuperMapIserver.html" class="sidebar-link">SuperMap Iserver</a></li><li><a href="/./dailyRecord/SuperMap3DStudy.html" class="sidebar-link">三维WebGIS学习笔记</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="openlayers-基础"><a href="#openlayers-基础" class="header-anchor">#</a> OpenLayers 基础</h1> <h2 id="地图"><a href="#地图" class="header-anchor">#</a> 地图</h2> <h3 id="ol-map-地图"><a href="#ol-map-地图" class="header-anchor">#</a> ol/Map（地图）</h3> <p>地图对象，作为GIS应用最基本的东西，用于装载layer。</p> <p>基本实例化参数：</p> <table><thead><tr><th>参数名</th> <th>Type</th> <th>简介</th></tr></thead> <tbody><tr><td>layers</td> <td>ol/layer</td> <td>图层。 如果未定义，则将渲染没有图层的地图。 图层是按提供的顺序渲染的，因此例如要使某图层出现在的顶部，则它必须位于图层组最后。</td></tr> <tr><td>target</td> <td>HTMLElement 或 string</td> <td>地图的容器，DOM元素本身或DOM元素ID。 如果在构造时未指定，则必须调用setTarget函数才能渲染地图。</td></tr> <tr><td>view</td> <td>ol/View</td> <td>地图的视图。也可以通过setView函数设置</td></tr></tbody></table> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">overlays</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token keyword">this</span><span class="token punctuation">.</span>tipsOverlay<span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token literal-property property">layers</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>basemapLayers<span class="token punctuation">,</span>
  <span class="token literal-property property">target</span><span class="token operator">:</span> mapNode<span class="token punctuation">,</span>
  <span class="token literal-property property">view</span><span class="token operator">:</span> mapView
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="ol-view-视图"><a href="#ol-view-视图" class="header-anchor">#</a> ol/View（视图）</h3> <p>View对象代表地图的简单2D视图。</p> <h4 id="视图状态"><a href="#视图状态" class="header-anchor">#</a> 视图状态</h4> <p>视图由三种参数确定：center，resolution，和rotation。
每个状态具有相应的获取和设置，例如 getCenter和setCenter用于center状态。</p> <h4 id="约束条件"><a href="#约束条件" class="header-anchor">#</a> 约束条件</h4> <p>setCenter，setResolution并setRotation可以用来改变视图的状态。并且View对象可以对这三个参数进行约束。</p> <ul><li>分辨率约束：
由resolutions，maxResolution，maxZoom和zoomFactor四个参数决定。</li> <li>旋转约束：
由enableRotation和constrainRotation参数决定。默认情况下，旋转是允许的，并且在接近水平方向时其值会固定为零。</li> <li>中心约束：
由extent参数决定。默认情况下，视图中心完全不受约束。</li></ul> <h3 id="ol-proj-projection-坐标系"><a href="#ol-proj-projection-坐标系" class="header-anchor">#</a> ol/proj/Projection（坐标系）</h3> <p>投影定义类。对于非epsg3857，4326的坐标系的地图服务，是需要利用proj4插件定义投影，并注册，才能正常加载。</p> <p>单位：</p> <blockquote><p>米：&quot;m&quot;或&quot;meter&quot;
度：&quot;degrees&quot;或&quot;degree&quot;</p></blockquote> <p><strong>踩坑记录：
Projection一定要带上单位。否则默认为“度”。如果坐标系的单位不是度的话就惨了，后面加载切片计算出来的切片行列号会差的十万八千里，而且很难想到是因为Projection单位导致的，相当难定位问题。</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> proj4 <span class="token keyword">from</span> <span class="token string">'proj4'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Projection <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;ol/proj&quot;</span><span class="token punctuation">;</span>

proj4<span class="token punctuation">.</span><span class="token function">defs</span><span class="token punctuation">(</span><span class="token string">&quot;EPSG:4525&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;+proj=tmerc +lat_0=0 +lon_0=111 +k=1 +x_0=37500000 +y_0=0 +ellps=GRS80 +units=m +no_defs&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">register</span><span class="token punctuation">(</span>proj4<span class="token punctuation">)</span><span class="token punctuation">;</span>
projection <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Projection</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">code</span><span class="token operator">:</span> <span class="token string">&quot;EPSG:4525&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">extent</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">37528668.9634</span><span class="token punctuation">,</span> <span class="token number">2376156.7121</span><span class="token punctuation">,</span> <span class="token number">37641094.4958</span><span class="token punctuation">,</span> <span class="token number">2510788.1806</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token literal-property property">units</span><span class="token operator">:</span> <span class="token string">&quot;m&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> mapView <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">View</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  projection<span class="token punctuation">,</span>
  <span class="token operator">...</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>有关各种投影的参数定义，可参考</p> <p><a href="https://epsg.io/" target="_blank" rel="noopener noreferrer">epsg<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h3 id="ol-overlay-地图弹窗"><a href="#ol-overlay-地图弹窗" class="header-anchor">#</a> ol/Overlay（地图弹窗）</h3> <p>要在地图上显示并附加到单个地图位置的元素。通过绑定到地理坐标，跟随地图的移动而移动。</p> <p>基本实例化参数：</p> <table><thead><tr><th>参数名</th> <th>Type</th> <th>简介</th></tr></thead> <tbody><tr><td>id</td> <td>string</td> <td>图层ID</td></tr> <tr><td>element</td> <td>HTMLElement</td> <td>DOM元素</td></tr> <tr><td>offset</td> <td>Array</td> <td>偏移</td></tr> <tr><td>positioning</td> <td>ol/OverlayPositioning</td> <td>定义叠加层相对于其position属性的实际定位方式</td></tr></tbody></table> <p>使用示例</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> Overlay <span class="token keyword">from</span> <span class="token string">'ol/Overlay'</span><span class="token punctuation">;</span>

<span class="token function">createOverLay</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>TipElement<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>TipElement<span class="token punctuation">.</span>parentNode<span class="token punctuation">.</span><span class="token function">removeChild</span><span class="token punctuation">(</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>TipElement
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>TipElement <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&quot;div&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>TipElement<span class="token punctuation">.</span>className <span class="token operator">=</span> <span class="token string">&quot;ol-tooltip ol-tooltip-measure&quot;</span><span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>TipElement<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token string">&quot;MyOverlay&quot;</span><span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>TipOverlay <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Overlay</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token string">&quot;measureOverlay&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">element</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>TipElement<span class="token punctuation">,</span>
    <span class="token literal-property property">offset</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">7</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token literal-property property">positioning</span><span class="token operator">:</span> <span class="token string">&quot;bottom-center&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>TipOverlay<span class="token punctuation">.</span><span class="token function">setPosition</span><span class="token punctuation">(</span>tooltipCoord<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>map<span class="token punctuation">.</span><span class="token function">addOverlay</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>TipOverlay<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="图层"><a href="#图层" class="header-anchor">#</a> 图层</h2> <h3 id="ol-layer-image"><a href="#ol-layer-image" class="header-anchor">#</a> ol/layer/Image</h3> <p>动态服务图层类</p> <p>基本实例化参数：</p> <table><thead><tr><th>参数名</th> <th>Type</th> <th>简介</th></tr></thead> <tbody><tr><td>opacity</td> <td>number</td> <td>透明度（默认是1）</td></tr> <tr><td>visible</td> <td>boolean</td> <td>是否可见</td></tr> <tr><td>extent</td> <td>ol/extent</td> <td>图层渲染的边界范围</td></tr> <tr><td>zIndex</td> <td>number</td> <td>图层的叠加顺序</td></tr> <tr><td>map</td> <td></td> <td>map对象</td></tr> <tr><td>source</td> <td>ol/source/Image</td> <td>image图层资源类</td></tr></tbody></table> <h3 id="ol-layer-tile"><a href="#ol-layer-tile" class="header-anchor">#</a> ol/layer/Tile</h3> <p>切片服务图层类</p> <p>基本实例化参数：</p> <table><thead><tr><th>参数名</th> <th>Type</th> <th>简介</th></tr></thead> <tbody><tr><td>opacity</td> <td>number</td> <td>透明度（默认是1）</td></tr> <tr><td>visible</td> <td>boolean</td> <td>是否可见</td></tr> <tr><td>extent</td> <td>ol/extent</td> <td>图层渲染的边界范围</td></tr> <tr><td>zIndex</td> <td>number</td> <td>图层的叠加顺序</td></tr> <tr><td>map</td> <td></td> <td>map对象</td></tr> <tr><td>source</td> <td>ol/source/Tile</td> <td>Tile图层资源类</td></tr></tbody></table> <h3 id="ol-source-xyz"><a href="#ol-source-xyz" class="header-anchor">#</a> ol/source/XYZ</h3> <p>加载切片服务的切片资源类</p> <p>基本实例化参数：</p> <table><thead><tr><th>参数名</th> <th>Type</th> <th>简介</th></tr></thead> <tbody><tr><td>crossOrigin</td> <td>string</td> <td>加载图像的crossOrigin属性</td></tr> <tr><td>projection</td> <td>ol/proj</td> <td>坐标系</td></tr> <tr><td>opaque</td> <td>boolean</td> <td>图层是否不透明（默认是）</td></tr> <tr><td>url</td> <td>string</td> <td>arcgis 服务地址</td></tr> <tr><td>tileGrid</td> <td>ol/tilegrid/TileGrid</td> <td>切片组</td></tr> <tr><td>url</td> <td>string</td> <td>切片服务地址 + &quot;/tile/{z}/{y}/{x}&quot;</td></tr> <tr><td>tileSize</td> <td>number</td> <td>切片大小，没有的话读取tileGrid的</td></tr></tbody></table> <h3 id="ol-tilegrid-tilegrid"><a href="#ol-tilegrid-tilegrid" class="header-anchor">#</a> ol/tilegrid/TileGrid</h3> <p>用于设置地图服务的切片组</p> <p>基本实例化参数：</p> <table><thead><tr><th>参数名</th> <th>Type</th> <th>简介</th></tr></thead> <tbody><tr><td>tileSize</td> <td>number</td> <td>切片大小</td></tr> <tr><td>resolutions</td> <td>Array</td> <td>Resolution代表当前地图范围内，1像素代表多少地图单位，地图单位取决于空间参考。</td></tr> <tr><td>origin</td> <td>Array</td> <td>切片原点</td></tr> <tr><td>extent</td> <td>ol/extent</td> <td>请求切片的边界范围</td></tr></tbody></table> <h3 id="arcgis动态图层"><a href="#arcgis动态图层" class="header-anchor">#</a> arcgis动态图层</h3> <p>openlayers提供了加载arcgis mapserver的动态图层类（ol/source/ImageArcGISRest）。</p> <p><strong>使用场景：在openlayers中以动态服务图层的方式加载 Arcgis Server的MapServer。对标arcgis api中的mapImageLayer</strong></p> <p>基本实例化参数：</p> <table><thead><tr><th>参数名</th> <th>Type</th> <th>简介</th></tr></thead> <tbody><tr><td>crossOrigin</td> <td>string</td> <td>加载图像的crossOrigin属性</td></tr> <tr><td>params</td> <td>Object</td> <td>ArcGIS Rest参数(后面会举例说明)</td></tr> <tr><td>projection</td> <td>ol/proj</td> <td>坐标系，默认跟随mapView</td></tr> <tr><td>url</td> <td>string</td> <td>arcgis 服务地址</td></tr></tbody></table> <p>使用示例：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> ImageLayer <span class="token keyword">from</span> <span class="token string">&quot;ol/layer/Image&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> ImageArcGISRest <span class="token keyword">from</span> <span class="token string">&quot;ol/source/ImageArcGISRest&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> arcgisImageSource <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ImageArcGISRest</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">params</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// 只显示下标为0的图层</span>
    <span class="token constant">LAYERS</span><span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">show:0</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
    <span class="token comment">// 可为空，动态图层服务端渲染等参数的填写位置</span>
    <span class="token literal-property property">dynamicLayers</span><span class="token operator">:</span> <span class="token string">&quot;...&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">url</span><span class="token operator">:</span> serviceInfo<span class="token punctuation">.</span>url<span class="token punctuation">,</span>
  <span class="token literal-property property">crossOrigin</span><span class="token operator">:</span> <span class="token string">&quot;anonymous&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> layer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ImageLayer</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">id</span><span class="token operator">:</span> id<span class="token punctuation">,</span>
  <span class="token literal-property property">visible</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token literal-property property">source</span><span class="token operator">:</span> arcgisImageSource
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

map<span class="token punctuation">.</span><span class="token function">addLayer</span><span class="token punctuation">(</span>layer<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="arcgis动态图层-类切片"><a href="#arcgis动态图层-类切片" class="header-anchor">#</a> arcgis动态图层（类切片）</h3> <p>由于动态图层的原理，对于数据较多的服务，server出图的时间会不尽人意。所以出现了这种加载方式。</p> <p><strong>Q:
何为类切片图层？</strong></p> <p><strong>A:
一般来说动态图层都是将当前视图范围传给server，由server渲染一张图片显示出来。
类切片是将当前视图范围按照一定的宽高做分割，分割后将分块范围通过并发请求server渲染分割区域的图片，最后将这些图片按切片图层的原理拼接回来。</strong></p> <p><strong>Q:
有何优点？</strong></p> <p><strong>A:
比如当前视图数据较多，server渲染一张图需要四秒。理论上将这个范围分成4份去并发的请求，渲染时间会缩短为1秒，以此类推分成8份会到0.5秒。当然还会受到浏览器最大并发请求数的限制，但是理论上效果是会好于一般的动态图层</strong></p> <p>基本实例化参数：</p> <table><thead><tr><th>参数名</th> <th>Type</th> <th>简介</th></tr></thead> <tbody><tr><td>crossOrigin</td> <td>string</td> <td>加载图像的crossOrigin属性</td></tr> <tr><td>params</td> <td>Object</td> <td>ArcGIS Rest参数(后面会举例说明)</td></tr> <tr><td>projection</td> <td>ol/proj</td> <td>坐标系，默认跟随mapView</td></tr> <tr><td>url</td> <td>string</td> <td>arcgis 服务地址</td></tr> <tr><td>tileGrid</td> <td>ol/tilegrid/TileGrid</td> <td>切片组。决定动态图层如何切割（默认根据mapView的Projection的范围进行切割）</td></tr></tbody></table> <p>使用示例：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> TileLayer <span class="token keyword">from</span> <span class="token string">&quot;ol/layer/Tile&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> TileArcGISRest <span class="token keyword">from</span> <span class="token string">&quot;ol/source/TileArcGISRest&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> arcgisImageSource <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TileArcGISRest</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">params</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// 只显示下标为0的图层</span>
    <span class="token constant">LAYERS</span><span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">show:0</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
    <span class="token comment">// 可为空，动态图层服务端渲染等参数的填写位置</span>
    <span class="token literal-property property">dynamicLayers</span><span class="token operator">:</span> <span class="token string">&quot;...&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">url</span><span class="token operator">:</span> serviceInfo<span class="token punctuation">.</span>url<span class="token punctuation">,</span>
  <span class="token literal-property property">crossOrigin</span><span class="token operator">:</span> <span class="token string">&quot;anonymous&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> layer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TileLayer</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">id</span><span class="token operator">:</span> id<span class="token punctuation">,</span>
  <span class="token literal-property property">visible</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token literal-property property">source</span><span class="token operator">:</span> arcgisImageSource
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

map<span class="token punctuation">.</span><span class="token function">addLayer</span><span class="token punctuation">(</span>layer<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="arcgis切片图层"><a href="#arcgis切片图层" class="header-anchor">#</a> arcgis切片图层</h3> <p>openlayers提供了加载切片服务图层类（ol/source/XYZ）</p> <p>使用场景：在openlayers中以切片服务图层的方式加载 Arcgis Server的MapServer。对标arcgis api中的tileLayer</p> <p>使用示例：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> TileLayer <span class="token keyword">from</span> <span class="token string">&quot;ol/layer/Tile&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token constant">XYZ</span> <span class="token keyword">from</span> <span class="token string">&quot;ol/source/XYZ&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> TileGrid <span class="token keyword">from</span> <span class="token string">&quot;ol/tilegrid/TileGrid&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> tileGrid <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TileGrid</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">tileSize</span><span class="token operator">:</span> <span class="token number">256</span><span class="token punctuation">,</span>
  <span class="token literal-property property">origin</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token operator">*</span><span class="token punctuation">,</span><span class="token operator">*</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token literal-property property">resolutions</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token operator">*</span><span class="token punctuation">,</span><span class="token operator">*</span><span class="token punctuation">,</span><span class="token operator">*</span><span class="token punctuation">,</span><span class="token operator">*</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 瓦片数据源</span>
<span class="token keyword">let</span> arcgisXYZTileSource <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XYZ</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">tileGrid</span><span class="token operator">:</span> tileGrid<span class="token punctuation">,</span>
  <span class="token literal-property property">projection</span><span class="token operator">:</span> <span class="token string">&quot;EPSG:4525&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">url</span><span class="token operator">:</span> mapServerUrl <span class="token operator">+</span> <span class="token string">&quot;/tile/{z}/{y}/{x}&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">crossOrigin</span><span class="token operator">:</span> <span class="token string">&quot;anonymous&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> layer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TileLayer</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">id</span><span class="token operator">:</span> id<span class="token punctuation">,</span>
  <span class="token literal-property property">className</span><span class="token operator">:</span> id<span class="token punctuation">,</span>
  <span class="token literal-property property">visible</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token literal-property property">source</span><span class="token operator">:</span> arcgisXYZTileSource
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

map<span class="token punctuation">.</span><span class="token function">addLayer</span><span class="token punctuation">(</span>layer<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="supermap动态图层"><a href="#supermap动态图层" class="header-anchor">#</a> supermap动态图层</h3> <p>openlayers本身是不支持直接加载超图服务的。但是超图提供了图层类，使得openlayers上可以加载SuperMap iServer Image 图层源。</p> <p>工具类具体信息参考：</p> <p><a href="https://github.com/SuperMap/iClient-JavaScript/blob/master/src/openlayers/mapping/ImageSuperMapRest.js" target="_blank" rel="noopener noreferrer">ImageSuperMapRest<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>基本实例化参数：</p> <table><thead><tr><th>参数名</th> <th>Type</th> <th>简介</th></tr></thead> <tbody><tr><td>url</td> <td>string</td> <td>地图服务地址</td></tr> <tr><td>layersID</td> <td>string</td> <td>指定图层显隐</td></tr> <tr><td>prjCoordSys</td> <td>object</td> <td>坐标系</td></tr></tbody></table> <p>特别说明：
layersID这个属性是用来控制子图层显隐的，具体介绍如下：</p> <blockquote><p>当前地图图层ID的定义规则如下：</p> <ol><li>各级图层按照图层顺序自上而下从0开始编号；</li> <li>冒号（:）前为地图；</li> <li>英文句号（.）表示其他各级图层间的从属关系；</li> <li>英文逗号（,）表示图层间的分隔。</li></ol> <p>例如：</p> <ol><li>[0:0,1,2.0]表示地图0下面的图层：0、1及其下属所有子图层，和2下的子图层0；</li> <li>[1:1.2,2]表示地图1下面的图层：1下的子图层2，和图层2及其下属所有子图层；</li> <li>两个示例合并在一起则是：[0:0,1,2.0,1:1.2,2]
此外，[0,1,2,3]表示地图0下面的图层0、1、2、3及所有子图层，[0:,1:,2:]表示地图0、1、2及其所有子图层。</li> <li>当我们初始化图层之后还想改变图层显示时可以直接如下进行设置： layer.layersID = “[0:0,1,7,11]”</li></ol></blockquote> <p>使用示例：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> TileLayer <span class="token keyword">from</span> <span class="token string">&quot;ol/layer/Tile&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> ImageSuperMapRest <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;***/ImageSuperMapRest&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> supermapImageSource <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ImageSuperMapRest</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">url</span><span class="token operator">:</span> serviceUrl<span class="token punctuation">,</span>
  <span class="token literal-property property">prjCoordSys</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">epsgCode</span><span class="token operator">:</span> <span class="token string">&quot;4525&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">crossOrigin</span><span class="token operator">:</span> <span class="token string">&quot;anonymous&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">layersID</span><span class="token operator">:</span> <span class="token string">&quot;[0:0,1,2]&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> layer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TileLayer</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">id</span><span class="token operator">:</span> id<span class="token punctuation">,</span>
  <span class="token literal-property property">className</span><span class="token operator">:</span> id<span class="token punctuation">,</span>
  <span class="token literal-property property">visible</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token literal-property property">source</span><span class="token operator">:</span> supermapImageSource
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

map<span class="token punctuation">.</span><span class="token function">addLayer</span><span class="token punctuation">(</span>layer<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="supermap动态图层-类切片"><a href="#supermap动态图层-类切片" class="header-anchor">#</a> supermap动态图层（类切片）</h3> <p>openlayers本身是不支持直接加载超图服务的。但是超图提供了图层类，使得openlayers上可以加载SuperMap iServer TileImage 图层源。</p> <p>工具类具体信息参考：</p> <p><a href="https://github.com/SuperMap/iClient-JavaScript/blob/master/src/openlayers/mapping/TileSuperMapRest.js" target="_blank" rel="noopener noreferrer">TileSuperMapRest<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>基本实例化参数：</p> <table><thead><tr><th>参数名</th> <th>Type</th> <th>简介</th></tr></thead> <tbody><tr><td>url</td> <td>string</td> <td>地图服务地址</td></tr> <tr><td>layersID</td> <td>string</td> <td>指定图层显隐</td></tr> <tr><td>prjCoordSys</td> <td>object</td> <td>坐标系</td></tr> <tr><td>tileGrid</td> <td>ol/tilegrid/TileGrid</td> <td>切片组。</td></tr></tbody></table> <p>使用示例：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> TileLayer <span class="token keyword">from</span> <span class="token string">&quot;ol/layer/Tile&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> TileGrid <span class="token keyword">from</span> <span class="token string">&quot;ol/tilegrid/TileGrid&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> ImageSuperMapRest <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;***/TileSuperMapRest&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> tileGrid <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TileGrid</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">tileSize</span><span class="token operator">:</span> <span class="token number">256</span><span class="token punctuation">,</span>
  <span class="token literal-property property">origin</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token operator">*</span><span class="token punctuation">,</span><span class="token operator">*</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token literal-property property">resolutions</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token operator">*</span><span class="token punctuation">,</span><span class="token operator">*</span><span class="token punctuation">,</span><span class="token operator">*</span><span class="token punctuation">,</span><span class="token operator">*</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> supermapImageSource <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ImageSuperMapRest</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">url</span><span class="token operator">:</span> serviceUrl<span class="token punctuation">,</span>
  <span class="token literal-property property">tileGrid</span><span class="token operator">:</span> tileGrid<span class="token punctuation">,</span>
  <span class="token literal-property property">prjCoordSys</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">epsgCode</span><span class="token operator">:</span> <span class="token string">&quot;4525&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">crossOrigin</span><span class="token operator">:</span> <span class="token string">&quot;anonymous&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">layersID</span><span class="token operator">:</span> <span class="token string">&quot;[0:0,1,2]&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> layer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TileLayer</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">id</span><span class="token operator">:</span> id<span class="token punctuation">,</span>
  <span class="token literal-property property">className</span><span class="token operator">:</span> id<span class="token punctuation">,</span>
  <span class="token literal-property property">visible</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token literal-property property">source</span><span class="token operator">:</span> supermapImageSource
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

map<span class="token punctuation">.</span><span class="token function">addLayer</span><span class="token punctuation">(</span>layer<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="supermap切片图层"><a href="#supermap切片图层" class="header-anchor">#</a> supermap切片图层</h3> <p>稍后补充</p> <h2 id="空间图形"><a href="#空间图形" class="header-anchor">#</a> 空间图形</h2> <h3 id="geometryol-geom-geometry-几何"><a href="#geometryol-geom-geometry-几何" class="header-anchor">#</a> geometryol/geom/Geometry（几何）</h3> <p>几何对象的基类。 此类没有构造函数，不能被实例化。</p> <p>对标arcgis api中的 <code>esri/geometry/Geometry</code></p> <p>要构造几何体，具体请参见官方文档，这里不再赘述：</p> <blockquote><p>点类型
<a href="https://openlayers.org/en/latest/apidoc/module-ol_geom_Point-Point.html" target="_blank" rel="noopener noreferrer">单点<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> <a href="https://openlayers.org/en/latest/apidoc/module-ol_geom_MultiPoint-MultiPoint.html" target="_blank" rel="noopener noreferrer">多点<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></blockquote> <blockquote><p>线类型
<a href="https://openlayers.org/en/latest/apidoc/module-ol_geom_LineString-LineString.html" target="_blank" rel="noopener noreferrer">折线<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> <a href="https://openlayers.org/en/latest/apidoc/module-ol_geom_MultiLineString-MultiLineString.html" target="_blank" rel="noopener noreferrer">自由线<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></blockquote> <blockquote><p>面类型
<a href="https://openlayers.org/en/latest/apidoc/module-ol_geom_Polygon-Polygon.html" target="_blank" rel="noopener noreferrer">多边形<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> <a href="https://openlayers.org/en/latest/apidoc/module-ol_geom_Circle-Circle.html" target="_blank" rel="noopener noreferrer">圆<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></blockquote> <h3 id="ol-feature-要素"><a href="#ol-feature-要素" class="header-anchor">#</a> ol/Feature（要素）</h3> <p>几何要素。包含geometry，attributes以及样式style。
对标arcgis api的 Graphic。</p> <p>可以使用setStyle分别设置样式。 否则，它们将使用其矢量层的样式。</p> <p>实例化参数：可以直接传递Geometry对象，也可以是一个对象。如果是对象，则对象必须包含一个geometry的属性作为Feature的几何图形。</p> <p>使用示例：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Point<span class="token punctuation">,</span> LineString<span class="token punctuation">,</span> Polygon <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;ol/geom&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> Feature <span class="token keyword">from</span> <span class="token string">&quot;ol/Feature&quot;</span><span class="token punctuation">;</span>

<span class="token comment">// 一个矩形</span>
Geo <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Polygon</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
  <span class="token punctuation">[</span>
    <span class="token punctuation">[</span>xmin<span class="token punctuation">,</span> ymin<span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span>xmin<span class="token punctuation">,</span> ymax<span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span>xmax<span class="token punctuation">,</span> ymax<span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span>xmax<span class="token punctuation">,</span> ymin<span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span>xmin<span class="token punctuation">,</span> ymin<span class="token punctuation">]</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> tempFeature <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Feature</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">attributes</span><span class="token operator">:</span> Attributes<span class="token punctuation">,</span>
  <span class="token literal-property property">geometry</span><span class="token operator">:</span> Geo<span class="token punctuation">,</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'My Polygon'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

feature<span class="token punctuation">.</span><span class="token function">setStyle</span><span class="token punctuation">(</span>symbol<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="ol-style-style-样式"><a href="#ol-style-style-样式" class="header-anchor">#</a> ol/style/Style（样式）</h3> <p>几何图形的样式类。</p> <p>基本实例化参数：</p> <table><thead><tr><th>参数名</th> <th>Type</th> <th>简介</th></tr></thead> <tbody><tr><td>fill</td> <td>ol/style/Fill</td> <td>填充样式</td></tr> <tr><td>image</td> <td>ol/style/Image</td> <td>图片样式</td></tr> <tr><td>renderer</td> <td>RenderFunction</td> <td>渲染器，设置后fill，stroke 和 image都会忽略</td></tr> <tr><td>stroke</td> <td>ol/style/Stroke</td> <td>外边线的样式</td></tr> <tr><td>text</td> <td>ol/style/Text</td> <td>文本样式</td></tr></tbody></table> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Style<span class="token punctuation">,</span> Circle<span class="token punctuation">,</span> Fill<span class="token punctuation">,</span> Stroke <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;ol/style&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> symbol <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Style</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">fill</span><span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">Fill</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">color</span><span class="token operator">:</span> <span class="token string">&quot;rgba(255, 0, 0, 0)&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token literal-property property">image</span><span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">Circle</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">fill</span><span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">Fill</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">color</span><span class="token operator">:</span> <span class="token string">&quot;rgba(255, 0, 0, 1)&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token literal-property property">radius</span><span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span>
    <span class="token literal-property property">stroke</span><span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">Stroke</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">color</span><span class="token operator">:</span> <span class="token string">&quot;rgba(255, 0, 0, 0)&quot;</span><span class="token punctuation">,</span>
      <span class="token literal-property property">width</span><span class="token operator">:</span> <span class="token number">1</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token literal-property property">stroke</span><span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">Stroke</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">color</span><span class="token operator">:</span> <span class="token string">&quot;rgba(255, 0, 0, 1)&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">width</span><span class="token operator">:</span> <span class="token number">2</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="ol-layer-vector-矢量图层"><a href="#ol-layer-vector-矢量图层" class="header-anchor">#</a> ol/layer/Vector（矢量图层）</h3> <p>呈现给客户端的矢量数据。
对标arcgis api的<code>esri/layers/GraphicsLayer</code></p> <p>基本实例化参数：</p> <table><thead><tr><th>参数名</th> <th>Type</th> <th>简介</th></tr></thead> <tbody><tr><td>opacity</td> <td>number</td> <td>透明度（默认是1）</td></tr> <tr><td>visible</td> <td>boolean</td> <td>是否可见</td></tr> <tr><td>extent</td> <td>ol/extent</td> <td>图层渲染的边界范围</td></tr> <tr><td>zIndex</td> <td>number</td> <td>图层的叠加顺序</td></tr> <tr><td>source</td> <td>ol/source/Vector</td> <td>矢量数据</td></tr></tbody></table> <p>使用示例：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Vector <span class="token keyword">as</span> VectorLayer <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;ol/layer&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Vector <span class="token keyword">as</span> VectorSource <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;ol/source&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> vectorSource <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">VectorSource</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> vectorLayer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">VectorLayer</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">id</span><span class="token operator">:</span> layerID<span class="token punctuation">,</span>
  <span class="token literal-property property">className</span><span class="token operator">:</span> layerID<span class="token punctuation">,</span>
  <span class="token literal-property property">source</span><span class="token operator">:</span> vectorSource
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

map<span class="token punctuation">.</span><span class="token function">addLayer</span><span class="token punctuation">(</span>vectorLayer<span class="token punctuation">)</span><span class="token punctuation">;</span>

vectorLayer<span class="token punctuation">.</span><span class="token function">getSource</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addFeature</span><span class="token punctuation">(</span>feature<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="ol-interaction-draw-绘制"><a href="#ol-interaction-draw-绘制" class="header-anchor">#</a> ol/interaction/Draw（绘制）</h3> <p>绘制要素几何的交互工具。</p> <p>基本实例化参数：</p> <table><thead><tr><th>参数名</th> <th>Type</th> <th>简介</th></tr></thead> <tbody><tr><td>type</td> <td>ol/geom/GeometryType</td> <td>用此实例绘制的几何类型</td></tr> <tr><td>features</td> <td>ol/Feature</td> <td>绘制要素的目标集合</td></tr> <tr><td>source</td> <td>ol/source/Vector</td> <td>绘制要素的目标源</td></tr> <tr><td>style</td> <td>ol/style/Style</td> <td>草图样式</td></tr> <tr><td>freehand</td> <td>boolean</td> <td>是否自由绘制，默认否</td></tr></tbody></table> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token constant">DRAWTYPE</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token constant">POINT</span><span class="token operator">:</span> <span class="token string">&quot;Point&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 点</span>
  <span class="token constant">LINE_STRING</span><span class="token operator">:</span> <span class="token string">&quot;LineString&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 线</span>
  <span class="token constant">POLYGON</span><span class="token operator">:</span> <span class="token string">&quot;Polygon&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 面</span>
  <span class="token constant">CIRCLE</span><span class="token operator">:</span> <span class="token string">&quot;Circle&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 圆,规则多边形</span>
  <span class="token constant">BOX</span><span class="token operator">:</span> <span class="token string">&quot;Box&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 矩形</span>
  <span class="token constant">NONE</span><span class="token operator">:</span> <span class="token string">&quot;None&quot;</span> <span class="token comment">// 关闭draw</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> drawInteraction <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Draw</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token constant">DRAWTYPE</span><span class="token punctuation">.</span><span class="token constant">POLYGON</span><span class="token punctuation">,</span>
  <span class="token literal-property property">freehand</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
map<span class="token punctuation">.</span><span class="token function">addInteraction</span><span class="token punctuation">(</span>drawInteraction<span class="token punctuation">)</span><span class="token punctuation">;</span>

drawInteraction<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&quot;drawend&quot;</span><span class="token punctuation">,</span> <span class="token parameter">DrawEvent</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  map<span class="token punctuation">.</span><span class="token function">removeInteraction</span><span class="token punctuation">(</span>drawInteraction<span class="token punctuation">)</span><span class="token punctuation">;</span>
  vectorLayer<span class="token punctuation">.</span><span class="token function">getSource</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">let</span> feature <span class="token operator">=</span> DrawEvent<span class="token punctuation">.</span>feature<span class="token punctuation">;</span>
  vectorLayer<span class="token punctuation">.</span><span class="token function">getSource</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addFeature</span><span class="token punctuation">(</span>feature<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="关于查询服务"><a href="#关于查询服务" class="header-anchor">#</a> 关于查询服务</h2> <p>在openlayers中加载arcgis或超图的服务，对服务进行查询的方式，除了使用对应厂商提供的API，也可以自己根据服务提供的查询接口，补充参数进行查询请求。</p> <p>这里不介绍查询的参数，只介绍如何将两家的服务查询出来的要素渲染到openlayers的地图上。</p> <h3 id="arcgis服务"><a href="#arcgis服务" class="header-anchor">#</a> arcgis服务</h3> <p>将arcgis服务查询到的要素转化为openlayers的要素。</p> <p>关于查询的参数可以参考arcgis api 官网</p> <p><a href="https://developers.arcgis.com/javascript/latest/api-reference/esri-tasks-support-Query.html" target="_blank" rel="noopener noreferrer">Query<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>使用案例：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> http <span class="token keyword">from</span> <span class="token string">&quot;../Utils/http&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Point<span class="token punctuation">,</span> LineString<span class="token punctuation">,</span> Polygon <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;ol/geom&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> Feature <span class="token keyword">from</span> <span class="token string">&quot;ol/Feature&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> esriGeometryType <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">esriGeometryPoint</span><span class="token operator">:</span> <span class="token string">&quot;esriGeometryPoint&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">esriGeometryMultipoint</span><span class="token operator">:</span> <span class="token string">&quot;esriGeometryMultipoint&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">esriGeometryPolyline</span><span class="token operator">:</span> <span class="token string">&quot;esriGeometryPolyline&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">esriGeometryPolygon</span><span class="token operator">:</span> <span class="token string">&quot;esriGeometryPolygon&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">esriGeometryEnvelope</span><span class="token operator">:</span> <span class="token string">&quot;esriGeometryEnvelope&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

http<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>url<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>layerID<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/query</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>param<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">response</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token function">dealWithEsriResult</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">resolve</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token parameter">error</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">reject</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 处理arcgis查询结果</span>
<span class="token function">dealWithEsriResult</span><span class="token punctuation">(</span><span class="token parameter">result</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  result<span class="token punctuation">.</span>features<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">feature</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> tempGeo <span class="token operator">=</span> <span class="token function">esriGeometry2OLGeo</span><span class="token punctuation">(</span>feature<span class="token punctuation">.</span>geometry<span class="token punctuation">,</span> result<span class="token punctuation">.</span>geometryType<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> tempFeature <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Feature</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">geometry</span><span class="token operator">:</span> tempGeo <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    tempFeature<span class="token punctuation">.</span>attributes <span class="token operator">=</span> feature<span class="token punctuation">.</span>attributes<span class="token punctuation">;</span>
    tempResult<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>tempFeature<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span>result<span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">features</span><span class="token operator">:</span> tempResult <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> result<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">/**
 * @description 将esri geometry对象转换成openlayer geometry对象
 * @param {String} geometryType
 */</span>
<span class="token keyword">const</span> <span class="token function-variable function">esriGeometry2OLGeo</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">esriGeometry<span class="token punctuation">,</span> geometryType</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> olgeo <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
  <span class="token keyword">switch</span> <span class="token punctuation">(</span>geometryType<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">case</span> esriGeometryType<span class="token punctuation">.</span>esriGeometryPoint<span class="token operator">:</span>
      olgeo <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Point</span><span class="token punctuation">(</span><span class="token punctuation">[</span>esriGeometry<span class="token punctuation">.</span>x<span class="token punctuation">,</span> esriGeometry<span class="token punctuation">.</span>y<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token keyword">case</span> esriGeometryType<span class="token punctuation">.</span>esriGeometryMultipoint<span class="token operator">:</span>
      <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token keyword">case</span> esriGeometryType<span class="token punctuation">.</span>esriGeometryPolyline<span class="token operator">:</span>
      olgeo <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LineString</span><span class="token punctuation">(</span>esriGeometry<span class="token punctuation">.</span>paths<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token keyword">case</span> esriGeometryType<span class="token punctuation">.</span>esriGeometryPolygon<span class="token operator">:</span>
      olgeo <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Polygon</span><span class="token punctuation">(</span>esriGeometry<span class="token punctuation">.</span>rings<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token keyword">case</span> esriGeometryType<span class="token punctuation">.</span>esriGeometryEnvelope<span class="token operator">:</span>
      olgeo <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Polygon</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
        <span class="token punctuation">[</span>
          <span class="token punctuation">[</span>esriGeometry<span class="token punctuation">.</span>xmin<span class="token punctuation">,</span> esriGeometry<span class="token punctuation">.</span>ymin<span class="token punctuation">]</span><span class="token punctuation">,</span>
          <span class="token punctuation">[</span>esriGeometry<span class="token punctuation">.</span>xmin<span class="token punctuation">,</span> esriGeometry<span class="token punctuation">.</span>ymax<span class="token punctuation">]</span><span class="token punctuation">,</span>
          <span class="token punctuation">[</span>esriGeometry<span class="token punctuation">.</span>xmax<span class="token punctuation">,</span> esriGeometry<span class="token punctuation">.</span>ymax<span class="token punctuation">]</span><span class="token punctuation">,</span>
          <span class="token punctuation">[</span>esriGeometry<span class="token punctuation">.</span>xmax<span class="token punctuation">,</span> esriGeometry<span class="token punctuation">.</span>ymin<span class="token punctuation">]</span><span class="token punctuation">,</span>
          <span class="token punctuation">[</span>esriGeometry<span class="token punctuation">.</span>xmin<span class="token punctuation">,</span> esriGeometry<span class="token punctuation">.</span>ymin<span class="token punctuation">]</span>
        <span class="token punctuation">]</span>
      <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">break</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> olgeo<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="超图服务"><a href="#超图服务" class="header-anchor">#</a> 超图服务</h3> <p>将超图服务查询到的要素转化为openlayers的要素。</p> <p>关于查询的参数可以参考我之前写的使用超图API查询的笔记</p> <p><a href="http://support.supermap.com.cn:8090/iserver/help/html/zh/mergedProjects/SuperMapiServerRESTAPI/root/data/featureResults/featureResults.htm" target="_blank" rel="noopener noreferrer">超图查询API<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>使用案例：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> http <span class="token keyword">from</span> <span class="token string">&quot;../Utils/http&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Point<span class="token punctuation">,</span> LineString<span class="token punctuation">,</span> Polygon <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;ol/geom&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> Feature <span class="token keyword">from</span> <span class="token string">&quot;ol/Feature&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> smGeometryType <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">smGeometryPoint</span><span class="token operator">:</span> <span class="token string">&quot;POINT&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">smGeometryPolyline</span><span class="token operator">:</span> <span class="token string">&quot;LINE&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">smGeometryPolygon</span><span class="token operator">:</span> <span class="token string">&quot;REGION&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">smGeometryEnvelope</span><span class="token operator">:</span> <span class="token string">&quot;RECTANGLE&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

http<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>url<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/rest/data/featureResults.json?returnContent=true</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>param<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">response</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token function">dealWithSuperMapResult</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">resolve</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token parameter">error</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">reject</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 处理超图查询结果</span>
<span class="token function">dealWithSuperMapResult</span><span class="token punctuation">(</span><span class="token parameter">result</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">let</span> tempResult <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  result<span class="token punctuation">.</span>features<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">feature</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> tempGeo <span class="token operator">=</span> <span class="token function">smGeometry2OLGeo</span><span class="token punctuation">(</span>feature<span class="token punctuation">.</span>geometry<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> tempAttributes <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    feature<span class="token punctuation">.</span>fieldNames<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">fieldName<span class="token punctuation">,</span> index</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      tempAttributes<span class="token punctuation">[</span>fieldName<span class="token punctuation">]</span> <span class="token operator">=</span> feature<span class="token punctuation">.</span>fieldValues<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> tempFeature <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Feature</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">attributes</span><span class="token operator">:</span> tempAttributes<span class="token punctuation">,</span>
      <span class="token literal-property property">geometry</span><span class="token operator">:</span> tempGeo
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    tempFeature<span class="token punctuation">.</span>attributes <span class="token operator">=</span> tempAttributes<span class="token punctuation">;</span>
    tempResult<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>tempFeature<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span>result<span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">features</span><span class="token operator">:</span> tempResult <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> result<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">/**
 * @description 将supermap geometry对象转 openlayer geometry对象
 */</span>
<span class="token keyword">const</span> <span class="token function-variable function">smGeometry2OLGeo</span> <span class="token operator">=</span> <span class="token parameter">smGeometry</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> olgeo <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
    pointArr2 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> startIndex <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
  smGeometry<span class="token punctuation">.</span>parts<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">part</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> tempPoints <span class="token operator">=</span> smGeometry<span class="token punctuation">.</span>points<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span>startIndex<span class="token punctuation">,</span> startIndex <span class="token operator">+</span> part<span class="token punctuation">)</span><span class="token punctuation">;</span>
    startIndex <span class="token operator">+=</span> part<span class="token punctuation">;</span>
    <span class="token keyword">let</span> pointArr1 <span class="token operator">=</span> tempPoints<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token punctuation">[</span>item<span class="token punctuation">.</span>x<span class="token punctuation">,</span> item<span class="token punctuation">.</span>y<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    pointArr2<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>pointArr1<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">switch</span> <span class="token punctuation">(</span>smGeometry<span class="token punctuation">.</span>type<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">case</span> smGeometryType<span class="token punctuation">.</span>smGeometryPoint<span class="token operator">:</span>
      olgeo <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Point</span><span class="token punctuation">(</span><span class="token punctuation">[</span>smGeometry<span class="token punctuation">.</span>points<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>x<span class="token punctuation">,</span> smGeometry<span class="token punctuation">.</span>points<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>y<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token keyword">case</span> smGeometryType<span class="token punctuation">.</span>smGeometryPolyline<span class="token operator">:</span>
      olgeo <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LineString</span><span class="token punctuation">(</span>pointArr2<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token keyword">case</span> smGeometryType<span class="token punctuation">.</span>smGeometryPolygon<span class="token operator">:</span>
      olgeo <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Polygon</span><span class="token punctuation">(</span>pointArr2<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token keyword">case</span> smGeometryType<span class="token punctuation">.</span>smGeometryEnvelope<span class="token operator">:</span>
      olgeo <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Polygon</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
        <span class="token punctuation">[</span>
          <span class="token punctuation">[</span>smGeometry<span class="token punctuation">.</span>xmin<span class="token punctuation">,</span> smGeometry<span class="token punctuation">.</span>ymin<span class="token punctuation">]</span><span class="token punctuation">,</span>
          <span class="token punctuation">[</span>smGeometry<span class="token punctuation">.</span>xmin<span class="token punctuation">,</span> smGeometry<span class="token punctuation">.</span>ymax<span class="token punctuation">]</span><span class="token punctuation">,</span>
          <span class="token punctuation">[</span>smGeometry<span class="token punctuation">.</span>xmax<span class="token punctuation">,</span> smGeometry<span class="token punctuation">.</span>ymax<span class="token punctuation">]</span><span class="token punctuation">,</span>
          <span class="token punctuation">[</span>smGeometry<span class="token punctuation">.</span>xmax<span class="token punctuation">,</span> smGeometry<span class="token punctuation">.</span>ymin<span class="token punctuation">]</span><span class="token punctuation">,</span>
          <span class="token punctuation">[</span>smGeometry<span class="token punctuation">.</span>xmin<span class="token punctuation">,</span> smGeometry<span class="token punctuation">.</span>ymin<span class="token punctuation">]</span>
        <span class="token punctuation">]</span>
      <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">break</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> olgeo<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><div class="to-top"><svg t="1547627942927" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1955" xmlns:xlink="http://www.w3.org/1999/xlink" width="64" height="64" class="icon"><path d="M752.736 431.063C757.159 140.575 520.41 8.97 504.518 0.41V0l-0.45 0.205-0.41-0.205v0.41c-15.934 8.56-252.723 140.165-248.259 430.653-48.21 31.457-98.713 87.368-90.685 184.074 8.028 96.666 101.007 160.768 136.601 157.287 35.595-3.482 25.232-30.31 25.232-30.31l12.206-50.095s52.47 80.569 69.304 80.528c15.114-1.23 87-0.123 95.6 0h0.82c8.602-0.123 80.486-1.23 95.6 0 16.794 0 69.305-80.528 69.305-80.528l12.165 50.094s-10.322 26.83 25.272 30.31c35.595 3.482 128.574-60.62 136.602-157.286 8.028-96.665-42.475-152.617-90.685-184.074z m-248.669-4.26c-6.758-0.123-94.781-3.359-102.891-107.192 2.95-98.714 95.97-107.438 102.891-107.93 6.964 0.492 99.943 9.216 102.892 107.93-8.11 103.833-96.174 107.07-102.892 107.192z m-52.019 500.531c0 11.838-9.42 21.382-21.012 21.382a21.217 21.217 0 0 1-21.054-21.34V821.74c0-11.797 9.421-21.382 21.054-21.382 11.591 0 21.012 9.585 21.012 21.382v105.635z m77.333 57.222a21.504 21.504 0 0 1-21.34 21.626 21.504 21.504 0 0 1-21.34-21.626V827.474c0-11.96 9.543-21.668 21.299-21.668 11.796 0 21.38 9.708 21.38 21.668v157.082z m71.147-82.043c0 11.796-9.42 21.34-21.053 21.34a21.217 21.217 0 0 1-21.013-21.34v-75.367c0-11.755 9.421-21.299 21.013-21.299 11.632 0 21.053 9.544 21.053 21.3v75.366z" fill="#3eaf7c" p-id="1956"></path></svg></div></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">1/20/2021, 9:43:15 AM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/./dailyRecord/2020.html" class="prev">
        2020 项目经验总结
      </a></span> <span class="next"><a href="/./dailyRecord/OLSourceCode1.html">
        OpenLayers 源码分析(上篇)
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="./assets/js/app.78793606.js" defer></script><script src="./assets/js/3.9a8cb714.js" defer></script><script src="./assets/js/37.64bf3a08.js" defer></script><script src="./assets/js/17.7a89769a.js" defer></script>
  </body>
</html>
