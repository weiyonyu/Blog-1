<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Arcgis API | Notebook</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="">
    <meta name="description" content="ğŸ“æ¯å¤©è®°å½•ä¸€ç‚¹ç‚¹">
    
    <link rel="preload" href="./assets/css/0.styles.81cbcbf8.css" as="style"><link rel="preload" href="./assets/js/app.78793606.js" as="script"><link rel="preload" href="./assets/js/3.9a8cb714.js" as="script"><link rel="preload" href="./assets/js/34.c6f368f7.js" as="script"><link rel="preload" href="./assets/js/17.7a89769a.js" as="script"><link rel="prefetch" href="./assets/js/10.3f7afedc.js"><link rel="prefetch" href="./assets/js/11.849f2ab3.js"><link rel="prefetch" href="./assets/js/12.f69c7e94.js"><link rel="prefetch" href="./assets/js/13.ab50e66a.js"><link rel="prefetch" href="./assets/js/14.4b2fce32.js"><link rel="prefetch" href="./assets/js/15.8b353502.js"><link rel="prefetch" href="./assets/js/16.3195875f.js"><link rel="prefetch" href="./assets/js/18.fcadf835.js"><link rel="prefetch" href="./assets/js/19.231d3618.js"><link rel="prefetch" href="./assets/js/2.56707d7e.js"><link rel="prefetch" href="./assets/js/20.a85f560c.js"><link rel="prefetch" href="./assets/js/21.24336449.js"><link rel="prefetch" href="./assets/js/22.73659552.js"><link rel="prefetch" href="./assets/js/23.a091243a.js"><link rel="prefetch" href="./assets/js/24.c8ba16f0.js"><link rel="prefetch" href="./assets/js/25.882bb768.js"><link rel="prefetch" href="./assets/js/26.f04079ce.js"><link rel="prefetch" href="./assets/js/27.3ccd410f.js"><link rel="prefetch" href="./assets/js/28.58938703.js"><link rel="prefetch" href="./assets/js/29.a0b3a5cc.js"><link rel="prefetch" href="./assets/js/30.054f5cc9.js"><link rel="prefetch" href="./assets/js/31.2a2497ca.js"><link rel="prefetch" href="./assets/js/32.2fec2015.js"><link rel="prefetch" href="./assets/js/33.1c38360d.js"><link rel="prefetch" href="./assets/js/35.eb21b972.js"><link rel="prefetch" href="./assets/js/36.d24643c3.js"><link rel="prefetch" href="./assets/js/37.64bf3a08.js"><link rel="prefetch" href="./assets/js/38.9456e466.js"><link rel="prefetch" href="./assets/js/39.d6639e8e.js"><link rel="prefetch" href="./assets/js/4.3e5912c4.js"><link rel="prefetch" href="./assets/js/40.0be61706.js"><link rel="prefetch" href="./assets/js/41.83d228f2.js"><link rel="prefetch" href="./assets/js/42.4a8c6e1b.js"><link rel="prefetch" href="./assets/js/43.ed4184d6.js"><link rel="prefetch" href="./assets/js/44.84f96688.js"><link rel="prefetch" href="./assets/js/45.99c1db7a.js"><link rel="prefetch" href="./assets/js/46.38462d37.js"><link rel="prefetch" href="./assets/js/47.18ad8970.js"><link rel="prefetch" href="./assets/js/5.07eb40e3.js"><link rel="prefetch" href="./assets/js/6.be2121ec.js"><link rel="prefetch" href="./assets/js/7.198c5ca7.js"><link rel="prefetch" href="./assets/js/8.0d657d1b.js"><link rel="prefetch" href="./assets/js/9.35e5878d.js">
    <link rel="stylesheet" href="./assets/css/0.styles.81cbcbf8.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/./" class="home-link router-link-active"><!----> <span class="site-name">Notebook</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/./dailyRecord/" class="nav-link router-link-active">
  ğŸ“šå­¦ä¹ æ€»ç»“
</a></div><div class="nav-item"><a href="/./bookmark/" class="nav-link">
  ğŸ“Œä¹¦ç­¾æ•´ç†
</a></div><div class="nav-item"><a href="/./lint/" class="nav-link">
  âœ”ï¸ç¼–ç è§„èŒƒ&amp;ååŒå¼€å‘
</a></div><div class="nav-item"><a href="http://shooterblog.site/Learn-JS-Demo/%E5%89%8D%E7%AB%AF%E7%9F%A5%E8%AF%86%E5%9B%BE%E8%B0%B1/index.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  ğŸ“–çŸ¥è¯†è„‘å›¾
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/./dailyRecord/" class="nav-link router-link-active">
  ğŸ“šå­¦ä¹ æ€»ç»“
</a></div><div class="nav-item"><a href="/./bookmark/" class="nav-link">
  ğŸ“Œä¹¦ç­¾æ•´ç†
</a></div><div class="nav-item"><a href="/./lint/" class="nav-link">
  âœ”ï¸ç¼–ç è§„èŒƒ&amp;ååŒå¼€å‘
</a></div><div class="nav-item"><a href="http://shooterblog.site/Learn-JS-Demo/%E5%89%8D%E7%AB%AF%E7%9F%A5%E8%AF%86%E5%9B%BE%E8%B0%B1/index.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  ğŸ“–çŸ¥è¯†è„‘å›¾
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>å‰ç«¯æ¨¡å—åŒ–å’Œæ‰“åŒ…å·¥å…·</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>å‰ç«¯å¼‚å¸¸ç›‘æ§</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Vue3åŸç†</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Vue3æºç </span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>å†…åŠŸä¿®ç‚¼</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>æ€»ç»“</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>GIS</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/./dailyRecord/OpenLayers.html" class="sidebar-link">OpenLayers åŸºç¡€</a></li><li><a href="/./dailyRecord/OLSourceCode1.html" class="sidebar-link">OpenLayers æºç åˆ†æ(ä¸Šç¯‡)</a></li><li><a href="/./dailyRecord/OLSourceCode2.html" class="sidebar-link">OpenLayers æºç åˆ†æ(ä¸‹ç¯‡)</a></li><li><a href="/./dailyRecord/ArcgisAPI.html" aria-current="page" class="active sidebar-link">Arcgis API</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/./dailyRecord/ArcgisAPI.html#arcgis-api-æ¸²æŸ“" class="sidebar-link">Arcgis API æ¸²æŸ“</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/./dailyRecord/ArcgisAPI.html#simplerenderer-ç®€å•æ¸²æŸ“" class="sidebar-link">SimpleRendererï¼ˆç®€å•æ¸²æŸ“ï¼‰</a></li><li class="sidebar-sub-header"><a href="/./dailyRecord/ArcgisAPI.html#classbreaksrenderer-åˆ†çº§æ¸²æŸ“" class="sidebar-link">ClassBreaksRendererï¼ˆåˆ†çº§æ¸²æŸ“ï¼‰</a></li><li class="sidebar-sub-header"><a href="/./dailyRecord/ArcgisAPI.html#uniquevaluerenderer-å”¯ä¸€å€¼æ¸²æŸ“" class="sidebar-link">UniqueValueRendererï¼ˆå”¯ä¸€å€¼æ¸²æŸ“ï¼‰</a></li><li class="sidebar-sub-header"><a href="/./dailyRecord/ArcgisAPI.html#blendrenderer-æ··åˆæ¸²æŸ“" class="sidebar-link">BlendRendererï¼ˆæ··åˆæ¸²æŸ“ï¼‰</a></li><li class="sidebar-sub-header"><a href="/./dailyRecord/ArcgisAPI.html#heatmaprenderer-çƒ­åŠ›å›¾æ¸²æŸ“" class="sidebar-link">HeatmapRendererï¼ˆçƒ­åŠ›å›¾æ¸²æŸ“ï¼‰</a></li><li class="sidebar-sub-header"><a href="/./dailyRecord/ArcgisAPI.html#dotdensityrenderer-ç‚¹å¯†åº¦æ¸²æŸ“" class="sidebar-link">DotDensityRendererï¼ˆç‚¹å¯†åº¦æ¸²æŸ“ï¼‰</a></li><li class="sidebar-sub-header"><a href="/./dailyRecord/ArcgisAPI.html#scaledependentrenderer-ä¸åŒæ¯”ä¾‹å°ºä¸åŒæ¸²æŸ“" class="sidebar-link">ScaleDependentRendererï¼ˆä¸åŒæ¯”ä¾‹å°ºä¸åŒæ¸²æŸ“ï¼‰</a></li></ul></li><li class="sidebar-sub-header"><a href="/./dailyRecord/ArcgisAPI.html#arcgis-api-äº‹ä»¶" class="sidebar-link">Arcgis API äº‹ä»¶</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/./dailyRecord/ArcgisAPI.html#ç®€ä»‹" class="sidebar-link">ç®€ä»‹</a></li><li class="sidebar-sub-header"><a href="/./dailyRecord/ArcgisAPI.html#_1-layeräº‹ä»¶" class="sidebar-link">1. Layeräº‹ä»¶</a></li><li class="sidebar-sub-header"><a href="/./dailyRecord/ArcgisAPI.html#_2-viewäº‹ä»¶" class="sidebar-link">2. Viewäº‹ä»¶</a></li><li class="sidebar-sub-header"><a href="/./dailyRecord/ArcgisAPI.html#_3-api3-xä¸4-xçš„åŒºåˆ«" class="sidebar-link">3. API3.xä¸4.xçš„åŒºåˆ«</a></li><li class="sidebar-sub-header"><a href="/./dailyRecord/ArcgisAPI.html#_4-å…³äºapi-4-xçš„å…¶ä»–å±æ€§æˆ–äº‹ä»¶" class="sidebar-link">4. å…³äºAPI 4.xçš„å…¶ä»–å±æ€§æˆ–äº‹ä»¶</a></li></ul></li></ul></li><li><a href="/./dailyRecord/GISsystem.html" class="sidebar-link">GIS ä½“ç³»ä»‹ç»</a></li><li><a href="/./dailyRecord/SuperMapWebGL.html" class="sidebar-link">SuperMap iClient 3D for WebGL</a></li><li><a href="/./dailyRecord/SuperMapIserver.html" class="sidebar-link">SuperMap Iserver</a></li><li><a href="/./dailyRecord/SuperMap3DStudy.html" class="sidebar-link">ä¸‰ç»´WebGISå­¦ä¹ ç¬”è®°</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="arcgis-api"><a href="#arcgis-api" class="header-anchor">#</a> Arcgis API</h1> <h2 id="arcgis-api-æ¸²æŸ“"><a href="#arcgis-api-æ¸²æŸ“" class="header-anchor">#</a> Arcgis API æ¸²æŸ“</h2> <h3 id="simplerenderer-ç®€å•æ¸²æŸ“"><a href="#simplerenderer-ç®€å•æ¸²æŸ“" class="header-anchor">#</a> SimpleRendererï¼ˆç®€å•æ¸²æŸ“ï¼‰</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">require</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&quot;esri/renderers/SimpleRenderer&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">SimpleRenderer</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">/* code goes here */</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>ä½¿ç”¨åœºæ™¯:
ç»™å›¾å±‚çš„è¦ç´ ç»Ÿä¸€è®¾ç½®å›ºå®šçš„æ¸²æŸ“æ–¹æ¡ˆ</p> <p><strong>API 3.28</strong>
SimpleRendererå¸¸ç”¨å±æ€§ä»‹ç»ï¼š</p> <table><thead><tr><th>å€¼</th> <th>ç±»å‹</th> <th>æè¿°</th></tr></thead> <tbody><tr><td>symbol</td> <td>Symbol</td> <td>æ¸²æŸ“çš„ç¬¦å·</td></tr> <tr><td>visualVariables</td> <td>Object[]</td> <td>è®¾ç½®é¢œè‰²ï¼Œé€æ˜åº¦ï¼Œå¤§å°ï¼Œå’Œæ—‹è½¬åº¦</td></tr></tbody></table> <p>ä½¿ç”¨æ¡ˆä¾‹ï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> renderer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SimpleRenderer</span><span class="token punctuation">(</span>symbol<span class="token punctuation">)</span><span class="token punctuation">;</span>

renderer<span class="token punctuation">.</span><span class="token function">setVisualVariables</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">{</span>
    <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&quot;sizeInfo&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">field</span><span class="token operator">:</span> <span class="token string">&quot;field&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">minSize</span><span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span>
    <span class="token literal-property property">maxSize</span><span class="token operator">:</span> <span class="token number">50</span><span class="token punctuation">,</span>
    <span class="token literal-property property">minDataValue</span><span class="token operator">:</span> <span class="token number">50</span><span class="token punctuation">,</span>
    <span class="token literal-property property">maxDataValue</span><span class="token operator">:</span> <span class="token number">1000</span>
  <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>å€¼å¾—æ³¨æ„çš„æ˜¯ï¼š
åŠ¨æ€å›¾å±‚ï¼ˆArcGISDynamicMapServiceLayerï¼‰ä¸­çš„LayerDrawingOptionså±æ€§è®¾ç½®visualVariablesæ˜¯æ— æ•ˆçš„ï¼Œä¼šè¢«å¿½ç•¥</p> <h3 id="classbreaksrenderer-åˆ†çº§æ¸²æŸ“"><a href="#classbreaksrenderer-åˆ†çº§æ¸²æŸ“" class="header-anchor">#</a> ClassBreaksRendererï¼ˆåˆ†çº§æ¸²æŸ“ï¼‰</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">require</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&quot;esri/renderers/ClassBreaksRenderer&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">ClassBreaksRenderer</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">/* code goes here */</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>ä½¿ç”¨åœºæ™¯:
æ ¹æ®ç»™å®šçš„å…·ä½“æŸä¸ªå±æ€§å­—æ®µï¼Œæ ¹æ®è¯¥å­—æ®µçš„å€¼è¿›è¡Œæ¢¯åº¦åˆ†ç±»ï¼Œç”¨ä¸åŒç¬¦å·çš„åˆ†ç±»æ¸²æŸ“ã€‚</p> <p><strong>API 3.28</strong>
ClassBreaksRendererå¸¸ç”¨å±æ€§ä»‹ç»ï¼š</p> <table><thead><tr><th>å€¼</th> <th>ç±»å‹</th> <th>æè¿°</th></tr></thead> <tbody><tr><td>attributeField</td> <td>String</td> <td>æ¸²æŸ“å™¨åŒ¹é…çš„å±æ€§å­—æ®µ</td></tr> <tr><td>defaultSymbol</td> <td>Symbol</td> <td>æ— æ³•åŒ¹é…å€¼æˆ–ä¸­æ–­æ—¶ä½¿ç”¨çš„é»˜è®¤ç¬¦å·ã€‚</td></tr> <tr><td>infos</td> <td>Object[]</td> <td>åˆ†çº§æ¸²æŸ“é…ç½®</td></tr> <tr><td>isMaxInclusive</td> <td>Boolean</td> <td>åˆ†çº§æ¸²æŸ“å€¼ä¸ŠåŒ…å«ï¼ˆé»˜è®¤trueï¼‰</td></tr> <tr><td>normalizationType</td> <td>String</td> <td>æŒ‡ç¤ºå¦‚ä½•è§„èŒƒåŒ–æ•°æ®ã€‚</td></tr> <tr><td>normalizationTotal</td> <td>Number</td> <td>æ€»å€¼</td></tr> <tr><td>normalizationField</td> <td>String</td> <td>attributeFieldå±æ€§çš„å­—æ®µä¼šé™¤è¿™ä¸ªå­—æ®µ</td></tr> <tr><td>visualVariables</td> <td>Object[]</td> <td>è®¾ç½®é¢œè‰²ï¼Œé€æ˜åº¦ï¼Œå¤§å°ï¼Œå’Œæ—‹è½¬åº¦</td></tr></tbody></table> <p>ä½¿ç”¨æ¡ˆä¾‹ï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> renderer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ClassBreaksRenderer</span><span class="token punctuation">(</span>defaultSymbol<span class="token punctuation">,</span> attributeField<span class="token punctuation">)</span><span class="token punctuation">;</span>

renderer<span class="token punctuation">.</span><span class="token function">addBreak</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">25</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">SimpleFillSymbol</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setColor</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Color</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">56</span><span class="token punctuation">,</span> <span class="token number">168</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0.5</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
renderer<span class="token punctuation">.</span><span class="token function">addBreak</span><span class="token punctuation">(</span><span class="token number">25</span><span class="token punctuation">,</span> <span class="token number">75</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">SimpleFillSymbol</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setColor</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Color</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">139</span><span class="token punctuation">,</span> <span class="token number">209</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0.5</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// å¦‚æœä½¿ç”¨normalizationType</span>
<span class="token comment">// Breakçš„å€¼å°†ä¼šæ”¹å˜</span>

<span class="token comment">// normalizationTotalæ˜¯æ‰€æœ‰è¦ç´ attributeFieldå­—æ®µçš„æ€»å’Œ</span>
<span class="token comment">// åˆ¤æ–­çš„Breakçš„å€¼å°†å˜æˆ attributeField/normalizationTotal*100</span>

<span class="token comment">// renderer.normalizationType = &quot;percent-of-total&quot;;</span>
<span class="token comment">// renderer.normalizationTotal = 1000;</span>

<span class="token comment">// attributeFieldå°†ä¼šé™¤normalizationFieldå­—æ®µ</span>
<span class="token comment">// åˆ¤æ–­çš„Breakçš„å€¼å°†å˜æˆ attributeField/normalizationField</span>
renderer<span class="token punctuation">.</span>normalizationType <span class="token operator">=</span> <span class="token string">&quot;field&quot;</span><span class="token punctuation">;</span>
renderer<span class="token punctuation">.</span>normalizationField <span class="token operator">=</span> <span class="token string">&quot;normalizationField&quot;</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="uniquevaluerenderer-å”¯ä¸€å€¼æ¸²æŸ“"><a href="#uniquevaluerenderer-å”¯ä¸€å€¼æ¸²æŸ“" class="header-anchor">#</a> UniqueValueRendererï¼ˆå”¯ä¸€å€¼æ¸²æŸ“ï¼‰</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">require</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&quot;esri/renderers/UniqueValueRenderer&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">UniqueValueRenderer</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">/* code goes here */</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>ä½¿ç”¨åœºæ™¯:
æ ¹æ®ç»™å®šçš„å…·ä½“ä¸€ä¸ªæˆ–å¤šä¸ªå±æ€§å­—æ®µï¼Œæ ¹æ®è¿™äº›å­—æ®µçš„å€¼ï¼Œå¯¹æ¯ä¸€ç»„å”¯ä¸€çš„å€¼è¿›è¡Œä¸åŒç¬¦å·çš„åˆ†ç±»æ¸²æŸ“ã€‚</p> <p><strong>API 3.28</strong>
UniqueValueRendererå¸¸ç”¨å±æ€§ä»‹ç»ï¼š</p> <table><thead><tr><th>å€¼</th> <th>ç±»å‹</th> <th>æè¿°</th></tr></thead> <tbody><tr><td>attributeField</td> <td>String</td> <td>æ¸²æŸ“å™¨åŒ¹é…çš„å±æ€§å­—æ®µ</td></tr> <tr><td>defaultSymbol</td> <td>Symbol</td> <td>æ— æ³•åŒ¹é…å€¼æˆ–ä¸­æ–­æ—¶ä½¿ç”¨çš„é»˜è®¤ç¬¦å·ã€‚</td></tr> <tr><td>fieldDelimiter</td> <td>String</td> <td>å¦‚æœæŒ‡å®šäº†å¤šä¸ªå±æ€§å­—æ®µï¼Œå€¼ä¹‹é—´çš„åˆ†éš”ç¬¦</td></tr> <tr><td>infos</td> <td>Object[]</td> <td>å”¯ä¸€å€¼æ¸²æŸ“é…ç½®</td></tr> <tr><td>valueExpression</td> <td>String</td> <td>ä¸€ä¸ªArcadeè¡¨è¾¾å¼ï¼Œå…¶å€¼ä¸ºå­—ç¬¦ä¸²æˆ–æ•°å­—ã€‚</td></tr> <tr><td>visualVariables</td> <td>Object[]</td> <td>è®¾ç½®é¢œè‰²ï¼Œé€æ˜åº¦ï¼Œå¤§å°ï¼Œå’Œæ—‹è½¬åº¦</td></tr></tbody></table> <ul><li><a href="http://localhost/arcgis_js_v328_sdk/arcgis_js_api/sdk/jssamples/renderer_arcade.html" target="_blank" rel="noopener noreferrer">valueExpressionä½¿ç”¨ä»‹ç»<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <p>ä½¿ç”¨æ¡ˆä¾‹ï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> Options <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">outFields</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;attributeField1&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;attributeField2&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;attributeField3&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;attributeField4&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token keyword">var</span> uniqueValueRenderer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">UniqueValueRenderer</span><span class="token punctuation">(</span><span class="token function">createSymbol</span><span class="token punctuation">(</span><span class="token string">&quot;#d9d9d9&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">graphic</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">var</span> maxField <span class="token operator">=</span> <span class="token string">&quot;Other&quot;</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> max <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

  array<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>Options<span class="token punctuation">.</span>outFields<span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">field</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>graphic<span class="token punctuation">.</span>attributes<span class="token punctuation">[</span>field<span class="token punctuation">]</span> <span class="token operator">&gt;</span> max<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      maxField <span class="token operator">=</span> field<span class="token punctuation">;</span>
      max <span class="token operator">=</span> graphic<span class="token punctuation">.</span>attributes<span class="token punctuation">[</span>field<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> maxField<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">function</span> <span class="token function">createSymbol</span><span class="token punctuation">(</span><span class="token parameter">color</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">SimpleFillSymbol</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setColor</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Color</span><span class="token punctuation">(</span>color<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setOutline</span><span class="token punctuation">(</span>
      <span class="token keyword">new</span> <span class="token class-name">SimpleLineSymbol</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setColor</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Color</span><span class="token punctuation">(</span><span class="token string">&quot;#999999&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setWidth</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

  uniqueValueRenderer<span class="token punctuation">.</span><span class="token function">addValue</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token string">&quot;attributeField1&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">symbol</span><span class="token operator">:</span> <span class="token function">createSymbol</span><span class="token punctuation">(</span><span class="token string">&quot;#fd7f6f&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token literal-property property">label</span><span class="token operator">:</span> <span class="token string">&quot;Vegetables&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  uniqueValueRenderer<span class="token punctuation">.</span><span class="token function">addValue</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token string">&quot;attributeField2&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">symbol</span><span class="token operator">:</span> <span class="token function">createSymbol</span><span class="token punctuation">(</span><span class="token string">&quot;#b2e061&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token literal-property property">label</span><span class="token operator">:</span> <span class="token string">&quot;Cotton&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  uniqueValueRenderer<span class="token punctuation">.</span><span class="token function">addValue</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token string">&quot;attributeField3&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">symbol</span><span class="token operator">:</span> <span class="token function">createSymbol</span><span class="token punctuation">(</span><span class="token string">&quot;#bd7ebe&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token literal-property property">label</span><span class="token operator">:</span> <span class="token string">&quot;Wheat&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  uniqueValueRenderer<span class="token punctuation">.</span><span class="token function">addValue</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token string">&quot;attributeField4&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">symbol</span><span class="token operator">:</span> <span class="token function">createSymbol</span><span class="token punctuation">(</span><span class="token string">&quot;#7eb0d5&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token literal-property property">label</span><span class="token operator">:</span> <span class="token string">&quot;Soybeans&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="blendrenderer-æ··åˆæ¸²æŸ“"><a href="#blendrenderer-æ··åˆæ¸²æŸ“" class="header-anchor">#</a> BlendRendererï¼ˆæ··åˆæ¸²æŸ“ï¼‰</h3> <div class="language- extra-class"><pre class="language-text"><code>require([&quot;esri/renderers/BlendRenderer&quot;], function(BlendRenderer) { /* code goes here */ });
</code></pre></div><p>ä½¿ç”¨åœºæ™¯ï¼š
å¯¹äºå­˜åœ¨ä¸¤ä¸ªæˆ–ä»¥ä¸Šå…·æœ‰ç›¸äº’ç«äº‰çš„å±æ€§å­—æ®µï¼Œä½¿ç”¨æ··åˆæ¸²æŸ“å¯ä»¥ç»™æ¯ä¸ªå±æ€§éƒ½åˆ†é…æœ‰å”¯ä¸€çš„é¢œè‰²ï¼Œå¹¶æ ¹æ®å±æ€§å­—æ®µå€¼çš„å¤§å°è®¡ç®—å‡ºç›¸åº”çš„é€æ˜åº¦ï¼Œæœ€åè¿›è¡Œé¢œè‰²æ··åˆã€‚æ‰€ä»¥ï¼Œå±æ€§å€¼è¶Šé«˜ï¼Œé¢œè‰²è¶Šå ä¼˜åŠ¿ã€‚</p> <p><strong>API 3.28</strong>
BlendRendererå¸¸ç”¨å±æ€§ä»‹ç»ï¼š</p> <table><thead><tr><th>å€¼</th> <th>ç±»å‹</th> <th>æè¿°</th></tr></thead> <tbody><tr><td>blendMode</td> <td>String</td> <td>å†³å®šé¢œè‰²æ˜¯å¦‚ä½•æ··åˆåœ¨ä¸€èµ·</td></tr> <tr><td>fields</td> <td>Object[]</td> <td>ä¸åŒå±æ€§å¯¹åº”çš„é¢œè‰²</td></tr> <tr><td>opacityStops</td> <td>Object[]</td> <td>å€¼å æ¯”ä¸é€æ˜åº¦å¯¹åº”çš„è®¾ç½®</td></tr> <tr><td>normalizationField</td> <td>String</td> <td>å‡ ä¸ªç«äº‰å­—æ®µçš„æ€»è®¡å€¼</td></tr> <tr><td>symbol</td> <td>Symbol</td> <td>å¯¹åº”çš„æ¸²æŸ“ç¬¦å·</td></tr></tbody></table> <ul><li><a href="https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/globalCompositeOperation#Types" target="_blank" rel="noopener noreferrer">å…³äºblendModeæ›´å¤šä¿¡æ¯<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <p>æ¡ˆä¾‹ï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> blendRendererOptions <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">blendMode</span><span class="token operator">:</span> <span class="token string">&quot;darken&quot;</span><span class="token punctuation">,</span> 
  <span class="token literal-property property">symbol</span><span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">SimpleFillSymbol</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setOutline</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">SimpleLineSymbol</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setWidth</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token literal-property property">fields</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token literal-property property">field</span><span class="token operator">:</span> <span class="token string">&quot;VALUE1&quot;</span><span class="token punctuation">,</span>
      <span class="token literal-property property">color</span><span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">Color</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">230</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">field</span><span class="token operator">:</span> <span class="token string">&quot;VALUE2&quot;</span><span class="token punctuation">,</span>
      <span class="token literal-property property">color</span><span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">Color</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">56</span><span class="token punctuation">,</span> <span class="token number">168</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token literal-property property">opacityStops</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
      <span class="token literal-property property">opacity</span><span class="token operator">:</span> <span class="token number">0</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
      <span class="token literal-property property">opacity</span><span class="token operator">:</span> <span class="token number">1</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token literal-property property">normalizationField</span><span class="token operator">:</span> <span class="token string">&quot;Total&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

renderer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BlendRenderer</span><span class="token punctuation">(</span>blendRendererOptions<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>æ³¨ï¼šåœ¨4.11çš„APIä¸­æš‚æ— è¯¥æ¸²æŸ“åŠŸèƒ½</p> <h3 id="heatmaprenderer-çƒ­åŠ›å›¾æ¸²æŸ“"><a href="#heatmaprenderer-çƒ­åŠ›å›¾æ¸²æŸ“" class="header-anchor">#</a> HeatmapRendererï¼ˆçƒ­åŠ›å›¾æ¸²æŸ“ï¼‰</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">require</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&quot;esri/renderers/HeatmapRenderer&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">HeatmapRenderer</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">/* code goes here */</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>ä½¿ç”¨åœºæ™¯:
åœ¨ç‚¹è¦ç´ çš„æ¸²æŸ“ä¸­ï¼Œé€šè¿‡æ ¹æ®æ¯ä¸ªç‚¹çš„ä½ç½®ï¼Œä»¥åŠå…¶å½±å“çš„èŒƒå›´ï¼Œå¹¶ä¸”äº’ç›¸å åŠ ï¼Œæ¸²æŸ“æˆä¸€å¹…çƒ­åŠ›å›¾ã€‚</p> <p><strong>API 3.28</strong>
HeatmapRendererå¸¸ç”¨å±æ€§ä»‹ç»ï¼š</p> <table><thead><tr><th>å€¼</th> <th>ç±»å‹</th> <th>æè¿°</th></tr></thead> <tbody><tr><td>blurRadius</td> <td>Number</td> <td>æ¯ä¸ªç‚¹çš„å½±åƒèŒƒå›´ï¼ˆä»¥åƒç´ ä¸ºå•ä½ï¼‰ã€‚</td></tr> <tr><td>colorStops</td> <td>Object[]</td> <td>æŒ‰æ¯”ä¾‹å»æè¿°æ¸²æŸ“å™¨çš„é¢œè‰²æ¸å˜ã€‚</td></tr> <tr><td>colors</td> <td>String[]</td> <td>æè¿°æ¸²æŸ“å™¨çš„é¢œè‰²æ¸å˜ã€‚</td></tr> <tr><td>field</td> <td>String</td> <td>ç”¨äºçƒ­åŠ›ç‚¹åŠ æƒçš„å±æ€§å­—æ®µã€‚</td></tr> <tr><td>maxPixelIntensity</td> <td>Number</td> <td>åœ¨è‰²å¸¦ä¸­ä¸ºæœ€ç»ˆé¢œè‰²åˆ†é…çš„åƒç´ å¼ºåº¦å€¼ã€‚</td></tr> <tr><td>minPixelIntensity</td> <td>Number</td> <td>åœ¨è‰²å¸¦ä¸­ä¸ºåˆå§‹å¼ºåº¦åˆ†é…çš„åƒç´ å¼ºåº¦å€¼ã€‚ï¼ˆä¸€èˆ¬å¤§äºé›¶ï¼‰</td></tr></tbody></table> <p>ä½¿ç”¨æ¡ˆä¾‹ï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> heatmapRenderer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HeatmapRenderer</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">field</span><span class="token operator">:</span> <span class="token string">&quot;Magnitude&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">blurRadius</span><span class="token operator">:</span> <span class="token number">12</span><span class="token punctuation">,</span>
  <span class="token literal-property property">colorStops</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span> <span class="token literal-property property">ratio</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token literal-property property">color</span><span class="token operator">:</span> <span class="token string">&quot;rgba(250, 0, 0, 0)&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token literal-property property">ratio</span><span class="token operator">:</span> <span class="token number">0.6</span><span class="token punctuation">,</span> <span class="token literal-property property">color</span><span class="token operator">:</span> <span class="token string">&quot;rgb(250, 0, 0)&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token literal-property property">ratio</span><span class="token operator">:</span> <span class="token number">0.85</span><span class="token punctuation">,</span> <span class="token literal-property property">color</span><span class="token operator">:</span> <span class="token string">&quot;rgb(250, 150, 0)&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token literal-property property">ratio</span><span class="token operator">:</span> <span class="token number">0.95</span><span class="token punctuation">,</span> <span class="token literal-property property">color</span><span class="token operator">:</span> <span class="token string">&quot;rgb(255, 255, 0)&quot;</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token literal-property property">maxPixelIntensity</span><span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span>
  <span class="token literal-property property">minPixelIntensity</span><span class="token operator">:</span> <span class="token number">10</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="dotdensityrenderer-ç‚¹å¯†åº¦æ¸²æŸ“"><a href="#dotdensityrenderer-ç‚¹å¯†åº¦æ¸²æŸ“" class="header-anchor">#</a> DotDensityRendererï¼ˆç‚¹å¯†åº¦æ¸²æŸ“ï¼‰</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">require</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&quot;esri/renderers/DotDensityRenderer&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">DotDensityRenderer</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">/* code goes here */</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>ä½¿ç”¨åœºæ™¯:
åœ¨é¢è¦ç´ çš„æ¸²æŸ“ä¸­ï¼Œé€šè¿‡é¢å†…ç‚¹çš„å¯†é›†ç¨‹åº¦æ¥è¡¨ç¤ºæŸä¸ªå±æ€§å­—æ®µçš„å¤§å°ã€‚</p> <p><strong>API 3.28</strong>
DotDensityRendererå¸¸ç”¨å±æ€§ä»‹ç»ï¼š</p> <table><thead><tr><th>å€¼</th> <th>ç±»å‹</th> <th>æè¿°</th></tr></thead> <tbody><tr><td>backgroundColor</td> <td>Color</td> <td>é¢è¦ç´ çš„èƒŒæ™¯è‰²</td></tr> <tr><td>dotShape</td> <td>String</td> <td>ç‚¹æ ·å¼</td></tr> <tr><td>dotSize</td> <td>Number</td> <td>ç‚¹å¤§å°</td></tr> <tr><td>dotValue</td> <td>Number</td> <td>ä¸€ä¸ªç‚¹ä»£è¡¨çš„å€¼</td></tr> <tr><td>fields</td> <td>Object[]</td> <td>å®šä¹‰è¦æ˜ å°„çš„å­—æ®µåŠå…¶é¢œè‰²</td></tr> <tr><td>outline</td> <td>LineSymbol</td> <td>ç‚¹çš„å¤–æ¡†</td></tr></tbody></table> <p>ä½¿ç”¨æ¡ˆä¾‹ï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">new</span> <span class="token class-name">DotDensityRenderer</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">fields</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;M163_07&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">color</span><span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">Color</span><span class="token punctuation">(</span><span class="token string">&quot;#CC8800&quot;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token literal-property property">dotValue</span><span class="token operator">:</span> <span class="token number">1600</span><span class="token punctuation">,</span>
  <span class="token literal-property property">dotSize</span><span class="token operator">:</span> <span class="token number">1</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p><strong>API 4.11 çš„ä¸åŒä¹‹å¤„</strong></p> <p>åœ¨4.11çš„ç‰ˆæœ¬ä¸­ï¼Œæ›´æ–°äº†DotDensityRendererè¿™ä¸ªæ¸²æŸ“ç±»å‹ï¼Œå…¶æä¾›äº†ä¸¤ä¸ªæ–°çš„å±æ€§ï¼Œæ˜¯åœ¨3.28é‡Œæ²¡æœ‰çš„ï¼Œä¹Ÿæ¯”3.28çš„æ›´å¥½ç”¨äº†ã€‚</p> <table><thead><tr><th>å€¼</th> <th>ç±»å‹</th> <th>æè¿°</th></tr></thead> <tbody><tr><td>dotBlendingEnabled</td> <td>Boolean</td> <td>å½“è®¾ç½®äº†å¤šä¸ªfieldsçš„æ—¶å€™ï¼Œé¢œè‰²æ˜¯è¦†ç›–è¿˜æ˜¯å åŠ </td></tr> <tr><td>referenceScale</td> <td>Number</td> <td>æ¸²æŸ“å™¨å°†æ ¹æ®ä½¿ç”¨calculateDotValueï¼ˆï¼‰æ–¹æ³•æ ¹æ®åœ°å›¾æ¯”ä¾‹çš„å˜åŒ–çº¿æ€§åœ°é‡æ–°è®¡ç®—ç‚¹å€¼ï¼Œä¹Ÿå³æ˜¯dotValue</td></tr></tbody></table> <h3 id="scaledependentrenderer-ä¸åŒæ¯”ä¾‹å°ºä¸åŒæ¸²æŸ“"><a href="#scaledependentrenderer-ä¸åŒæ¯”ä¾‹å°ºä¸åŒæ¸²æŸ“" class="header-anchor">#</a> ScaleDependentRendererï¼ˆä¸åŒæ¯”ä¾‹å°ºä¸åŒæ¸²æŸ“ï¼‰</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">require</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&quot;esri/renderers/ScaleDependentRenderer&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">ScaleDependentRenderer</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">/* code goes here */</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>ä½¿ç”¨åœºæ™¯:
åœ¨ä¸åŒçš„åœ°å›¾æ¯”ä¾‹å°ºä¸­ï¼Œæ‰§è¡Œä¸åŒçš„æ¸²æŸ“æ–¹å¼ã€‚</p> <p><strong>API 3.28</strong>
HeatmapRendererå¸¸ç”¨å±æ€§ä»‹ç»ï¼š</p> <table><thead><tr><th>å€¼</th> <th>ç±»å‹</th> <th>æè¿°</th></tr></thead> <tbody><tr><td>rangeType</td> <td>String</td> <td>åˆ¤æ–­ä¾æ®æ˜¯zoomè¿˜æ˜¯scale</td></tr> <tr><td>rendererInfos</td> <td>Object</td> <td>å®šä¹‰ä¸åŒç¼©æ”¾æ¯”ä¾‹çš„æ¸²æŸ“</td></tr></tbody></table> <p>ä½¿ç”¨æ¡ˆä¾‹ï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> renderer1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DotDensityRenderer</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">fields</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;M163_07&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">color</span><span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">Color</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">52</span><span class="token punctuation">,</span> <span class="token number">114</span><span class="token punctuation">,</span> <span class="token number">53</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token literal-property property">dotValue</span><span class="token operator">:</span> <span class="token number">4000</span><span class="token punctuation">,</span>
  <span class="token literal-property property">dotSize</span><span class="token operator">:</span> <span class="token number">2</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> renderer2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DotDensityRenderer</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">fields</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;M163_07&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">color</span><span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">Color</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">52</span><span class="token punctuation">,</span> <span class="token number">114</span><span class="token punctuation">,</span> <span class="token number">53</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token literal-property property">dotValue</span><span class="token operator">:</span> <span class="token number">1000</span><span class="token punctuation">,</span>
  <span class="token literal-property property">dotSize</span><span class="token operator">:</span> <span class="token number">2</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> scaleDependentRenderer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ScaleDependentRenderer</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">rendererInfos</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
    <span class="token literal-property property">renderer</span><span class="token operator">:</span> renderer1<span class="token punctuation">,</span>
    <span class="token literal-property property">maxScale</span><span class="token operator">:</span> <span class="token number">10000000</span><span class="token punctuation">,</span>
    <span class="token literal-property property">minScale</span><span class="token operator">:</span> <span class="token number">20000000</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">renderer</span><span class="token operator">:</span> renderer2<span class="token punctuation">,</span>
    <span class="token literal-property property">maxScale</span><span class="token operator">:</span> <span class="token number">5000000</span><span class="token punctuation">,</span>
    <span class="token literal-property property">minScale</span><span class="token operator">:</span> <span class="token number">10000000</span>
  <span class="token punctuation">}</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>åœ¨4.11çš„APIä¸­æ˜¯æ²¡æœ‰è¿™ä¸ªæ¸²æŸ“ç±»çš„ï¼Œä½†æ˜¯æˆ‘ä»¬å¯ä»¥è¿™æ ·æ›¿ä»£è¿™ä¸ªç±»</p> <div class="language-js extra-class"><pre class="language-js"><code>view<span class="token punctuation">.</span><span class="token function">watch</span><span class="token punctuation">(</span><span class="token string">&quot;scale&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">newValue</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    layer<span class="token punctuation">.</span>renderer <span class="token operator">=</span> newValue <span class="token operator">&lt;=</span> <span class="token number">5000000</span> <span class="token operator">?</span> simpleRenderer <span class="token operator">:</span> heatmapRenderer<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>åŒç†ï¼Œåœ¨3.xçš„APIåŒæ ·å¯ä»¥ä½¿ç”¨è¿™ä¸ªæ–¹æ³•</p> <div class="language-js extra-class"><pre class="language-js"><code>map<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&quot;zoom-end&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> Scale <span class="token operator">=</span> map<span class="token punctuation">.</span><span class="token function">getScale</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>Scale<span class="token operator">&lt;</span><span class="token number">300000</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    layer<span class="token punctuation">.</span><span class="token function">setRenderer</span><span class="token punctuation">(</span>renderer1<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    layer<span class="token punctuation">.</span><span class="token function">setRenderer</span><span class="token punctuation">(</span>renderer2<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="arcgis-api-äº‹ä»¶"><a href="#arcgis-api-äº‹ä»¶" class="header-anchor">#</a> Arcgis API äº‹ä»¶</h2> <h3 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="header-anchor">#</a> ç®€ä»‹</h3> <p>APIäº‹ä»¶å‘ç”Ÿåœ¨ç”¨æˆ·ä¸ç³»ç»Ÿäº¤äº’æ—¶ï¼Œä¾‹å¦‚åŠ è½½å›¾å±‚ã€æ“ä½œé¼ æ ‡ç­‰åŠ¨ä½œéƒ½ä¼šè§¦å‘äº‹ä»¶ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡ç›‘å¬äº‹ä»¶å¹¶ç¼–å†™å“åº”äº‹ä»¶çš„ä»£ç ä½¿æˆ‘ä»¬çš„ç³»ç»Ÿæ›´åŠ å…·æœ‰äº¤äº’æ€§ã€‚</p> <h3 id="_1-layeräº‹ä»¶"><a href="#_1-layeräº‹ä»¶" class="header-anchor">#</a> 1. Layeräº‹ä»¶</h3> <p><code>esri/layers/Layer</code>æ˜¯æ‰€æœ‰å›¾å±‚ç±»çš„çˆ¶ç±»</p> <p>Layerå›¾å±‚æ˜¯Mapå¯¹è±¡çš„æœ€åŸºæœ¬ç»„æˆéƒ¨åˆ†ï¼Œå…¶æ‹¥æœ‰çš„äº‹ä»¶æœ‰ï¼š</p> <table><thead><tr><th>äº‹ä»¶å</th> <th>è¯´æ˜</th> <th>è¿”å›å€¼</th></tr></thead> <tbody><tr><td>layerview-create</td> <td>åœ¨åˆ›å»ºå›¾å±‚çš„LayerViewå¹¶æ·»åŠ åˆ°Viewåè§¦å‘ã€‚</td> <td>{ <br> View,<br> LayerView,<br> Layer<br>}</td></tr> <tr><td>layerview-destroy</td> <td>åœ¨å›¾å±‚çš„LayerViewè¢«é”€æ¯,ä¸å†åœ¨è§†å›¾ä¸­æ¸²æŸ“ä¹‹åè§¦å‘ã€‚</td> <td>{ <br>  View,<br> LayerView,<br>Layer<br>}</td></tr></tbody></table> <p>æ³¨ï¼šå½“ä¸€ä¸ªlayeræ·»åŠ åˆ°mapåä¼šå®ä¾‹åŒ–ä¸€ä¸ª<code>esri/views/layers/LayerView</code>ç±»ã€‚
LayerViewæ˜¯å°†å•ä¸ªå›¾å±‚æ·»åŠ åˆ°MapViewæˆ–SceneViewåçš„è§†å›¾ã€‚</p> <h3 id="_2-viewäº‹ä»¶"><a href="#_2-viewäº‹ä»¶" class="header-anchor">#</a> 2. Viewäº‹ä»¶</h3> <p><code>esri/views/View</code>æ˜¯MapViewå’ŒSceneViewçš„çˆ¶ç±»</p> <table><thead><tr><th>äº‹ä»¶å</th> <th>è¯´æ˜</th></tr></thead> <tbody><tr><td>é¼ æ ‡ç‚¹å‡»äº‹ä»¶</td> <td>ä¸€èˆ¬ä¸ºé¼ æ ‡å·¦é”®è§¦å‘çš„æ“ä½œ</td></tr> <tr><td>click</td> <td>é¼ æ ‡ç‚¹å‡»(mapPoint)</td></tr> <tr><td>immediate-click</td> <td>ä¸å—åŒå‡»äº‹ä»¶å½±å“ï¼Œé¼ æ ‡å·¦é”®åé©¬ä¸Šè§¦å‘(mapPoint)</td></tr> <tr><td>double-click</td> <td>åŒå‡»äº‹ä»¶(mapPoint)</td></tr> <tr><td>pointer-down</td> <td>å½“é¼ æ ‡æŒ‰é’®è¢«æŒ‰ä¸‹ï¼Œæˆ–è€…æ‰‹æŒ‡è§¦ç¢°åˆ°æ˜¾ç¤ºå±æ—¶è§¦å‘ã€‚</td></tr> <tr><td>pointer-up</td> <td>é‡Šæ”¾é¼ æ ‡æŒ‰é’®æˆ–æ˜¾ç¤ºè§¦æ‘¸ç»“æŸåè§¦å‘ã€‚</td></tr> <tr><td>drag</td> <td>æ‹–æ‹½äº‹ä»¶</td></tr> <tr><td>hold</td> <td>åœ¨çŸ­æ—¶é—´å†…æŒ‰ä½é¼ æ ‡æŒ‰é’®åè§¦å‘ã€‚</td></tr> <tr><td>---</td> <td>---</td></tr> <tr><td>é¼ æ ‡å…¶ä»–äº‹ä»¶</td> <td>é¼ æ ‡ç§»åŠ¨ç­‰æ“ä½œè§¦å‘çš„äº‹ä»¶</td></tr> <tr><td>blur</td> <td>å½“æµè§ˆå™¨ç„¦ç‚¹ä»viewä¸­ç§»å¼€æ—¶è§¦å‘ã€‚</td></tr> <tr><td>focus</td> <td>å½“æµè§ˆå™¨çš„ç„¦ç‚¹åœ¨viewä¸Šæ—¶è§¦å‘ã€‚</td></tr> <tr><td>mouse-wheel</td> <td>é¼ æ ‡æ»šè½®åœ¨è§†å›¾ä¸Šæ»šåŠ¨æ—¶è§¦å‘</td></tr> <tr><td>pointer-enter</td> <td>åœ¨é¼ æ ‡å…‰æ ‡è¿›å…¥è§†å›¾ï¼Œæˆ–æ‰‹æŒ‡è§¦æ‘¸å¼€å§‹åè§¦å‘ã€‚</td></tr> <tr><td>pointer-leave</td> <td>åœ¨é¼ æ ‡ç¦»å¼€è§†å›¾ï¼Œæˆ–æ‰‹æŒ‡è§¦æ‘¸ç»“æŸåè§¦å‘ã€‚</td></tr> <tr><td>pointer-move</td> <td>åœ¨é¼ æ ‡æˆ–æ‰‹æŒ‡ç§»åŠ¨åè§¦å‘ã€‚</td></tr> <tr><td>---</td> <td>---</td></tr> <tr><td>å…¶ä»–äº‹ä»¶</td> <td></td></tr> <tr><td>resize</td> <td>å½“viewçš„domå…ƒç´ çš„å¤§å°æ”¹å˜æ—¶è§¦å‘ã€‚</td></tr> <tr><td>key-down</td> <td>æŒ‰ä¸‹é”®ç›˜é”®åè§¦å‘</td></tr> <tr><td>key-up</td> <td>é‡Šæ”¾é”®ç›˜é”®åè§¦å‘ã€‚</td></tr> <tr><td>layerview-create</td> <td>åœ¨æ¯ä¸ªå›¾å±‚éƒ½æœ‰ç›¸åº”çš„LayerViewåˆ›å»ºå¹¶åœ¨è§†å›¾ä¸­å‘ˆç°åè§¦å‘ã€‚</td></tr> <tr><td>layerview-destroy</td> <td>åœ¨ä¸€ä¸ªLayerViewè¢«é”€æ¯å¹¶ä¸”ä¸å†åœ¨è§†å›¾ä¸­å‘ˆç°åè§¦å‘</td></tr></tbody></table> <h3 id="_3-api3-xä¸4-xçš„åŒºåˆ«"><a href="#_3-api3-xä¸4-xçš„åŒºåˆ«" class="header-anchor">#</a> 3. API3.xä¸4.xçš„åŒºåˆ«</h3> <p>åœ¨3.xä¸­
<strong>esri/layers/layer</strong> ç±»æœ‰</p> <p>refresh-interval-change
scale-range-change
scale-visibility-change
opacity-change
visibility-change</p> <p><strong>esri/map</strong> ç±»æœ‰</p> <p>basemap-change
extent-change
time-extent-change</p> <p>è¿™äº›xxx-changeçš„äº‹ä»¶åœ¨4.xéƒ½ç§»é™¤äº†ï¼Œå¦‚æœæƒ³è¾¾åˆ°3.xè¿™äº›äº‹ä»¶çš„æ•ˆæœï¼Œåªéœ€è¦watchç›‘å¬ä¸€ä¸‹å¯¹åº”çš„xxxå±æ€§å˜åŒ–å°±å¥½ã€‚ï¼ˆä¸å±€é™äºä¸Šé¢æåˆ°çš„å±æ€§ï¼Œlayerå’Œviewçš„æ‰€æœ‰å±æ€§éƒ½å¯ä»¥ç›‘å¬ï¼‰</p> <p>ä¾‹å¦‚ï¼Œç°åœ¨è¦ç›‘å¬åœ°å›¾çš„æ¯”ä¾‹å°º</p> <div class="language-js extra-class"><pre class="language-js"><code>view<span class="token punctuation">.</span><span class="token function">watch</span><span class="token punctuation">(</span><span class="token string">&quot;scale&quot;</span><span class="token punctuation">,</span>
  <span class="token punctuation">(</span><span class="token parameter">newValue<span class="token punctuation">,</span> oldValue<span class="token punctuation">,</span> property<span class="token punctuation">,</span> object</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;å›è°ƒå‡½æ•°æœ‰4ä¸ªå‚æ•°ï¼Œæ–°å€¼ï¼Œæ—§å€¼ï¼Œå±æ€§åç§°ï¼Œå‘èµ·äº‹ä»¶çš„å¯¹è±¡&quot;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="_4-å…³äºapi-4-xçš„å…¶ä»–å±æ€§æˆ–äº‹ä»¶"><a href="#_4-å…³äºapi-4-xçš„å…¶ä»–å±æ€§æˆ–äº‹ä»¶" class="header-anchor">#</a> 4. å…³äºAPI 4.xçš„å…¶ä»–å±æ€§æˆ–äº‹ä»¶</h3> <ul><li>å¦‚ä½•çŸ¥é“mapå·²ç»åŠ è½½å®Œæˆï¼Ÿ</li></ul> <p>åœ¨<code>esri/views/View</code>ä¸­æœ‰when(callback, errback)å‡½æ•°ã€‚
å½“Viewç±»åˆ›å»ºå®Œæˆçš„æ—¶å€™ï¼Œä¼šè§¦å‘å›è°ƒå‡½æ•°ã€‚</p> <p>ä½¿ç”¨åœºæ™¯(å½“mapåˆå§‹åŒ–å®Œæˆåï¼Œå°†mapï¼Œviewï¼Œä»¥åŠåœ°å›¾ç»„ä»¶æœ¬èº«ä¼ ç»™å…¶ä»–ç»„ä»¶ä½¿ç”¨)</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// map.vueä¸­ï¼š</span>
mapView<span class="token punctuation">.</span><span class="token function">when</span><span class="token punctuation">(</span>
  lang<span class="token punctuation">.</span><span class="token function">hitch</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;åœ°å›¾åˆ›å»ºå®Œæˆ&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>eventBus<span class="token punctuation">.</span><span class="token function">$emit</span><span class="token punctuation">(</span><span class="token string">&quot;mapInitReady&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
      map<span class="token punctuation">,</span>
      mapView<span class="token punctuation">,</span>
      <span class="token literal-property property">mapComponents</span><span class="token operator">:</span> <span class="token keyword">this</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// å·¥å…·ç»„ä»¶ï¼š</span>
<span class="token function">beforeMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    EventBus<span class="token punctuation">.</span><span class="token function">$on</span><span class="token punctuation">(</span><span class="token string">&quot;mapInitReady&quot;</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>mapReadyHandler<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token function">mapReadyHandler</span><span class="token punctuation">(</span><span class="token parameter">para</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>map <span class="token operator">=</span> para<span class="token punctuation">.</span>map<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>mapView <span class="token operator">=</span> para<span class="token punctuation">.</span>mapView<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>mapComponents <span class="token operator">=</span> para<span class="token punctuation">.</span>mapComponents<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>layerä»è¢«æ·»åŠ åˆ°mapï¼Œåˆ°æœ€åæ˜¾ç¤ºåˆ°é¡µé¢ä¸Šç»å†äº†ä»€ä¹ˆï¼Ÿ</li></ul> <p>1.layerè¢«æ·»åŠ åˆ°mapå¯¹è±¡åï¼Œé¦–å…ˆä¼šåˆ›å»ºlayerViewï¼Œå½“layerViewåˆ›å»ºå¥½åä¼šå‘å¸ƒ<code>layerview-create</code>äº‹ä»¶</p> <p>2.åˆ›å»ºäº†layerViewåï¼Œä¼šè·å–layeræ•°æ®ï¼Œæ­¤æ—¶layerçš„updatingå±æ€§ä¸ºtrue</p> <p>3.è·å–å®Œæ•°æ®ï¼Œupdatingå±æ€§å˜ä¸ºfalseï¼Œè¡¨ç¤ºæ•°æ®è·å–å®Œæ¯•</p> <p>4.å°†æ•°æ®æ¸²æŸ“ä¸ºcanvasï¼Œæ·»åŠ åˆ°é¡µé¢ä¸Š</p> <p>ä½¿ç”¨åœºæ™¯ä¸¾ä¾‹(åœ°å›¾æ‰“å°)</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>mapView<span class="token punctuation">.</span>updating <span class="token operator">||</span> <span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>mapView<span class="token punctuation">.</span>stationary<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> handle <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>mapView<span class="token punctuation">.</span><span class="token function">watch</span><span class="token punctuation">(</span><span class="token string">&quot;updating&quot;</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">newValue</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>newValue<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// updatingå˜æˆfalseï¼Œè¡¨ç¤ºå·²æ›´æ–°å¥½è§†å›¾ï¼Œå¯ä»¥å¼€å§‹æ‰“å°</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">Screenshot</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      handle<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">Screenshot</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">async</span> <span class="token function">Screenshot</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> screenshot <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> dataURL <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> viewType <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>mapComponents<span class="token punctuation">.</span><span class="token function">getViewType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// å»¶æ—¶100ms,æ˜¯å› ä¸ºupdatingå˜trueçš„æ—¶å€™ï¼Œè¿˜éœ€è¦èŠ±æ—¶é—´å°†æ•°æ®æ¸²æŸ“æˆcanvas</span>
  <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>viewType <span class="token operator">===</span> <span class="token string">&quot;2d&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      screenshot <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span>mapComponents<span class="token punctuation">.</span><span class="token function">takeScreenshot</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      dataURL <span class="token operator">=</span> screenshot<span class="token punctuation">.</span><span class="token function">toDataURL</span><span class="token punctuation">(</span><span class="token string">&quot;image/jpeg&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      screenshot <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span>mapView<span class="token punctuation">.</span><span class="token function">takeScreenshot</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      dataURL <span class="token operator">=</span> screenshot<span class="token punctuation">.</span>dataUrl<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">const</span> aLink <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&quot;a&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    aLink<span class="token punctuation">.</span>download <span class="token operator">=</span> <span class="token string">&quot;map.jpeg&quot;</span><span class="token punctuation">;</span>
    aLink<span class="token punctuation">.</span>href <span class="token operator">=</span> dataURL<span class="token punctuation">;</span>
    aLink<span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div><ul><li>visibleä¸suspendedå±æ€§</li></ul> <p>suspendedè¡¨ç¤ºå›¾å±‚å·²ç»åœæ­¢æ›´æ–°ï¼Œå½“æ»¡è¶³ä»¥ä¸‹æ¡ä»¶ä¹‹ä¸€å°±ä¸ºtrue</p> <ol><li>å›¾å±‚çš„visibleä¸ºfalse</li> <li>å›¾å±‚åœ¨å½“å‰åœ°å›¾æ¯”ä¾‹ä¸Šä¸å¯è§ã€‚</li></ol> <div class="to-top"><svg t="1547627942927" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1955" xmlns:xlink="http://www.w3.org/1999/xlink" width="64" height="64" class="icon"><path d="M752.736 431.063C757.159 140.575 520.41 8.97 504.518 0.41V0l-0.45 0.205-0.41-0.205v0.41c-15.934 8.56-252.723 140.165-248.259 430.653-48.21 31.457-98.713 87.368-90.685 184.074 8.028 96.666 101.007 160.768 136.601 157.287 35.595-3.482 25.232-30.31 25.232-30.31l12.206-50.095s52.47 80.569 69.304 80.528c15.114-1.23 87-0.123 95.6 0h0.82c8.602-0.123 80.486-1.23 95.6 0 16.794 0 69.305-80.528 69.305-80.528l12.165 50.094s-10.322 26.83 25.272 30.31c35.595 3.482 128.574-60.62 136.602-157.286 8.028-96.665-42.475-152.617-90.685-184.074z m-248.669-4.26c-6.758-0.123-94.781-3.359-102.891-107.192 2.95-98.714 95.97-107.438 102.891-107.93 6.964 0.492 99.943 9.216 102.892 107.93-8.11 103.833-96.174 107.07-102.892 107.192z m-52.019 500.531c0 11.838-9.42 21.382-21.012 21.382a21.217 21.217 0 0 1-21.054-21.34V821.74c0-11.797 9.421-21.382 21.054-21.382 11.591 0 21.012 9.585 21.012 21.382v105.635z m77.333 57.222a21.504 21.504 0 0 1-21.34 21.626 21.504 21.504 0 0 1-21.34-21.626V827.474c0-11.96 9.543-21.668 21.299-21.668 11.796 0 21.38 9.708 21.38 21.668v157.082z m71.147-82.043c0 11.796-9.42 21.34-21.053 21.34a21.217 21.217 0 0 1-21.013-21.34v-75.367c0-11.755 9.421-21.299 21.013-21.299 11.632 0 21.053 9.544 21.053 21.3v75.366z" fill="#3eaf7c" p-id="1956"></path></svg></div></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">6/13/2020, 5:41:03 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      â†
      <a href="/./dailyRecord/OLSourceCode2.html" class="prev">
        OpenLayers æºç åˆ†æ(ä¸‹ç¯‡)
      </a></span> <span class="next"><a href="/./dailyRecord/GISsystem.html">
        GIS ä½“ç³»ä»‹ç»
      </a>
      â†’
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="./assets/js/app.78793606.js" defer></script><script src="./assets/js/3.9a8cb714.js" defer></script><script src="./assets/js/34.c6f368f7.js" defer></script><script src="./assets/js/17.7a89769a.js" defer></script>
  </body>
</html>
