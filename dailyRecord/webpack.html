<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>webpack | Notebook</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="">
    <meta name="description" content="ğŸ“æ¯å¤©è®°å½•ä¸€ç‚¹ç‚¹">
    
    <link rel="preload" href="./assets/css/0.styles.81cbcbf8.css" as="style"><link rel="preload" href="./assets/js/app.09835454.js" as="script"><link rel="preload" href="./assets/js/3.9a8cb714.js" as="script"><link rel="preload" href="./assets/js/22.bb17a60f.js" as="script"><link rel="preload" href="./assets/js/17.7a89769a.js" as="script"><link rel="prefetch" href="./assets/js/10.beb9865c.js"><link rel="prefetch" href="./assets/js/11.a7dda998.js"><link rel="prefetch" href="./assets/js/12.b8ec8d23.js"><link rel="prefetch" href="./assets/js/13.481ecb00.js"><link rel="prefetch" href="./assets/js/14.2c7e4b48.js"><link rel="prefetch" href="./assets/js/15.47995415.js"><link rel="prefetch" href="./assets/js/16.1e2bf8c4.js"><link rel="prefetch" href="./assets/js/18.fcadf835.js"><link rel="prefetch" href="./assets/js/19.231d3618.js"><link rel="prefetch" href="./assets/js/2.33905da3.js"><link rel="prefetch" href="./assets/js/20.a85f560c.js"><link rel="prefetch" href="./assets/js/21.e075c040.js"><link rel="prefetch" href="./assets/js/23.8188ff03.js"><link rel="prefetch" href="./assets/js/24.345a91d7.js"><link rel="prefetch" href="./assets/js/25.5b2c444b.js"><link rel="prefetch" href="./assets/js/26.2eebd931.js"><link rel="prefetch" href="./assets/js/27.f6c89798.js"><link rel="prefetch" href="./assets/js/28.58938703.js"><link rel="prefetch" href="./assets/js/29.a0b3a5cc.js"><link rel="prefetch" href="./assets/js/30.a7887201.js"><link rel="prefetch" href="./assets/js/31.cbdacff6.js"><link rel="prefetch" href="./assets/js/32.3d4caa9b.js"><link rel="prefetch" href="./assets/js/33.ba141f9f.js"><link rel="prefetch" href="./assets/js/34.7c8b3139.js"><link rel="prefetch" href="./assets/js/35.a9a3dc4c.js"><link rel="prefetch" href="./assets/js/36.1a64f97b.js"><link rel="prefetch" href="./assets/js/37.64bf3a08.js"><link rel="prefetch" href="./assets/js/38.d5a7f7a1.js"><link rel="prefetch" href="./assets/js/39.ee65b755.js"><link rel="prefetch" href="./assets/js/4.69ceb758.js"><link rel="prefetch" href="./assets/js/40.0be61706.js"><link rel="prefetch" href="./assets/js/41.af424b19.js"><link rel="prefetch" href="./assets/js/42.b47a769f.js"><link rel="prefetch" href="./assets/js/43.ed4184d6.js"><link rel="prefetch" href="./assets/js/44.8836396f.js"><link rel="prefetch" href="./assets/js/45.99c1db7a.js"><link rel="prefetch" href="./assets/js/46.2e85c6c4.js"><link rel="prefetch" href="./assets/js/47.48a5bbe5.js"><link rel="prefetch" href="./assets/js/5.2b9a4ed4.js"><link rel="prefetch" href="./assets/js/6.6f16a290.js"><link rel="prefetch" href="./assets/js/7.39aba9d0.js"><link rel="prefetch" href="./assets/js/8.abb41df8.js"><link rel="prefetch" href="./assets/js/9.92305a5c.js">
    <link rel="stylesheet" href="./assets/css/0.styles.81cbcbf8.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/./" class="home-link router-link-active"><!----> <span class="site-name">Notebook</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/./dailyRecord/" class="nav-link router-link-active">
  ğŸ“šå­¦ä¹ æ€»ç»“
</a></div><div class="nav-item"><a href="/./bookmark/" class="nav-link">
  ğŸ“Œä¹¦ç­¾æ•´ç†
</a></div><div class="nav-item"><a href="/./lint/" class="nav-link">
  âœ”ï¸ç¼–ç è§„èŒƒ&amp;ååŒå¼€å‘
</a></div><div class="nav-item"><a href="http://shooterblog.site/Learn-JS-Demo/%E5%89%8D%E7%AB%AF%E7%9F%A5%E8%AF%86%E5%9B%BE%E8%B0%B1/index.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  ğŸ“–çŸ¥è¯†è„‘å›¾
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/./dailyRecord/" class="nav-link router-link-active">
  ğŸ“šå­¦ä¹ æ€»ç»“
</a></div><div class="nav-item"><a href="/./bookmark/" class="nav-link">
  ğŸ“Œä¹¦ç­¾æ•´ç†
</a></div><div class="nav-item"><a href="/./lint/" class="nav-link">
  âœ”ï¸ç¼–ç è§„èŒƒ&amp;ååŒå¼€å‘
</a></div><div class="nav-item"><a href="http://shooterblog.site/Learn-JS-Demo/%E5%89%8D%E7%AB%AF%E7%9F%A5%E8%AF%86%E5%9B%BE%E8%B0%B1/index.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  ğŸ“–çŸ¥è¯†è„‘å›¾
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>å‰ç«¯æ¨¡å—åŒ–å’Œæ‰“åŒ…å·¥å…·</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/./dailyRecord/qdmkh.html" class="sidebar-link">å‰ç«¯æ¨¡å—åŒ–çš„å‘å±•</a></li><li><a href="/./dailyRecord/webpack.html" aria-current="page" class="active sidebar-link">webpack</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/./dailyRecord/webpack.html#å…¥é—¨" class="sidebar-link">å…¥é—¨</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/./dailyRecord/webpack.html#å®‰è£…ä¸ä½¿ç”¨" class="sidebar-link">å®‰è£…ä¸ä½¿ç”¨</a></li><li class="sidebar-sub-header"><a href="/./dailyRecord/webpack.html#ä½¿ç”¨-loader" class="sidebar-link">ä½¿ç”¨ Loader</a></li><li class="sidebar-sub-header"><a href="/./dailyRecord/webpack.html#ä½¿ç”¨-plugin" class="sidebar-link">ä½¿ç”¨ Plugin</a></li><li class="sidebar-sub-header"><a href="/./dailyRecord/webpack.html#ä½¿ç”¨-devserver" class="sidebar-link">ä½¿ç”¨ DevServer</a></li></ul></li><li class="sidebar-sub-header"><a href="/./dailyRecord/webpack.html#é…ç½®" class="sidebar-link">é…ç½®</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/./dailyRecord/webpack.html#entry" class="sidebar-link">Entry</a></li><li class="sidebar-sub-header"><a href="/./dailyRecord/webpack.html#output" class="sidebar-link">Output</a></li><li class="sidebar-sub-header"><a href="/./dailyRecord/webpack.html#module" class="sidebar-link">Module</a></li><li class="sidebar-sub-header"><a href="/./dailyRecord/webpack.html#resolve" class="sidebar-link">Resolve</a></li><li class="sidebar-sub-header"><a href="/./dailyRecord/webpack.html#plugin" class="sidebar-link">Plugin</a></li><li class="sidebar-sub-header"><a href="/./dailyRecord/webpack.html#devserver" class="sidebar-link">devServer</a></li><li class="sidebar-sub-header"><a href="/./dailyRecord/webpack.html#å¤šç§é…ç½®ç±»å‹" class="sidebar-link">å¤šç§é…ç½®ç±»å‹</a></li></ul></li><li class="sidebar-sub-header"><a href="/./dailyRecord/webpack.html#å®æˆ˜" class="sidebar-link">å®æˆ˜</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/./dailyRecord/webpack.html#ä½¿ç”¨-es6-è¯­è¨€" class="sidebar-link">ä½¿ç”¨ ES6 è¯­è¨€</a></li><li class="sidebar-sub-header"><a href="/./dailyRecord/webpack.html#ä¸ºå•é¡µåº”ç”¨ç”Ÿæˆ-html" class="sidebar-link">ä¸ºå•é¡µåº”ç”¨ç”Ÿæˆ HTML</a></li><li class="sidebar-sub-header"><a href="/./dailyRecord/webpack.html#ç®¡ç†å¤šä¸ªå•é¡µåº”ç”¨" class="sidebar-link">ç®¡ç†å¤šä¸ªå•é¡µåº”ç”¨</a></li></ul></li><li class="sidebar-sub-header"><a href="/./dailyRecord/webpack.html#ä¼˜åŒ–" class="sidebar-link">ä¼˜åŒ–</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/./dailyRecord/webpack.html#åŒºåˆ†ç¯å¢ƒ" class="sidebar-link">åŒºåˆ†ç¯å¢ƒ</a></li><li class="sidebar-sub-header"><a href="/./dailyRecord/webpack.html#æå–å…¬å…±ä»£ç " class="sidebar-link">æå–å…¬å…±ä»£ç </a></li><li class="sidebar-sub-header"><a href="/./dailyRecord/webpack.html#åˆ†å‰²ä»£ç æŒ‰éœ€åŠ è½½" class="sidebar-link">åˆ†å‰²ä»£ç æŒ‰éœ€åŠ è½½</a></li></ul></li><li class="sidebar-sub-header"><a href="/./dailyRecord/webpack.html#åŸç†" class="sidebar-link">åŸç†</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/./dailyRecord/webpack.html#å·¥ä½œåŸç†æ¦‚æ‹¬" class="sidebar-link">å·¥ä½œåŸç†æ¦‚æ‹¬</a></li><li class="sidebar-sub-header"><a href="/./dailyRecord/webpack.html#è¾“å‡ºæ–‡ä»¶åˆ†æ" class="sidebar-link">è¾“å‡ºæ–‡ä»¶åˆ†æ</a></li><li class="sidebar-sub-header"><a href="/./dailyRecord/webpack.html#å…³äº-loader" class="sidebar-link">å…³äº Loader</a></li><li class="sidebar-sub-header"><a href="/./dailyRecord/webpack.html#ç¼–å†™-loader" class="sidebar-link">ç¼–å†™ Loader</a></li><li class="sidebar-sub-header"><a href="/./dailyRecord/webpack.html#å…³äº-plugin" class="sidebar-link">å…³äº Plugin</a></li><li class="sidebar-sub-header"><a href="/./dailyRecord/webpack.html#ç¼–å†™-plugin" class="sidebar-link">ç¼–å†™ Plugin</a></li></ul></li><li class="sidebar-sub-header"><a href="/./dailyRecord/webpack.html#å‚è€ƒèµ„æ–™" class="sidebar-link">å‚è€ƒèµ„æ–™</a></li></ul></li><li><a href="/./dailyRecord/webpackAdvanced.html" class="sidebar-link">Webpack æ‰“åŒ…åˆ†æä»¥åŠloaderç¼–å†™</a></li><li><a href="/./dailyRecord/vite.html" class="sidebar-link">vite</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>å‰ç«¯å¼‚å¸¸ç›‘æ§</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Vue3åŸç†</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Vue3æºç </span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>å†…åŠŸä¿®ç‚¼</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>æ€»ç»“</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>GIS</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="webpack"><a href="#webpack" class="header-anchor">#</a> webpack</h1> <p>åœ¨ES6ä¹‹å‰,æˆ‘ä»¬è¦æƒ³è¿›è¡Œæ¨¡å—åŒ–å¼€å‘,å°±å¿…é¡»å€ŸåŠ©äºå…¶ä»–çš„
å·¥å…·ï¼Œè®©æˆ‘ä»¬å¯ä»¥è¿›è¡Œæ¨¡å—åŒ–å¼€å‘ã€‚</p> <p>å¹¶ä¸”åœ¨é€šè¿‡æ¨¡å—åŒ–å¼€å‘å®Œæˆäº†é¡¹ç›®å,è¿˜éœ€è¦å¤„ç†æ¨¡å—é—´çš„å„
ç§ä¾èµ–,å¹¶ä¸”å°†å…¶è¿›è¡Œæ•´åˆæ‰“åŒ…ã€‚</p> <p>è€Œwebpackå…¶ä¸­ä¸€ä¸ªæ ¸å¿ƒå°±æ˜¯è®©æˆ‘ä»¬å¯èƒ½è¿›è¡Œæ¨¡å—åŒ–å¼€å‘ï¼Œå¹¶
ä¸”ä¼šå¸®åŠ©æˆ‘ä»¬å¤„ç†æ¨¡å—é—´çš„ä¾èµ–å…³ç³»ã€‚</p> <p>è€Œä¸”ä¸ä»…ä»…æ˜¯JavaScriptæ–‡ä»¶,æˆ‘ä»¬çš„CSSã€å›¾ç‰‡ã€jsonæ–‡ä»¶
ç­‰ç­‰åœ¨webpackä¸­éƒ½å¯ä»¥è¢«å½“åšæ¨¡å—æ¥ä½¿ç”¨ã€‚</p> <p>è¿™å°±æ˜¯webpackä¸­æ¨¡å—åŒ–çš„æ¦‚å¿µã€‚</p> <p><strong>webpackï¼Œnodeï¼Œnpmçš„å…³ç³»å›¾</strong></p> <p><img src="./assets/img/webpack&amp;node&amp;npm.562c896a.png" alt="image"></p> <p><strong>æ ¸å¿ƒæ¦‚å¿µ</strong></p> <ul><li>Entryï¼šå…¥å£ï¼ŒWebpack æ‰§è¡Œæ„å»ºçš„ç¬¬ä¸€æ­¥å°†ä» Entry å¼€å§‹ï¼Œå¯æŠ½è±¡æˆè¾“å…¥ã€‚</li> <li>Moduleï¼šæ¨¡å—ï¼Œåœ¨ Webpack é‡Œä¸€åˆ‡çš†æ¨¡å—ï¼Œä¸€ä¸ªæ¨¡å—å¯¹åº”ç€ä¸€ä¸ªæ–‡ä»¶ã€‚Webpack ä¼šä»é…ç½®çš„ Entry å¼€å§‹é€’å½’æ‰¾å‡ºæ‰€æœ‰ä¾èµ–çš„æ¨¡å—ã€‚</li> <li>Chunkï¼šä»£ç å—ï¼Œä¸€ä¸ª Chunk ç”±å¤šä¸ªæ¨¡å—ç»„åˆè€Œæˆï¼Œç”¨äºä»£ç åˆå¹¶ä¸åˆ†å‰²ã€‚</li> <li>Loaderï¼šæ¨¡å—è½¬æ¢å™¨ï¼Œç”¨äºæŠŠæ¨¡å—åŸå†…å®¹æŒ‰ç…§éœ€æ±‚è½¬æ¢æˆæ–°å†…å®¹ã€‚</li> <li>Pluginï¼šæ‰©å±•æ’ä»¶ï¼Œåœ¨ Webpack æ„å»ºæµç¨‹ä¸­çš„ç‰¹å®šæ—¶æœºæ³¨å…¥æ‰©å±•é€»è¾‘æ¥æ”¹å˜æ„å»ºç»“æœæˆ–åšä½ æƒ³è¦çš„äº‹æƒ…ã€‚</li> <li>Outputï¼šè¾“å‡ºç»“æœï¼Œåœ¨ Webpack ç»è¿‡ä¸€ç³»åˆ—å¤„ç†å¹¶å¾—å‡ºæœ€ç»ˆæƒ³è¦çš„ä»£ç åè¾“å‡ºç»“æœã€‚</li></ul> <p>Webpack å¯åŠ¨åä¼šä» Entry é‡Œé…ç½®çš„ Module å¼€å§‹é€’å½’è§£æ Entry ä¾èµ–çš„æ‰€æœ‰ Moduleã€‚ æ¯æ‰¾åˆ°ä¸€ä¸ª Moduleï¼Œ å°±ä¼šæ ¹æ®é…ç½®çš„ Loader å»æ‰¾å‡ºå¯¹åº”çš„è½¬æ¢è§„åˆ™ï¼Œå¯¹ Module è¿›è¡Œè½¬æ¢åï¼Œå†è§£æå‡ºå½“å‰ Module ä¾èµ–çš„ Moduleã€‚ è¿™äº›æ¨¡å—ä¼šä»¥ Entry ä¸ºå•ä½è¿›è¡Œåˆ†ç»„ï¼Œä¸€ä¸ª Entry å’Œå…¶æ‰€æœ‰ä¾èµ–çš„ Module è¢«åˆ†åˆ°ä¸€ä¸ªç»„ä¹Ÿå°±æ˜¯ä¸€ä¸ª Chunkã€‚æœ€å Webpack ä¼šæŠŠæ‰€æœ‰ Chunk è½¬æ¢æˆæ–‡ä»¶è¾“å‡ºã€‚ åœ¨æ•´ä¸ªæµç¨‹ä¸­ Webpack ä¼šåœ¨æ°å½“çš„æ—¶æœºæ‰§è¡Œ Plugin é‡Œå®šä¹‰çš„é€»è¾‘ã€‚</p> <p><strong>webpackæ•´ä½“æµç¨‹å›¾</strong></p> <p><img src="./assets/img/webpack.fe008557.png" alt="image"></p> <h2 id="å…¥é—¨"><a href="#å…¥é—¨" class="header-anchor">#</a> å…¥é—¨</h2> <h3 id="å®‰è£…ä¸ä½¿ç”¨"><a href="#å®‰è£…ä¸ä½¿ç”¨" class="header-anchor">#</a> å®‰è£…ä¸ä½¿ç”¨</h3> <p>webpackå…¨å±€å®‰è£…ä¸æœ¬åœ°å®‰è£…</p> <div class="language- extra-class"><pre class="language-text"><code>å…¨å±€å®‰è£…ï¼š
npm install webpack -g
</code></pre></div><p>å…¨å±€å®‰è£…çš„å¼Šç«¯ï¼šå½“cloneä¸€ä¸ªé¡¹ç›®å¹¶ä¸”å¸Œæœ›æ‰“åŒ…æµ‹è¯•çš„æ—¶å€™ï¼Œå¦‚æœè¯¥é¡¹ç›®ç”¨çš„webpackç‰ˆæœ¬ä¸ä¹‹å‰å…¨å±€å®‰è£…çš„ç‰ˆæœ¬ä¸ä¸€è‡´ï¼Œæœ‰å¯èƒ½æ‰“åŒ…å¤±è´¥ï¼Œè¿™æ—¶å°±éœ€è¦ä½¿ç”¨æœ¬åœ°å®‰è£…çš„webpackè¿›è¡Œæ‰“åŒ…ã€‚</p> <div class="language- extra-class"><pre class="language-text"><code>åœ¨æœ¬åœ°å®‰è£…ç‰¹å®šç‰ˆæœ¬å·
--save-dev è¡¨ç¤ºå¼€å‘æ—¶ä¾èµ–

cd å¯¹åº”ç›®å½•
npm install webpack@3.6.0 --save-dev
</code></pre></div><p>æœ¬åœ°å®‰è£…å®Œå<code>package.json</code>æ–‡ä»¶ä¼šå¤šå‡ºä¸€ä¸ª<code>devDependencies</code></p> <div class="language- extra-class"><pre class="language-text"><code>&quot;devDependencies&quot;: {
  &quot;webpack&quot;: &quot;^3.6.0&quot;
}
</code></pre></div><p>è¿™æ—¶å†æ‰§è¡Œè„šæœ¬ï¼Œä¼šä¼˜å…ˆä½¿ç”¨æœ¬åœ°å®‰è£…çš„webpackè¿›è¡Œæ‰“åŒ…</p> <p>åœ¨æ ¹ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ª<code>webpack.config.js</code>æ–‡ä»¶</p> <div class="language-js extra-class"><pre class="language-js"><code>webpack<span class="token punctuation">.</span>config<span class="token punctuation">.</span>js

<span class="token comment">// åŠ¨æ€è·å–è·¯å¾„ï¼ˆä½¿ç”¨nodeåŒ…é‡Œçš„pathå·¥å…·ï¼‰</span>
<span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;path&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// å¿…é¡»ä½¿ç”¨CommonJsè§„èŒƒ</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">entry</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// å…¥å£jsæ–‡ä»¶</span>
    <span class="token literal-property property">app</span><span class="token operator">:</span> <span class="token string">&quot;./app.js&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">output</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// æ‰“åŒ…æ–‡ä»¶çš„è¾“å‡ºç›®å½•,å¿…é¡»æ˜¯ç»å¯¹è·¯å¾„å¦åˆ™æŠ¥é”™</span>
    <span class="token comment">// __dirnameæ˜¯nodeè‡ªå¸¦çš„å…¨å±€å˜é‡ï¼ˆå½“å‰æ–‡ä»¶çš„è·¯å¾„ï¼‰</span>
    <span class="token literal-property property">path</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&quot;dist&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token comment">// æ‰“åŒ…æ–‡ä»¶çš„åç§°</span>
    <span class="token comment">// filename: &quot;build.js&quot;,</span>

    <span class="token comment">// è¿™ç§å‘½åæ ¼å¼ä¸ºåŸåç§°+hashå…«ä½éšæœºå€¼.js</span>
    <span class="token comment">// å¯ä»¥çŸ¥é“æ‰“åŒ…æ–‡ä»¶çš„æºæ–‡ä»¶åç§°å¹¶ä¸”ä¿è¯æ–‡ä»¶åä¸é‡å¤</span>
    <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">&quot;[name].[hash:8].js&quot;</span><span class="token punctuation">,</span>
    <span class="token comment">// å½“æ¶‰åŠåˆ°urlçš„éƒ½ä¼šæ‹¼æ¥dist/</span>
    <span class="token literal-property property">publicPath</span><span class="token operator">:</span><span class="token string">&quot;./dist/&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>æ­¤æ—¶ç›®å½•ç»“æ„å¦‚ä¸‹</p> <div class="language- extra-class"><pre class="language-text"><code>|-src
  |-index.html
  |-main.js
  |-show.js
  |-package.json
  |-webpack.config.js
</code></pre></div><div class="language-html extra-class"><pre class="language-html"><code>index.html
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>UTF-8<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>app<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token comment">&lt;!--å¯¼å…¥ webpack è¾“å‡ºçš„ JS æ–‡ä»¶--&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>./dist/bundle.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code>main<span class="token punctuation">.</span>js
<span class="token comment">// é€šè¿‡ CommonJS è§„èŒƒå¯¼å…¥ show å‡½æ•°</span>
<span class="token keyword">const</span> show <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./show.js'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// æ‰§è¡Œ show å‡½æ•°</span>
<span class="token function">show</span><span class="token punctuation">(</span><span class="token string">'Webpack'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code>show<span class="token punctuation">.</span>js
<span class="token comment">// æ“ä½œ DOM å…ƒç´ ï¼ŒæŠŠ content æ˜¾ç¤ºåˆ°ç½‘é¡µä¸Š</span>
<span class="token keyword">function</span> <span class="token function">show</span><span class="token punctuation">(</span><span class="token parameter">content</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  window<span class="token punctuation">.</span>document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'app'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>innerText <span class="token operator">=</span> <span class="token string">'Hello,'</span> <span class="token operator">+</span> content<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// é€šè¿‡ CommonJS è§„èŒƒå¯¼å‡º show å‡½æ•°</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> show<span class="token punctuation">;</span>
</code></pre></div><p>åŒæ—¶åœ¨ç»ˆç«¯è¾“å…¥<code>npm init</code>ç”Ÿæˆçš„npmåŒ…ç®¡ç†æ–‡ä»¶<code>package.json</code>å¢åŠ ä¸€ä¸ªè„šæœ¬</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">package</span><span class="token punctuation">.</span>json

<span class="token punctuation">{</span>
  <span class="token string-property property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// æ·»åŠ è„šæœ¬</span>
    <span class="token string-property property">&quot;build&quot;</span><span class="token operator">:</span> <span class="token string">&quot;webpack&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>æœ€ååœ¨ç»ˆç«¯è¿è¡Œ<code>npm run build</code>å°†æ–‡ä»¶æ‰“åŒ…åˆ°distæ–‡ä»¶ä¸‹
å¹¶ä¸”åœ¨index.htmlä¸­å°†æ‰“åŒ…æ–‡ä»¶å¼•ç”¨å³å¯</p> <h3 id="ä½¿ç”¨-loader"><a href="#ä½¿ç”¨-loader" class="header-anchor">#</a> ä½¿ç”¨ Loader</h3> <p>loaderæ˜¯webpackä¸­éå¸¸æ ¸å¿ƒçš„æ¦‚å¿µã€‚åœ¨å¼€å‘ä¸­ä¸ä»…ä»…æœ‰åŸºæœ¬çš„jsä»£ç å¤„ç†,ä¹Ÿéœ€è¦åŠ è½½cssã€å›¾ç‰‡,ä¹ŸåŒ…æ‹¬ä¸€äº›é«˜çº§çš„å°†ES6è½¬æˆ
ES5ä»£ç ,å°†TypeScriptè½¬æˆES5ä»£ç ,å°†scssã€lessè½¬æˆcss ,å°†.vueæ–‡ä»¶è½¬æˆjsæ–‡ä»¶ç­‰ç­‰ã€‚</p> <p>å¯¹äºwebpackæœ¬èº«çš„èƒ½åŠ›æ¥è¯´,å¯¹äºè¿™äº›è½¬åŒ–æ˜¯ä¸æ”¯æŒçš„ã€‚éœ€è¦ç»™webpackæ‰©å±•å¯¹åº”çš„loaderã€‚</p> <p>loaderä½¿ç”¨è¿‡ç¨‹:
æ­¥éª¤ä¸€: é€šè¿‡npmå®‰è£…éœ€è¦ä½¿ç”¨çš„loader
æ­¥éª¤äºŒ:åœ¨webpack.config.jsä¸­çš„moduleså…³é”®å­—ä¸‹è¿›è¡Œé…ç½®
å¤§éƒ¨åˆ†loaderæˆ‘ä»¬éƒ½å¯ä»¥åœ¨webpackçš„å®˜ç½‘ä¸­æ‰¾åˆ°ï¼Œå¹¶ä¸”å­¦ä¹ å¯¹åº”çš„ç”¨æ³•ã€‚
ç½‘ç«™åœ°å€ï¼šhttps://www.webpackjs.com/loaders/</p> <p>ä¾‹å¦‚ç°åœ¨å¸Œæœ›å°†CSSæ ·å¼ä¹Ÿè¿›è¡Œæ‰“åŒ…</p> <p>ç›®å½•ç»“æ„å¦‚ä¸‹</p> <div class="language- extra-class"><pre class="language-text"><code>|-src
  |-css
    |-normal.css
  |-js
    |-utils.js
  |-main.js
</code></pre></div><div class="language-css extra-class"><pre class="language-css"><code><span class="token selector">normal.css

body</span><span class="token punctuation">{</span>
  <span class="token property">background-color</span><span class="token punctuation">:</span> red<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code>utils<span class="token punctuation">.</span>js

<span class="token keyword">function</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span>b</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">return</span> a<span class="token operator">+</span>b<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">mul</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span>b</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">return</span> a<span class="token operator">*</span>b<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

module<span class="token punctuation">.</span>exports<span class="token operator">=</span><span class="token punctuation">{</span>
  add<span class="token punctuation">,</span>mul
<span class="token punctuation">}</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code>main<span class="token punctuation">.</span>js

<span class="token keyword">const</span> <span class="token punctuation">{</span>add<span class="token punctuation">,</span>mul<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;./js/utils.js&quot;</span><span class="token punctuation">)</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">mul</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// å¼•å…¥cssæ–‡ä»¶</span>
<span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;./css/normal.css&quot;</span><span class="token punctuation">)</span>

document<span class="token punctuation">.</span><span class="token function">writeln</span><span class="token punctuation">(</span><span class="token string">&quot;&lt;h2&gt;ç½—å¥æ–‡&lt;/h2&gt;&quot;</span><span class="token punctuation">)</span>
</code></pre></div><p>è¦æ”¯æŒé JavaScript ç±»å‹çš„æ–‡ä»¶ï¼Œéœ€è¦ä½¿ç”¨ Webpack çš„ Loader æœºåˆ¶ã€‚å®‰è£…å¥½å¯¹åº”çš„loaderï¼ˆå¯ä»¥çœ‹webpackå®˜ç½‘ï¼ŒæŸ¥æ‰¾éœ€è¦çš„loaderï¼‰åï¼ŒWebpackçš„é…ç½®ä¿®æ”¹ä½¿ç”¨å¦‚ä¸‹ï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// JavaScript æ‰§è¡Œå…¥å£æ–‡ä»¶</span>
  <span class="token literal-property property">entry</span><span class="token operator">:</span> <span class="token string">'./main.js'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">output</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// æŠŠæ‰€æœ‰ä¾èµ–çš„æ¨¡å—åˆå¹¶è¾“å‡ºåˆ°ä¸€ä¸ª bundle.js æ–‡ä»¶</span>
    <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">'bundle.js'</span><span class="token punctuation">,</span>
    <span class="token comment">// è¾“å‡ºæ–‡ä»¶éƒ½æ”¾åˆ° dist ç›®å½•ä¸‹</span>
    <span class="token literal-property property">path</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'./dist'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">module</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token comment">// ç”¨æ­£åˆ™å»åŒ¹é…è¦ç”¨è¯¥ loader è½¬æ¢çš„ CSS æ–‡ä»¶</span>
        <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.css$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        <span class="token comment">// å…ˆä½¿ç”¨ css-loader è¯»å– CSS æ–‡ä»¶ï¼Œå†äº¤ç»™ style-loader æŠŠ CSS å†…å®¹æ³¨å…¥åˆ° JavaScript é‡Œ</span>
        <span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'style-loader'</span><span class="token punctuation">,</span> <span class="token string">'css-loader?minimize'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>é‡æ–°æ‰§è¡Œæ„å»ºæ—¶ï¼Œä¼šå‘ç° bundle.js æ–‡ä»¶è¢«æ›´æ–°äº†ï¼Œé‡Œé¢æ³¨å…¥äº†åœ¨ main.css ä¸­å†™çš„ CSSï¼Œè€Œä¸æ˜¯ä¼šé¢å¤–ç”Ÿæˆä¸€ä¸ª CSS æ–‡ä»¶ã€‚
è¿™å…¶å®éƒ½æ˜¯ style-loader çš„åŠŸåŠ³ï¼Œå®ƒçš„å·¥ä½œåŸç†å¤§æ¦‚æ˜¯æŠŠ CSS å†…å®¹ç”¨ JavaScript é‡Œçš„å­—ç¬¦ä¸²å­˜å‚¨èµ·æ¥ï¼Œåœ¨ç½‘é¡µæ‰§è¡Œ JavaScript æ—¶é€šè¿‡ DOM æ“ä½œåŠ¨æ€åœ°å¾€ HTML head æ ‡ç­¾é‡Œæ’å…¥ HTML style æ ‡ç­¾ã€‚</p> <p><strong>æ³¨æ„</strong></p> <ol><li>use å±æ€§çš„å€¼éœ€è¦æ˜¯ä¸€ä¸ªç”± Loader åç§°ç»„æˆçš„æ•°ç»„ï¼ŒLoader çš„æ‰§è¡Œé¡ºåºæ˜¯ç”±ååˆ°å‰çš„</li> <li>æ¯ä¸€ä¸ª Loader éƒ½å¯ä»¥é€šè¿‡ URL querystring çš„æ–¹å¼ä¼ å…¥å‚æ•°ï¼Œä¾‹å¦‚ css-loader?minimize ä¸­çš„ minimize å‘Šè¯‰ css-loader è¦å¼€å¯ CSS å‹ç¼©ã€‚</li></ol> <p>ç»™ Loader ä¼ å…¥å±æ€§çš„æ–¹å¼é™¤äº†æœ‰ querystring å¤–ï¼Œè¿˜å¯ä»¥é€šè¿‡ Object ä¼ å…¥</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token punctuation">[</span>
  <span class="token string">'style-loader'</span><span class="token punctuation">,</span> 
  <span class="token punctuation">{</span>
    <span class="token literal-property property">loader</span><span class="token operator">:</span><span class="token string">'css-loader'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">options</span><span class="token operator">:</span><span class="token punctuation">{</span>
      <span class="token literal-property property">minimize</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">]</span>
</code></pre></div><h3 id="ä½¿ç”¨-plugin"><a href="#ä½¿ç”¨-plugin" class="header-anchor">#</a> ä½¿ç”¨ Plugin</h3> <p>Plugin æ˜¯ç”¨æ¥æ‰©å±• Webpack åŠŸèƒ½çš„ï¼Œé€šè¿‡åœ¨æ„å»ºæµç¨‹é‡Œæ³¨å…¥é’©å­å®ç°ï¼Œå®ƒç»™ Webpack å¸¦æ¥äº†å¾ˆå¤§çš„çµæ´»æ€§ã€‚</p> <p>åœ¨ä¸Šä¸€èŠ‚ä¸­é€šè¿‡ Loader åŠ è½½äº† CSS æ–‡ä»¶ï¼Œæœ¬èŠ‚å°†é€šè¿‡ Plugin æŠŠæ³¨å…¥åˆ° bundle.js æ–‡ä»¶é‡Œçš„ CSS æå–åˆ°å•ç‹¬çš„æ–‡ä»¶ä¸­ã€‚</p> <p>å®‰è£…æ’ä»¶</p> <div class="language- extra-class"><pre class="language-text"><code>npm i -D extract-text-webpack-plugin
</code></pre></div><p>webpacké…ç½®ä¿®æ”¹å¦‚ä¸‹ï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> ExtractTextPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'extract-text-webpack-plugin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token operator">...</span>
  <span class="token literal-property property">module</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token comment">// ç”¨æ­£åˆ™å»åŒ¹é…è¦ç”¨è¯¥ loader è½¬æ¢çš„ CSS æ–‡ä»¶</span>
        <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.css$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        <span class="token literal-property property">use</span><span class="token operator">:</span> ExtractTextPlugin<span class="token punctuation">.</span><span class="token function">extract</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
          <span class="token comment">// è½¬æ¢ .css æ–‡ä»¶éœ€è¦ä½¿ç”¨çš„ Loader</span>
          <span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'css-loader'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">ExtractTextPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token comment">// ä» .js æ–‡ä»¶ä¸­æå–å‡ºæ¥çš„ .css æ–‡ä»¶çš„åç§°</span>
      <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">[name]_[contenthash:8].css</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>ä»ä»¥ä¸Šä»£ç å¯ä»¥çœ‹å‡ºï¼Œ Webpack æ˜¯é€šè¿‡ plugins å±æ€§æ¥é…ç½®éœ€è¦ä½¿ç”¨çš„æ’ä»¶åˆ—è¡¨çš„ã€‚ plugins å±æ€§æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œé‡Œé¢çš„æ¯ä¸€é¡¹éƒ½æ˜¯æ’ä»¶çš„ä¸€ä¸ªå®ä¾‹ï¼Œåœ¨å®ä¾‹åŒ–ä¸€ä¸ªç»„ä»¶æ—¶å¯ä»¥é€šè¿‡æ„é€ å‡½æ•°ä¼ å…¥è¿™ä¸ªç»„ä»¶æ”¯æŒçš„é…ç½®å±æ€§ã€‚</p> <h3 id="ä½¿ç”¨-devserver"><a href="#ä½¿ç”¨-devserver" class="header-anchor">#</a> ä½¿ç”¨ DevServer</h3> <p>ä¸ºäº†è®©webpackå¯ä»¥æä¾› HTTP æœåŠ¡ï¼Œå¯ä»¥å®‰è£…å®˜æ–¹æä¾›çš„å¼€å‘å·¥å…· DevServer</p> <p>å®‰è£…æ’ä»¶</p> <div class="language- extra-class"><pre class="language-text"><code>npm i -D webpack-dev-server
</code></pre></div><p>webpacké…ç½®å¢åŠ å†…å®¹å¦‚ä¸‹ï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> webpack <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;webpack&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">devServer</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">port</span><span class="token operator">:</span> <span class="token number">8099</span><span class="token punctuation">,</span> <span class="token comment">// æœ¬åœ°æœåŠ¡å™¨ç«¯å£å·</span>
    <span class="token literal-property property">hot</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// æ¨¡å—çƒ­æ›¿æ¢ é»˜è®¤æ˜¯å¦</span>
    <span class="token literal-property property">overlay</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// å¦‚æœä»£ç å‡ºé”™ï¼Œä¼šåœ¨æµè§ˆå™¨é¡µé¢å¼¹å‡ºâ€œæµ®åŠ¨å±‚â€ã€‚ç±»ä¼¼äº vue-cli ç­‰è„šæ‰‹æ¶</span>
    <span class="token literal-property property">historyApiFallback</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token comment">// HTML5 historyæ¨¡å¼</span>
      <span class="token literal-property property">rewrites</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
        <span class="token literal-property property">from</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">.*</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        <span class="token literal-property property">to</span><span class="token operator">:</span> <span class="token string">&quot;/index.html&quot;</span>
      <span class="token punctuation">}</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token comment">// æ¨¡å—çƒ­æ›¿æ¢éœ€è¦ç”¨åˆ°</span>
    <span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>HotModuleReplacementPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>DevServer å¯åŠ¨åä¼šä¸€ç›´é©»ç•™åœ¨åå°ä¿æŒè¿è¡Œï¼Œè®¿é—®è¿™ä¸ªç½‘å€å°±èƒ½è·å–é¡¹ç›®æ ¹ç›®å½•ä¸‹çš„ index.htmlã€‚
DevServer ä¼šæŠŠ Webpack æ„å»ºå‡ºçš„æ–‡ä»¶ä¿å­˜åœ¨å†…å­˜ä¸­ï¼Œåœ¨è¦è®¿é—®è¾“å‡ºçš„æ–‡ä»¶æ—¶ï¼Œå¿…é¡»é€šè¿‡ HTTP æœåŠ¡è®¿é—®ã€‚ ç”±äº DevServer ä¸ä¼šç†ä¼š webpack.config.js é‡Œé…ç½®çš„ output.path å±æ€§ï¼Œæ‰€ä»¥è¦è·å– bundle.js çš„æ­£ç¡® URL æ˜¯ <code>http://localhost:port/bundle.js</code></p> <h4 id="å®æ—¶é¢„è§ˆ"><a href="#å®æ—¶é¢„è§ˆ" class="header-anchor">#</a> å®æ—¶é¢„è§ˆ</h4> <p>æ¯æ¬¡ä¿®æ”¹æ–‡ä»¶ä¿å­˜åæµè§ˆå™¨ä¼šè‡ªåŠ¨åˆ·æ–°,è¿è¡Œå‡ºä¿®æ”¹åçš„æ•ˆæœã€‚</p> <p>å¦‚æœå°è¯•ä¿®æ”¹ index.html æ–‡ä»¶å¹¶ä¿å­˜ï¼Œä½ ä¼šå‘ç°è¿™å¹¶ä¸ä¼šè§¦å‘ä»¥ä¸Šæœºåˆ¶ï¼Œå¯¼è‡´è¿™ä¸ªé—®é¢˜çš„åŸå› æ˜¯ Webpack åœ¨å¯åŠ¨æ—¶ä¼šä»¥é…ç½®é‡Œçš„ entry ä¸ºå…¥å£å»é€’å½’è§£æå‡º entry æ‰€ä¾èµ–çš„æ–‡ä»¶ï¼Œåªæœ‰ entry æœ¬èº«å’Œä¾èµ–çš„æ–‡ä»¶æ‰ä¼šè¢« Webpack æ·»åŠ åˆ°ç›‘å¬åˆ—è¡¨é‡Œã€‚ è€Œ index.html æ–‡ä»¶æ˜¯è„±ç¦»äº† JavaScript æ¨¡å—åŒ–ç³»ç»Ÿçš„ï¼Œæ‰€ä»¥ Webpack ä¸çŸ¥é“å®ƒçš„å­˜åœ¨ã€‚</p> <h4 id="æ¨¡å—çƒ­æ›¿æ¢"><a href="#æ¨¡å—çƒ­æ›¿æ¢" class="header-anchor">#</a> æ¨¡å—çƒ­æ›¿æ¢</h4> <p>é™¤äº†é€šè¿‡é‡æ–°åˆ·æ–°æ•´ä¸ªç½‘é¡µæ¥å®ç°å®æ—¶é¢„è§ˆï¼ŒDevServer è¿˜æœ‰ä¸€ç§è¢«ç§°ä½œæ¨¡å—çƒ­æ›¿æ¢çš„åˆ·æ–°æŠ€æœ¯ã€‚ æ¨¡å—çƒ­æ›¿æ¢èƒ½åšåˆ°åœ¨ä¸é‡æ–°åŠ è½½æ•´ä¸ªç½‘é¡µçš„æƒ…å†µä¸‹ï¼Œé€šè¿‡å°†è¢«æ›´æ–°è¿‡çš„æ¨¡å—æ›¿æ¢è€çš„æ¨¡å—ï¼Œå†é‡æ–°æ‰§è¡Œä¸€æ¬¡æ¥å®ç°å®æ—¶é¢„è§ˆã€‚ æ¨¡å—çƒ­æ›¿æ¢ç›¸å¯¹äºé»˜è®¤çš„åˆ·æ–°æœºåˆ¶èƒ½æä¾›æ›´å¿«çš„å“åº”å’Œæ›´å¥½çš„å¼€å‘ä½“éªŒã€‚</p> <h4 id="æ”¯æŒ-source-map"><a href="#æ”¯æŒ-source-map" class="header-anchor">#</a> æ”¯æŒ Source Map</h4> <p>åœ¨æµè§ˆå™¨ä¸­è¿è¡Œçš„ JavaScript ä»£ç éƒ½æ˜¯ç¼–è¯‘å™¨è¾“å‡ºçš„ä»£ç ï¼Œè¿™äº›ä»£ç çš„å¯è¯»æ€§å¾ˆå·®ã€‚
Webpack æ”¯æŒç”Ÿæˆ Source Mapï¼Œåªéœ€åœ¨å¯åŠ¨æ—¶å¸¦ä¸Š --devtool source-map å‚æ•°ã€‚æˆ–è€…åœ¨webpack.config.jsè®¾ç½®devtoolä¸ºsource-mapï¼Œå°±å¯åœ¨ Sources æ ä¸­çœ‹åˆ°å¯è°ƒè¯•çš„æºä»£ç äº†ã€‚</p> <h2 id="é…ç½®"><a href="#é…ç½®" class="header-anchor">#</a> é…ç½®</h2> <h3 id="entry"><a href="#entry" class="header-anchor">#</a> Entry</h3> <h4 id="context"><a href="#context" class="header-anchor">#</a> context</h4> <p>Webpack åœ¨å¯»æ‰¾ç›¸å¯¹è·¯å¾„çš„æ–‡ä»¶æ—¶ä¼šä»¥ <code>context</code> ä¸ºæ ¹ç›®å½•ï¼Œ<code>context</code> é»˜è®¤ä¸ºæ‰§è¡Œå¯åŠ¨ Webpack æ—¶æ‰€åœ¨çš„å½“å‰å·¥ä½œç›®å½•ã€‚ å¦‚æœæƒ³æ”¹å˜ <code>context</code> çš„é»˜è®¤é…ç½®ï¼Œåˆ™å¯ä»¥åœ¨é…ç½®æ–‡ä»¶é‡Œè¿™æ ·è®¾ç½®å®ƒï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">context</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'app'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>æ³¨æ„ï¼Œ context å¿…é¡»æ˜¯ä¸€ä¸ªç»å¯¹è·¯å¾„çš„å­—ç¬¦ä¸²ã€‚</p> <h4 id="entry-ç±»å‹"><a href="#entry-ç±»å‹" class="header-anchor">#</a> Entry ç±»å‹</h4> <table><thead><tr><th>ç±»å‹</th> <th>ä¾‹å­</th> <th>å«ä¹‰</th></tr></thead> <tbody><tr><td>string</td> <td>'./app/entry'</td> <td>å…¥å£æ¨¡å—çš„æ–‡ä»¶è·¯å¾„ï¼Œå¯ä»¥æ˜¯ç›¸å¯¹è·¯å¾„ã€‚</td></tr> <tr><td>array</td> <td>['./app/entry1', './app/entry2']</td> <td>å…¥å£æ¨¡å—çš„æ–‡ä»¶è·¯å¾„ï¼Œå¯ä»¥æ˜¯ç›¸å¯¹è·¯å¾„ã€‚</td></tr> <tr><td>object</td> <td>{ a: './app/entry-a', b: ['./app/entry-b1', './app/entry-b2']}</td> <td>é…ç½®å¤šä¸ªå…¥å£ï¼Œæ¯ä¸ªå…¥å£ç”Ÿæˆä¸€ä¸ª Chunk</td></tr></tbody></table> <h4 id="é…ç½®åŠ¨æ€-entry"><a href="#é…ç½®åŠ¨æ€-entry" class="header-anchor">#</a> é…ç½®åŠ¨æ€ Entry</h4> <p>Entryçš„é…ç½®æœ‰æ—¶ä¼šå—åˆ°åˆ°å…¶ä»–å› ç´ çš„å½±å“å¯¼è‡´ä¸èƒ½å†™æˆé™æ€çš„å€¼ã€‚è§£å†³æ–¹æ³•æ˜¯æŠŠ Entry è®¾ç½®æˆä¸€ä¸ªå‡½æ•°å»åŠ¨æ€è¿”å›ä¸Šé¢æ‰€è¯´çš„é…ç½®</p> <p>ä»£ç å¦‚ä¸‹ï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// åŒæ­¥å‡½æ•°</span>
<span class="token function-variable function">entry</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">a</span><span class="token operator">:</span><span class="token string">'./pages/a'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">b</span><span class="token operator">:</span><span class="token string">'./pages/b'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">// å¼‚æ­¥å‡½æ•°</span>
<span class="token function-variable function">entry</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
       <span class="token literal-property property">a</span><span class="token operator">:</span><span class="token string">'./pages/a'</span><span class="token punctuation">,</span>
       <span class="token literal-property property">b</span><span class="token operator">:</span><span class="token string">'./pages/b'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="output"><a href="#output" class="header-anchor">#</a> Output</h3> <h4 id="filename"><a href="#filename" class="header-anchor">#</a> filename</h4> <p>é…ç½®è¾“å‡ºæ–‡ä»¶çš„åç§°ã€‚</p> <h4 id="path"><a href="#path" class="header-anchor">#</a> path</h4> <p>è¾“å‡ºæ–‡ä»¶å­˜æ”¾åœ¨æœ¬åœ°çš„ç›®å½•ï¼Œå¿…é¡»æ˜¯ string ç±»å‹çš„ç»å¯¹è·¯å¾„ã€‚</p> <h4 id="publicpath"><a href="#publicpath" class="header-anchor">#</a> publicPath</h4> <p>åœ¨å¤æ‚çš„é¡¹ç›®é‡Œå¯èƒ½ä¼šæœ‰ä¸€äº›æ„å»ºå‡ºçš„èµ„æºéœ€è¦å¼‚æ­¥åŠ è½½ï¼ŒåŠ è½½è¿™äº›å¼‚æ­¥èµ„æºéœ€è¦å¯¹åº”çš„ URL åœ°å€ã€‚</p> <p>publicPathå¹¶ä¸ä¼šå¯¹ç”Ÿæˆæ–‡ä»¶çš„è·¯å¾„é€ æˆå½±å“ï¼Œä¸»è¦æ˜¯å¯¹é¡µé¢é‡Œé¢å¼•å…¥çš„èµ„æºçš„è·¯å¾„åšå¯¹åº”çš„è¡¥å…¨ï¼Œå¸¸è§çš„å°±æ˜¯cssæ–‡ä»¶é‡Œé¢å¼•å…¥çš„å›¾ç‰‡</p> <h4 id="crossoriginloading"><a href="#crossoriginloading" class="header-anchor">#</a> crossOriginLoading</h4> <p>Webpack è¾“å‡ºçš„éƒ¨åˆ†ä»£ç å—å¯èƒ½éœ€è¦å¼‚æ­¥åŠ è½½ï¼Œè€Œå¼‚æ­¥åŠ è½½æ˜¯é€šè¿‡ JSONP æ–¹å¼å®ç°çš„ã€‚
JSONP çš„åŸç†æ˜¯åŠ¨æ€åœ°å‘ HTML ä¸­æ’å…¥ä¸€ä¸ª<code>&lt;script src=&quot;url&quot;&gt;&lt;/script&gt;</code>æ ‡ç­¾å»åŠ è½½å¼‚æ­¥èµ„æºã€‚ output.crossOriginLoading åˆ™æ˜¯ç”¨äºé…ç½®è¿™ä¸ªå¼‚æ­¥æ’å…¥çš„æ ‡ç­¾çš„ crossorigin å€¼ã€‚</p> <p>script æ ‡ç­¾çš„ crossorigin å±æ€§å¯ä»¥å–ä»¥ä¸‹å€¼ï¼š</p> <ul><li>anonymous(é»˜è®¤) åœ¨åŠ è½½æ­¤è„šæœ¬èµ„æºæ—¶ä¸ä¼šå¸¦ä¸Šç”¨æˆ·çš„ Cookiesï¼›</li> <li>use-credentials åœ¨åŠ è½½æ­¤è„šæœ¬èµ„æºæ—¶ä¼šå¸¦ä¸Šç”¨æˆ·çš„ Cookiesã€‚</li></ul> <p>é€šå¸¸ç”¨è®¾ç½® crossorigin æ¥è·å–å¼‚æ­¥åŠ è½½çš„è„šæœ¬æ‰§è¡Œæ—¶çš„è¯¦ç»†é”™è¯¯ä¿¡æ¯ã€‚</p> <h3 id="module"><a href="#module" class="header-anchor">#</a> Module</h3> <p>module é…ç½®å¦‚ä½•å¤„ç†æ¨¡å—ã€‚</p> <h4 id="é…ç½®-loader"><a href="#é…ç½®-loader" class="header-anchor">#</a> é…ç½® Loader</h4> <p><code>rules</code>é…ç½®æ¨¡å—çš„è¯»å–å’Œè§£æè§„åˆ™ï¼Œé€šå¸¸ç”¨æ¥é…ç½®<code>Loader</code>ã€‚å…¶ç±»å‹æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œæ•°ç»„é‡Œæ¯ä¸€é¡¹éƒ½æè¿°äº†å¦‚ä½•å»å¤„ç†éƒ¨åˆ†æ–‡ä»¶ã€‚</p> <p>ä¸‹é¢æ¥é€šè¿‡ä¸€ä¸ªä¾‹å­æ¥è¯´æ˜å…·ä½“ä½¿ç”¨æ–¹æ³•ï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token literal-property property">module</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token comment">// å‘½ä¸­ JavaScript æ–‡ä»¶</span>
      <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.js$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
      <span class="token comment">// ç”¨ babel-loader è½¬æ¢ JavaScript æ–‡ä»¶</span>
      <span class="token comment">// ?cacheDirectory è¡¨ç¤ºä¼ ç»™ babel-loader çš„å‚æ•°ï¼Œç”¨äºç¼“å­˜ babel ç¼–è¯‘ç»“æœåŠ å¿«é‡æ–°ç¼–è¯‘é€Ÿåº¦</span>
      <span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
          <span class="token literal-property property">loader</span><span class="token operator">:</span><span class="token string">'babel-loader'</span><span class="token punctuation">,</span>
          <span class="token literal-property property">options</span><span class="token operator">:</span><span class="token punctuation">{</span>
            <span class="token literal-property property">cacheDirectory</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token comment">// enforce:'post' çš„å«ä¹‰æ˜¯æŠŠè¯¥ Loader çš„æ‰§è¡Œé¡ºåºæ”¾åˆ°æœ€å</span>
          <span class="token comment">// enforce çš„å€¼è¿˜å¯ä»¥æ˜¯ preï¼Œä»£è¡¨æŠŠ Loader çš„æ‰§è¡Œé¡ºåºæ”¾åˆ°æœ€å‰é¢</span>
          <span class="token literal-property property">enforce</span><span class="token operator">:</span><span class="token string">'post'</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token comment">// åªå‘½ä¸­srcç›®å½•é‡Œçš„jsæ–‡ä»¶ï¼ŒåŠ å¿« Webpack æœç´¢é€Ÿåº¦</span>
      <span class="token literal-property property">include</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'src'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token comment">// å‘½ä¸­ SCSS æ–‡ä»¶</span>
      <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.scss$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
      <span class="token comment">// ä½¿ç”¨ä¸€ç»„ Loader å»å¤„ç† SCSS æ–‡ä»¶ã€‚</span>
      <span class="token comment">// å¤„ç†é¡ºåºä¸ºä»ååˆ°å‰ï¼Œå³å…ˆäº¤ç»™ sass-loader å¤„ç†ï¼Œå†æŠŠç»“æœäº¤ç»™ css-loader æœ€åå†ç»™ style-loaderã€‚</span>
      <span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'style-loader'</span><span class="token punctuation">,</span> <span class="token string">'css-loader'</span><span class="token punctuation">,</span> <span class="token string">'sass-loader'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token comment">// æ’é™¤ node_modules ç›®å½•ä¸‹çš„æ–‡ä»¶</span>
      <span class="token literal-property property">exclude</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'node_modules'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token comment">// å¯¹éæ–‡æœ¬æ–‡ä»¶é‡‡ç”¨ file-loader åŠ è½½</span>
      <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.(gif|png|jpe?g|eot|woff|ttf|svg|pdf)$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
      <span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'file-loader'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><p>ä¸Šé¢çš„ä¾‹å­ä¸­ <code>test</code> <code>include</code> <code>exclude</code> è¿™ä¸‰ä¸ªå‘½ä¸­æ–‡ä»¶çš„é…ç½®é¡¹åªä¼ å…¥äº†ä¸€ä¸ªå­—ç¬¦ä¸²æˆ–æ­£åˆ™ï¼Œå…¶å®å®ƒä»¬è¿˜éƒ½æ”¯æŒæ•°ç»„ç±»å‹ï¼Œä½¿ç”¨å¦‚ä¸‹ï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">{</span>
  <span class="token literal-property property">test</span><span class="token operator">:</span><span class="token punctuation">[</span>
    <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.jsx?$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
    <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.tsx?$</span><span class="token regex-delimiter">/</span></span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token literal-property property">include</span><span class="token operator">:</span><span class="token punctuation">[</span>
    path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'src'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'tests'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token literal-property property">exclude</span><span class="token operator">:</span><span class="token punctuation">[</span>
    path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'node_modules'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'bower_modules'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="resolve"><a href="#resolve" class="header-anchor">#</a> Resolve</h3> <p>Webpack åœ¨å¯åŠ¨åä¼šä»é…ç½®çš„å…¥å£æ¨¡å—å‡ºå‘æ‰¾å‡ºæ‰€æœ‰ä¾èµ–çš„æ¨¡å—ï¼ŒResolve é…ç½® Webpack å¦‚ä½•å¯»æ‰¾æ¨¡å—æ‰€å¯¹åº”çš„æ–‡ä»¶ã€‚ Webpack å†…ç½® JavaScript æ¨¡å—åŒ–è¯­æ³•è§£æåŠŸèƒ½ï¼Œé»˜è®¤ä¼šé‡‡ç”¨æ¨¡å—åŒ–æ ‡å‡†é‡Œçº¦å®šå¥½çš„è§„åˆ™å»å¯»æ‰¾ï¼Œä½†ä½ ä¹Ÿå¯ä»¥æ ¹æ®è‡ªå·±çš„éœ€è¦ä¿®æ”¹é»˜è®¤çš„è§„åˆ™ã€‚</p> <h4 id="alias"><a href="#alias" class="header-anchor">#</a> alias</h4> <p>resolve.alias é…ç½®é¡¹é€šè¿‡åˆ«åæ¥æŠŠåŸå¯¼å…¥è·¯å¾„æ˜ å°„æˆä¸€ä¸ªæ–°çš„å¯¼å…¥è·¯å¾„ã€‚ä¾‹å¦‚ä½¿ç”¨ä»¥ä¸‹é…ç½®:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// Webpack alias é…ç½®</span>
<span class="token literal-property property">resolve</span><span class="token operator">:</span><span class="token punctuation">{</span>
  <span class="token literal-property property">alias</span><span class="token operator">:</span><span class="token punctuation">{</span>
    <span class="token literal-property property">components</span><span class="token operator">:</span> <span class="token string">'./src/components/'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>å½“ä½ é€šè¿‡ <code>import Button from 'components/button'</code>å¯¼å…¥æ—¶ï¼Œå®é™…ä¸Šè¢« alias ç­‰ä»·æ›¿æ¢æˆäº† <code>import Button from './src/components/button'</code>ã€‚</p> <h4 id="extensions"><a href="#extensions" class="header-anchor">#</a> extensions</h4> <p>åœ¨å¯¼å…¥è¯­å¥æ²¡å¸¦æ–‡ä»¶åç¼€æ—¶ï¼ŒWebpack ä¼šè‡ªåŠ¨å¸¦ä¸Šåç¼€åå»å°è¯•è®¿é—®æ–‡ä»¶æ˜¯å¦å­˜åœ¨ã€‚ resolve.extensions ç”¨äºé…ç½®åœ¨å°è¯•è¿‡ç¨‹ä¸­ç”¨åˆ°çš„åç¼€åˆ—è¡¨ï¼Œé»˜è®¤æ˜¯ï¼š</p> <div class="language- extra-class"><pre class="language-text"><code>extensions: ['.js', '.json']
</code></pre></div><p>ä¹Ÿå°±æ˜¯è¯´å½“é‡åˆ° <code>require('./data')</code> è¿™æ ·çš„å¯¼å…¥è¯­å¥æ—¶ï¼ŒWebpack ä¼šå…ˆå»å¯»æ‰¾ <code>./data.js</code> æ–‡ä»¶ï¼Œå¦‚æœè¯¥æ–‡ä»¶ä¸å­˜åœ¨å°±å»å¯»æ‰¾ <code>./data.json</code> æ–‡ä»¶ï¼Œ å¦‚æœè¿˜æ˜¯æ‰¾ä¸åˆ°å°±æŠ¥é”™ã€‚</p> <h4 id="modules"><a href="#modules" class="header-anchor">#</a> modules</h4> <p><code>resolve.modules</code>é…ç½® Webpack å»å“ªäº›ç›®å½•ä¸‹å¯»æ‰¾ç¬¬ä¸‰æ–¹æ¨¡å—ï¼Œé»˜è®¤æ˜¯åªä¼šå» node_modules ç›®å½•ä¸‹å¯»æ‰¾ã€‚ æœ‰æ—¶é¡¹ç›®é‡Œä¼šæœ‰ä¸€äº›æ¨¡å—ä¼šå¤§é‡è¢«å…¶å®ƒæ¨¡å—ä¾èµ–å’Œå¯¼å…¥ï¼Œç”±äºå…¶å®ƒæ¨¡å—çš„ä½ç½®åˆ†å¸ƒä¸å®šï¼Œé’ˆå¯¹ä¸åŒçš„æ–‡ä»¶éƒ½è¦å»è®¡ç®—è¢«å¯¼å…¥æ¨¡å—æ–‡ä»¶çš„ç›¸å¯¹è·¯å¾„ï¼Œå°±åƒè¿™æ · import '../../../components/button' è¿™æ—¶ä½ å¯ä»¥åˆ©ç”¨ modules é…ç½®é¡¹ä¼˜åŒ–ï¼Œå‡å¦‚é‚£äº›è¢«å¤§é‡å¯¼å…¥çš„æ¨¡å—éƒ½åœ¨ ./src/components ç›®å½•ä¸‹ï¼ŒæŠŠ modules é…ç½®æˆ</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token literal-property property">modules</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">'./src/components'</span><span class="token punctuation">,</span><span class="token string">'node_modules'</span><span class="token punctuation">]</span>
</code></pre></div><p>å°±å¯ä»¥ç®€å•é€šè¿‡ import 'button' å¯¼å…¥<code>./src/components</code>è·¯å¾„ä¸‹çš„<code>button</code>ã€‚</p> <h3 id="plugin"><a href="#plugin" class="header-anchor">#</a> Plugin</h3> <p>Plugin ç”¨äºæ‰©å±• Webpack åŠŸèƒ½ï¼Œå„ç§å„æ ·çš„ Plugin å‡ ä¹è®© Webpack å¯ä»¥åšä»»ä½•æ„å»ºç›¸å…³çš„äº‹æƒ…ã€‚</p> <h4 id="é…ç½®-plugin"><a href="#é…ç½®-plugin" class="header-anchor">#</a> é…ç½® Plugin</h4> <p>Plugin çš„é…ç½®å¾ˆç®€å•ï¼Œ<code>plugins</code> é…ç½®é¡¹æ¥å—ä¸€ä¸ªæ•°ç»„ï¼Œæ•°ç»„é‡Œæ¯ä¸€é¡¹éƒ½æ˜¯ä¸€ä¸ªè¦ä½¿ç”¨çš„ Plugin çš„å®ä¾‹ï¼ŒPlugin éœ€è¦çš„å‚æ•°é€šè¿‡æ„é€ å‡½æ•°ä¼ å…¥ã€‚</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> CommonsChunkPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webpack/lib/optimize/CommonsChunkPlugin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token comment">// æ‰€æœ‰é¡µé¢éƒ½ä¼šç”¨åˆ°çš„å…¬å…±ä»£ç æå–åˆ° common ä»£ç å—ä¸­</span>
    <span class="token keyword">new</span> <span class="token class-name">CommonsChunkPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'common'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">chunks</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token string">'b'</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>ä½¿ç”¨ Plugin çš„éš¾ç‚¹åœ¨äºæŒæ¡ Plugin æœ¬èº«æä¾›çš„é…ç½®é¡¹ï¼Œè€Œä¸æ˜¯å¦‚ä½•åœ¨ Webpack ä¸­æ¥å…¥ Pluginã€‚</p> <h3 id="devserver"><a href="#devserver" class="header-anchor">#</a> devServer</h3> <p>åªæœ‰åœ¨é€šè¿‡ DevServer å»å¯åŠ¨ Webpack æ—¶é…ç½®æ–‡ä»¶é‡Œ devServer æ‰ä¼šç”Ÿæ•ˆï¼Œå› ä¸ºè¿™äº›å‚æ•°æ‰€å¯¹åº”çš„åŠŸèƒ½éƒ½æ˜¯ DevServer æä¾›çš„ï¼ŒWebpack æœ¬èº«å¹¶ä¸è®¤è¯† devServer é…ç½®é¡¹ã€‚</p> <h4 id="hot"><a href="#hot" class="header-anchor">#</a> hot</h4> <p><code>devServer.hot</code> é…ç½®æ˜¯å¦å¯ç”¨æ¨¡å—çƒ­æ›¿æ¢åŠŸèƒ½ã€‚ DevServer é»˜è®¤çš„è¡Œä¸ºæ˜¯åœ¨å‘ç°æºä»£ç è¢«æ›´æ–°åä¼šé€šè¿‡è‡ªåŠ¨åˆ·æ–°æ•´ä¸ªé¡µé¢æ¥åšåˆ°å®æ—¶é¢„è§ˆï¼Œå¼€å¯æ¨¡å—çƒ­æ›¿æ¢åŠŸèƒ½åå°†åœ¨ä¸åˆ·æ–°æ•´ä¸ªé¡µé¢çš„æƒ…å†µä¸‹é€šè¿‡ç”¨æ–°æ¨¡å—æ›¿æ¢è€æ¨¡å—æ¥åšåˆ°å®æ—¶é¢„è§ˆã€‚</p> <h4 id="historyapifallback"><a href="#historyapifallback" class="header-anchor">#</a> historyApiFallback</h4> <p>ç”¨äºæ–¹ä¾¿çš„å¼€å‘ä½¿ç”¨äº† HTML5 History API çš„å•é¡µåº”ç”¨ã€‚ è¿™ç±»å•é¡µåº”ç”¨è¦æ±‚æœåŠ¡å™¨åœ¨é’ˆå¯¹ä»»ä½•å‘½ä¸­çš„è·¯ç”±æ—¶éƒ½è¿”å›ä¸€ä¸ªå¯¹åº”çš„ HTML æ–‡ä»¶ï¼Œä¾‹å¦‚åœ¨è®¿é—® http://localhost/user å’Œ http://localhost/home æ—¶éƒ½è¿”å› index.html æ–‡ä»¶ï¼Œ æµè§ˆå™¨ç«¯çš„ JavaScript ä»£ç ä¼šä» URL é‡Œè§£æå‡ºå½“å‰é¡µé¢çš„çŠ¶æ€ï¼Œæ˜¾ç¤ºå‡ºå¯¹åº”çš„ç•Œé¢ã€‚</p> <p>é…ç½® historyApiFallback æœ€ç®€å•çš„åšæ³•æ˜¯ï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token literal-property property">historyApiFallback</span><span class="token operator">:</span> <span class="token boolean">true</span>
</code></pre></div><p>è¿™ä¼šå¯¼è‡´ä»»ä½•è¯·æ±‚éƒ½ä¼šè¿”å› index.html æ–‡ä»¶ï¼Œè¿™åªèƒ½ç”¨äºåªæœ‰ä¸€ä¸ª HTML æ–‡ä»¶çš„åº”ç”¨ã€‚</p> <p>å¦‚æœåº”ç”¨ç”±å¤šä¸ªå•é¡µåº”ç”¨ç»„æˆï¼Œè¿™å°±éœ€è¦ <code>DevServer</code> æ ¹æ®ä¸åŒçš„è¯·æ±‚æ¥è¿”å›ä¸åŒçš„ HTML æ–‡ä»¶ï¼Œé…ç½®å¦‚ä¸‹ï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token literal-property property">historyApiFallback</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token comment">// ä½¿ç”¨æ­£åˆ™åŒ¹é…å‘½ä¸­è·¯ç”±</span>
  <span class="token literal-property property">rewrites</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token comment">// /user å¼€å¤´çš„éƒ½è¿”å› user.html</span>
    <span class="token punctuation">{</span> <span class="token literal-property property">from</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^\/user</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span> <span class="token literal-property property">to</span><span class="token operator">:</span> <span class="token string">'/user.html'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token literal-property property">from</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^\/game</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span> <span class="token literal-property property">to</span><span class="token operator">:</span> <span class="token string">'/game.html'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// å…¶å®ƒçš„éƒ½è¿”å› index.html</span>
    <span class="token punctuation">{</span> <span class="token literal-property property">from</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">.</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span> <span class="token literal-property property">to</span><span class="token operator">:</span> <span class="token string">'/index.html'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="host"><a href="#host" class="header-anchor">#</a> host</h4> <p>ç”¨äºé…ç½® DevServer æœåŠ¡ç›‘å¬çš„åœ°å€ã€‚ ä¾‹å¦‚ä½ æƒ³è¦å±€åŸŸç½‘ä¸­çš„å…¶å®ƒè®¾å¤‡è®¿é—®ä½ æœ¬åœ°çš„æœåŠ¡ï¼Œå¯ä»¥åœ¨å¯åŠ¨ DevServer æ—¶å¸¦ä¸Š <code>--host 0.0.0.0</code>ã€‚ host çš„é»˜è®¤å€¼æ˜¯ <code>127.0.0.1</code> å³åªæœ‰æœ¬åœ°å¯ä»¥è®¿é—® DevServer çš„ HTTP æœåŠ¡ã€‚</p> <h4 id="port"><a href="#port" class="header-anchor">#</a> port</h4> <p>é…ç½® DevServer æœåŠ¡ç›‘å¬çš„ç«¯å£ï¼Œé»˜è®¤ä½¿ç”¨ 8080 ç«¯å£ã€‚</p> <h3 id="å¤šç§é…ç½®ç±»å‹"><a href="#å¤šç§é…ç½®ç±»å‹" class="header-anchor">#</a> å¤šç§é…ç½®ç±»å‹</h3> <p>é™¤äº†é€šè¿‡å¯¼å‡ºä¸€ä¸ª Object æ¥æè¿° Webpack æ‰€éœ€çš„é…ç½®å¤–ï¼Œè¿˜æœ‰å…¶å®ƒæ›´çµæ´»çš„æ–¹å¼ï¼Œä»¥ç®€åŒ–ä¸åŒåœºæ™¯çš„é…ç½®ã€‚</p> <h4 id="å¯¼å‡ºä¸€ä¸ª-function"><a href="#å¯¼å‡ºä¸€ä¸ª-function" class="header-anchor">#</a> å¯¼å‡ºä¸€ä¸ª Function</h4> <p>åœ¨å¤§å¤šæ•°æ—¶å€™éœ€è¦ä»åŒä¸€ä»½æºä»£ç ä¸­æ„å»ºå‡ºå¤šä»½ä»£ç ï¼Œä¾‹å¦‚ä¸€ä»½ç”¨äºå¼€å‘æ—¶ï¼Œä¸€ä»½ç”¨äºå‘å¸ƒåˆ°çº¿ä¸Šã€‚</p> <p>å¦‚æœé‡‡ç”¨å¯¼å‡ºä¸€ä¸ª Object æ¥æè¿° Webpack æ‰€éœ€çš„é…ç½®çš„æ–¹æ³•ï¼Œéœ€è¦å†™ä¸¤ä¸ªæ–‡ä»¶ã€‚ ä¸€ä¸ªç”¨äºå¼€å‘ç¯å¢ƒï¼Œä¸€ä¸ªç”¨äºçº¿ä¸Šç¯å¢ƒã€‚å†åœ¨å¯åŠ¨æ—¶é€šè¿‡ webpack --config webpack.config.js æŒ‡å®šä½¿ç”¨å“ªä¸ªé…ç½®æ–‡ä»¶ã€‚</p> <p>é‡‡ç”¨å¯¼å‡ºä¸€ä¸ª Function çš„æ–¹å¼ï¼Œèƒ½é€šè¿‡ JavaScript çµæ´»çš„æ§åˆ¶é…ç½®ï¼Œåšåˆ°åªç”¨å†™ä¸€ä¸ªé…ç½®æ–‡ä»¶å°±èƒ½å®Œæˆä»¥ä¸Šè¦æ±‚ã€‚</p> <p>å¯¼å‡ºä¸€ä¸ª Function çš„ä½¿ç”¨æ–¹å¼å¦‚ä¸‹ï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> UglifyJsPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webpack/lib/optimize/UglifyJsPlugin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">env <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> argv</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> plugins <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> isProduction <span class="token operator">=</span> env<span class="token punctuation">[</span><span class="token string">'production'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

  <span class="token comment">// åœ¨ç”Ÿæˆç¯å¢ƒæ‰å‹ç¼©</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>isProduction<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    plugins<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>
      <span class="token comment">// å‹ç¼©è¾“å‡ºçš„ JS ä»£ç </span>
      <span class="token keyword">new</span> <span class="token class-name">UglifyJsPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">plugins</span><span class="token operator">:</span> plugins<span class="token punctuation">,</span>
    <span class="token comment">// åœ¨ç”Ÿæˆç¯å¢ƒä¸è¾“å‡º Source Map</span>
    <span class="token literal-property property">devtool</span><span class="token operator">:</span> isProduction <span class="token operator">?</span> <span class="token keyword">undefined</span> <span class="token operator">:</span> <span class="token string">'source-map'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>åœ¨è¿è¡Œ Webpack æ—¶ï¼Œä¼šç»™è¿™ä¸ªå‡½æ•°ä¼ å…¥2ä¸ªå‚æ•°ï¼Œåˆ†åˆ«æ˜¯ï¼š</p> <ol><li>envï¼šå½“å‰è¿è¡Œæ—¶çš„ Webpack ä¸“å±ç¯å¢ƒå˜é‡ï¼Œenv æ˜¯ä¸€ä¸ª Objectã€‚è¯»å–æ—¶ç›´æ¥è®¿é—® Object çš„å±æ€§ï¼Œè®¾ç½®å®ƒéœ€è¦åœ¨å¯åŠ¨ Webpack æ—¶å¸¦ä¸Šå‚æ•°ã€‚ä¾‹å¦‚å¯åŠ¨å‘½ä»¤æ˜¯ webpack --env.production --env.bao=fooæ—¶ï¼Œåˆ™ env çš„å€¼æ˜¯ {&quot;production&quot;:&quot;true&quot;,&quot;bao&quot;:&quot;foo&quot;}ã€‚</li> <li>argvï¼šä»£è¡¨åœ¨å¯åŠ¨ Webpack æ—¶æ‰€æœ‰é€šè¿‡å‘½ä»¤è¡Œä¼ å…¥çš„å‚æ•°ï¼Œä¾‹å¦‚ --configã€--envã€--devtoolï¼Œå¯ä»¥é€šè¿‡ webpack -h åˆ—å‡ºæ‰€æœ‰ Webpack æ”¯æŒçš„å‘½ä»¤è¡Œå‚æ•°ã€‚</li></ol> <p>å°±ä»¥ä¸Šé…ç½®æ–‡ä»¶è€Œè¨€ï¼Œåœ¨å¼€å‘æ—¶æ‰§è¡Œå‘½ä»¤ webpack æ„å»ºå‡ºæ–¹ä¾¿è°ƒè¯•çš„ä»£ç ï¼Œåœ¨éœ€è¦æ„å»ºå‡ºå‘å¸ƒåˆ°çº¿ä¸Šçš„ä»£ç æ—¶æ‰§è¡Œ webpack --env.production æ„å»ºå‡ºå‹ç¼©çš„ä»£ç ã€‚</p> <h4 id="å¯¼å‡ºä¸€ä¸ªè¿”å›-promise-çš„å‡½æ•°"><a href="#å¯¼å‡ºä¸€ä¸ªè¿”å›-promise-çš„å‡½æ•°" class="header-anchor">#</a> å¯¼å‡ºä¸€ä¸ªè¿”å› Promise çš„å‡½æ•°</h4> <p>åœ¨æœ‰äº›æƒ…å†µä¸‹ä½ ä¸èƒ½ä»¥åŒæ­¥çš„æ–¹å¼è¿”å›ä¸€ä¸ªæè¿°é…ç½®çš„ Objectï¼ŒWebpack è¿˜æ”¯æŒå¯¼å‡ºä¸€ä¸ªè¿”å› Promise çš„å‡½æ•°ï¼Œä½¿ç”¨å¦‚ä¸‹ï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code>module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">env <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> argv</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token comment">// ...</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">5000</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="å®æˆ˜"><a href="#å®æˆ˜" class="header-anchor">#</a> å®æˆ˜</h2> <h3 id="ä½¿ç”¨-es6-è¯­è¨€"><a href="#ä½¿ç”¨-es6-è¯­è¨€" class="header-anchor">#</a> ä½¿ç”¨ ES6 è¯­è¨€</h3> <p>é€šå¸¸æˆ‘ä»¬éœ€è¦æŠŠé‡‡ç”¨ ES6 ç¼–å†™çš„ä»£ç è½¬æ¢æˆç›®å‰å·²ç»æ”¯æŒè‰¯å¥½çš„ ES5 ä»£ç ï¼Œè¿™åŒ…å«2ä»¶äº‹ï¼š</p> <ol><li>æŠŠæ–°çš„ ES6 è¯­æ³•ç”¨ ES5 å®ç°ï¼Œä¾‹å¦‚ ES6 çš„ class è¯­æ³•ç”¨ ES5 çš„ prototype å®ç°ã€‚</li> <li>ç»™æ–°çš„ API æ³¨å…¥ polyfill ï¼Œä¾‹å¦‚é¡¹ç›®ä½¿ç”¨ fetch API æ—¶ï¼Œåªæœ‰æ³¨å…¥å¯¹åº”çš„ polyfill åï¼Œæ‰èƒ½åœ¨ä½ç‰ˆæœ¬æµè§ˆå™¨ä¸­æ­£å¸¸è¿è¡Œã€‚</li></ol> <h4 id="babel"><a href="#babel" class="header-anchor">#</a> Babel</h4> <p>Babel æ˜¯ä¸€ä¸ª JavaScript ç¼–è¯‘å™¨ï¼Œèƒ½å°† ES6 ä»£ç è½¬ä¸º ES5 ä»£ç ï¼Œbabelç›¸å…³çš„æŠ€æœ¯ç”Ÿæ€ï¼š</p> <ul><li>babel-loader: è´Ÿè´£ es6 è¯­æ³•è½¬åŒ–</li> <li>babel-preset-env: åŒ…å« es6ã€7 ç­‰ç‰ˆæœ¬çš„è¯­æ³•è½¬åŒ–è§„åˆ™</li> <li>babel-polyfill: es6 å†…ç½®æ–¹æ³•å’Œå‡½æ•°è½¬åŒ–å«ç‰‡</li> <li>babel-plugin-transform-runtime: é¿å… polyfill æ±¡æŸ“å…¨å±€å˜é‡</li></ul> <h4 id="å®‰è£…ä¸ä½¿ç”¨-2"><a href="#å®‰è£…ä¸ä½¿ç”¨-2" class="header-anchor">#</a> å®‰è£…ä¸ä½¿ç”¨</h4> <div class="language- extra-class"><pre class="language-text"><code>å®‰è£…loaderï¼š
npm install babel-loader@8.0.0-beta.0 @babel/core @babel/preset-env webpack
æˆ–è€…
npm install babel-loader babel-core babel-preset-env webpack
</code></pre></div><p>åœ¨ webpack é…ç½®å¯¹è±¡ä¸­ï¼Œéœ€è¦æ·»åŠ  babel-loader åˆ° module çš„è§„åˆ™åˆ—è¡¨ä¸­</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token literal-property property">module</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token comment">// æ­£åˆ™åŒ¹é….jsç»“å°¾çš„æ–‡ä»¶</span>
      <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.js$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
      <span class="token comment">// æ’é™¤ä¸éœ€è¦è½¬æ¢çš„jsæ–‡ä»¶</span>
      <span class="token literal-property property">exclude</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">(node_modules|bower_components)</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
      <span class="token comment">// </span>
      <span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token string">&quot;babel-loader&quot;</span> <span class="token comment">// è½¬åŒ–éœ€è¦çš„loader</span>
            <span class="token comment">// optionsé€‰é¡¹é…ç½®åœ¨: .babelrc</span>
            <span class="token comment">// options: {</span>
            <span class="token comment">//   ...</span>
            <span class="token comment">// }</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><p>åŒæ—¶åœ¨æ ¹ç›®å½•å¢åŠ ä¸€ä¸ª<code>.babelrc</code>æ–‡ä»¶</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">{</span>
  <span class="token string-property property">&quot;presets&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">[</span>
      <span class="token string">&quot;env&quot;</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        <span class="token string-property property">&quot;targets&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token string-property property">&quot;browsers&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;last 2 versions&quot;</span><span class="token punctuation">]</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="babelæ’ä»¶"><a href="#babelæ’ä»¶" class="header-anchor">#</a> babelæ’ä»¶</h4> <p>ç”±äºbabelé»˜è®¤åªè½¬æ¢æ–°çš„JavaScriptè¯­æ³•ï¼Œä½†å¯¹äºä¸€äº›æ–°çš„APIæ˜¯ä¸è¿›è¡Œè½¬åŒ–çš„ï¼ˆæ¯”å¦‚å†…å»ºçš„Promiseã€WeakMapï¼Œé™æ€æ–¹æ³•å¦‚Array.fromæˆ–è€…Object.assignï¼‰ï¼Œé‚£ä¹ˆä¸ºäº†èƒ½å¤Ÿè½¬åŒ–è¿™äº›ä¸œè¥¿ï¼Œæˆ‘ä»¬å°±éœ€è¦ä½¿ç”¨babelçš„æ’ä»¶</p> <p><strong><code>babel-polyfill</code></strong></p> <p><strong>ç‰¹ç‚¹</strong></p> <ol><li>ä¼šå°†éœ€è¦è½¬åŒ–çš„APIè¿›è¡Œç›´æ¥è½¬åŒ–ï¼Œè¿™å°±å¯¼è‡´ç”¨åˆ°è¿™äº›APIçš„åœ°æ–¹ä¼šå­˜åœ¨å¤§é‡çš„é‡å¤ä»£ç </li> <li>æ˜¯ç›´æ¥åœ¨å…¨å±€ä½œç”¨åŸŸé‡Œè¿›è¡Œå«ç‰‡ï¼Œæ‰€ä»¥ä¼šæ±¡æŸ“å…¨å±€ä½œç”¨åŸŸ</li> <li>æ˜¯ä¸ºå¼€å‘åº”ç”¨å‡†å¤‡çš„</li></ol> <div class="language- extra-class"><pre class="language-text"><code>å®‰è£…ï¼š
npm install babel-polyfill -save

ä½¿ç”¨ï¼š
ç›´æ¥åœ¨main.jsé¡¶éƒ¨ä½¿ç”¨: import &quot;@babel/polyfill&quot;
</code></pre></div><p><strong><code>babel-runtime-transform</code></strong></p> <p><strong>ç‰¹ç‚¹</strong></p> <ol><li>éœ€è¦ç”¨åˆ°çš„å«ç‰‡ï¼Œä¼šä½¿ç”¨å¼•ç”¨çš„æ–¹å¼å¼•å…¥ï¼Œè€Œä¸æ˜¯ç›´æ¥æ›¿æ¢ï¼Œé¿å…äº†å«ç‰‡ä»£ç çš„é‡å¤</li> <li>ç”±äºä½¿ç”¨å¼•ç”¨çš„æ–¹å¼å¼•å…¥ï¼Œæ‰€ä»¥ä¸ä¼šç›´æ¥æ±¡æŸ“å…¨å±€ä½œç”¨åŸŸã€‚</li> <li><code>babel-plugin-transform-runtime</code>ä¸èƒ½å•ç‹¬ä½œç”¨ï¼Œå› ä¸ºæœ‰ä¸€äº›é™æ€æ–¹æ³•ï¼Œå¦‚<code>&quot;foobar&quot;.includes(&quot;foo&quot;)</code>ä»ç„¶éœ€è¦å¼•å…¥<code>babel-polyfill</code>æ‰èƒ½ä½¿ç”¨</li> <li>æ˜¯ä¸ºå¼€å‘æ¡†æ¶å‡†å¤‡çš„</li></ol> <div class="language- extra-class"><pre class="language-text"><code>å®‰è£…ï¼š
npm install babel-plugin-transform-runtime -save-dev
npm install babel-runtime -save

ä½¿ç”¨ï¼š
åœ¨.babelrcæ–‡ä»¶çš„pluginsä¸­æ·»åŠ ï¼š
&quot;plugins&quot;: [&quot;transform-runtime&quot;]
</code></pre></div><h3 id="ä¸ºå•é¡µåº”ç”¨ç”Ÿæˆ-html"><a href="#ä¸ºå•é¡µåº”ç”¨ç”Ÿæˆ-html" class="header-anchor">#</a> ä¸ºå•é¡µåº”ç”¨ç”Ÿæˆ HTML</h3> <p>åœ¨å®é™…é¡¹ç›®ä¸­ï¼Œä¸€ä¸ªé¡µé¢å¸¸å¸¸æœ‰å¾ˆå¤šèµ„æºè¦åŠ è½½ã€‚æ¥ä¸‹æ¥ä¸¾ä¸€ä¸ªå®æˆ˜ä¸­çš„ä¾‹å­ï¼Œè¦æ±‚å¦‚ä¸‹ï¼š</p> <ol><li>é¡¹ç›®é‡‡ç”¨ ES6 è¯­è¨€åŠ  React æ¡†æ¶ã€‚</li> <li>ç»™é¡µé¢åŠ å…¥ Google Analyticsï¼Œè¿™éƒ¨åˆ†ä»£ç éœ€è¦å†…åµŒè¿› HEAD æ ‡ç­¾é‡Œå»ã€‚</li> <li>ç»™é¡µé¢åŠ å…¥ Disqus ç”¨æˆ·è¯„è®ºï¼Œè¿™éƒ¨åˆ†ä»£ç éœ€è¦å¼‚æ­¥åŠ è½½ä»¥æå‡é¦–å±åŠ è½½é€Ÿåº¦ã€‚</li> <li>å‹ç¼©å’Œåˆ†ç¦» JavaScript å’Œ CSS ä»£ç ï¼Œæå‡åŠ è½½é€Ÿåº¦ã€‚</li></ol> <p>æ¨èä¸€ä¸ªç”¨äºæ–¹ä¾¿çš„è§£å†³ä»¥ä¸Šé—®é¢˜çš„ Webpack æ’ä»¶ web-webpack-pluginï¼Œé¦–å…ˆï¼Œä¿®æ”¹ Webpack é…ç½®ä¸ºå¦‚ä¸‹ï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> UglifyJsPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webpack/lib/optimize/UglifyJsPlugin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> ExtractTextPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'extract-text-webpack-plugin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> DefinePlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webpack/lib/DefinePlugin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> WebPlugin <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'web-webpack-plugin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">entry</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">app</span><span class="token operator">:</span> <span class="token string">'./main.js'</span><span class="token comment">// app çš„ JavaScript æ‰§è¡Œå…¥å£æ–‡ä»¶</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">output</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">'[name]_[chunkhash:8].js'</span><span class="token punctuation">,</span><span class="token comment">// ç»™è¾“å‡ºçš„æ–‡ä»¶åç§°åŠ ä¸Š Hash å€¼</span>
    <span class="token literal-property property">path</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'./dist'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">module</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token operator">...</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token comment">// ä½¿ç”¨æœ¬æ–‡çš„ä¸»è§’ WebPluginï¼Œä¸€ä¸ª WebPlugin å¯¹åº”ä¸€ä¸ª HTML æ–‡ä»¶</span>
    <span class="token keyword">new</span> <span class="token class-name">WebPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">template</span><span class="token operator">:</span> <span class="token string">'./template.html'</span><span class="token punctuation">,</span> <span class="token comment">// HTML æ¨¡ç‰ˆæ–‡ä»¶æ‰€åœ¨çš„æ–‡ä»¶è·¯å¾„</span>
      <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">'index.html'</span> <span class="token comment">// è¾“å‡ºçš„ HTML çš„æ–‡ä»¶åç§°</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token keyword">new</span> <span class="token class-name">DefinePlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token comment">// å®šä¹‰ NODE_ENV ç¯å¢ƒå˜é‡ä¸º productionï¼Œä»¥å»é™¤æºç ä¸­åªæœ‰å¼€å‘æ—¶æ‰éœ€è¦çš„éƒ¨åˆ†</span>
      <span class="token string-property property">'process.env'</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token constant">NODE_ENV</span><span class="token operator">:</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token string">'production'</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token comment">// å‹ç¼©è¾“å‡ºçš„ JavaScript ä»£ç </span>
    <span class="token keyword">new</span> <span class="token class-name">UglifyJsPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token comment">// æœ€ç´§å‡‘çš„è¾“å‡º</span>
      <span class="token literal-property property">beautify</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
      <span class="token comment">// åˆ é™¤æ‰€æœ‰çš„æ³¨é‡Š</span>
      <span class="token literal-property property">comments</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
      <span class="token literal-property property">compress</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token comment">// åœ¨UglifyJsåˆ é™¤æ²¡æœ‰ç”¨åˆ°çš„ä»£ç æ—¶ä¸è¾“å‡ºè­¦å‘Š</span>
        <span class="token literal-property property">warnings</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
        <span class="token comment">// åˆ é™¤æ‰€æœ‰çš„ `console` è¯­å¥ï¼Œå¯ä»¥å…¼å®¹ieæµè§ˆå™¨</span>
        <span class="token literal-property property">drop_console</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token comment">// å†…åµŒå®šä¹‰äº†ä½†æ˜¯åªç”¨åˆ°ä¸€æ¬¡çš„å˜é‡</span>
        <span class="token literal-property property">collapse_vars</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token comment">// æå–å‡ºå‡ºç°å¤šæ¬¡ä½†æ˜¯æ²¡æœ‰å®šä¹‰æˆå˜é‡å»å¼•ç”¨çš„é™æ€å€¼</span>
        <span class="token literal-property property">reduce_vars</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token operator">...</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>å¯ä»¥çœ‹åˆ°WebPluginæŒ‡å®šäº†ä¸€ä¸ªtemplateæ–‡ä»¶ï¼Œä¸ºHTML æ¨¡ç‰ˆæ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>UTF-8<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token comment">&lt;!--æ³¨å…¥ Chunk app ä¸­çš„ CSS--&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>stylesheet<span class="token punctuation">&quot;</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>app?_inline<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token comment">&lt;!--æ³¨å…¥ google_analytics ä¸­çš„ JS ä»£ç --&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>./google_analytics.js?_inline<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
  <span class="token comment">&lt;!--å¼‚æ­¥åŠ è½½ Disqus è¯„è®º--&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>https://dive-into-webpack.disqus.com/embed.js<span class="token punctuation">&quot;</span></span> <span class="token attr-name">async</span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>app<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token comment">&lt;!--å¯¼å…¥ Chunk app ä¸­çš„ JS--&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>app<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
  <span class="token comment">&lt;!--Disqus è¯„è®ºå®¹å™¨--&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>disqus_thread<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>è¯¥æ–‡ä»¶æè¿°äº†å“ªäº›èµ„æºéœ€è¦è¢«ä»¥ä½•ç§æ–¹å¼åŠ å…¥åˆ°è¾“å‡ºçš„ HTML æ–‡ä»¶ä¸­ã€‚</p> <p>ä»¥ <code>&lt;link rel=&quot;stylesheet&quot; href=&quot;app?_inline&quot;&gt;</code>ä¸ºä¾‹ï¼ŒæŒ‰ç…§æ­£å¸¸å¼•å…¥ CSS æ–‡ä»¶ä¸€æ ·çš„è¯­æ³•æ¥å¼•å…¥ Webpack ç”Ÿäº§çš„ä»£ç ã€‚ <code>href</code> å±æ€§ä¸­çš„ <code>app?_inline</code> å¯ä»¥åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼Œå‰é¢çš„ <code>app</code> è¡¨ç¤º CSS ä»£ç æ¥è‡ªåå« <code>app</code> çš„ Chunk ä¸­ï¼Œåé¢çš„ <code>_inline</code> è¡¨ç¤ºè¿™äº›ä»£ç éœ€è¦è¢«å†…åµŒåˆ°è¿™ä¸ªæ ‡ç­¾æ‰€åœ¨çš„ä½ç½®ã€‚</p> <p>ä¹Ÿå°±æ˜¯è¯´èµ„æºé“¾æ¥ URL å­—ç¬¦ä¸²é‡Œé—®å·å‰é¢çš„éƒ¨åˆ†è¡¨ç¤ºèµ„æºå†…å®¹æ¥è‡ªå“ªé‡Œï¼Œåé¢çš„ querystring è¡¨ç¤ºè¿™äº›èµ„æºæ³¨å…¥çš„æ–¹å¼ã€‚</p> <p>é™¤äº† _inline è¡¨ç¤ºå†…åµŒå¤–ï¼Œè¿˜æ”¯æŒä»¥ä¸‹å±æ€§ï¼š</p> <ul><li>_dist åªæœ‰åœ¨ç”Ÿäº§ç¯å¢ƒä¸‹æ‰å¼•å…¥è¯¥èµ„æº</li> <li>_dev åªæœ‰åœ¨å¼€å‘ç¯å¢ƒä¸‹æ‰å¼•å…¥è¯¥èµ„æº</li> <li>_ie åªæœ‰IEæµè§ˆå™¨æ‰éœ€è¦å¼•å…¥çš„èµ„æºï¼Œé€šè¿‡<code>[if IE]&gt;resource&lt;![endif]</code>æ³¨é‡Šå®ç°
è¿™äº›å±æ€§ä¹‹é—´å¯ä»¥æ­é…ä½¿ç”¨ï¼Œäº’ä¸å†²çªã€‚ä¾‹å¦‚<code>app?_inline&amp;_dist</code>è¡¨ç¤ºåªåœ¨ç”Ÿäº§ç¯å¢ƒä¸‹æ‰å¼•å…¥è¯¥èµ„æºï¼Œå¹¶ä¸”éœ€è¦å†…åµŒåˆ° HTML é‡Œå»ã€‚</li></ul> <h3 id="ç®¡ç†å¤šä¸ªå•é¡µåº”ç”¨"><a href="#ç®¡ç†å¤šä¸ªå•é¡µåº”ç”¨" class="header-anchor">#</a> ç®¡ç†å¤šä¸ªå•é¡µåº”ç”¨</h3> <p>è™½ç„¶ä¸Šä¸€èŠ‚å·²ç»è§£å†³äº†è‡ªåŠ¨åŒ–ç”Ÿæˆ HTML çš„ç—›ç‚¹ï¼Œä½†æ˜¯æ‰‹åŠ¨å»ç®¡ç†å¤šä¸ªå•é¡µåº”ç”¨çš„ç”Ÿæˆä¹Ÿæ˜¯ä¸€ä»¶éº»çƒ¦çš„äº‹æƒ…ã€‚ æ¥ç»§ç»­æ”¹é€ ä¸Šä¸€èŠ‚çš„ä¾‹å­ï¼Œè¦æ±‚å¦‚ä¸‹ï¼š</p> <ul><li>é¡¹ç›®ç›®å‰å…±æœ‰2ä¸ªå•é¡µåº”ç”¨ç»„æˆï¼Œä¸€ä¸ªæ˜¯ä¸»é¡µ index.htmlï¼Œä¸€ä¸ªæ˜¯ç”¨æˆ·ç™»å…¥é¡µ login.htmlï¼›</li> <li>å¤šä¸ªå•é¡µåº”ç”¨ä¹‹é—´ä¼šæœ‰å…¬å…±çš„ä»£ç éƒ¨åˆ†ï¼Œéœ€è¦æŠŠè¿™äº›å…¬å…±çš„éƒ¨åˆ†æŠ½ç¦»å‡ºæ¥ï¼Œæ”¾åˆ°å•ç‹¬çš„æ–‡ä»¶ä¸­å»ä»¥é˜²æ­¢é‡å¤åŠ è½½ã€‚ä¾‹å¦‚å¤šä¸ªé¡µé¢éƒ½ä½¿ç”¨ä¸€å¥— CSS æ ·å¼ï¼Œéƒ½é‡‡ç”¨äº† React æ¡†æ¶ï¼Œè¿™äº›å…¬å…±çš„éƒ¨åˆ†éœ€è¦æŠ½ç¦»åˆ°å•ç‹¬çš„æ–‡ä»¶ä¸­ï¼›</li> <li>éšç€ä¸šåŠ¡çš„å‘å±•åé¢å¯èƒ½ä¼šä¸æ–­çš„åŠ å…¥æ–°çš„å•é¡µåº”ç”¨ï¼Œä½†æ˜¯æ¯æ¬¡æ–°åŠ å…¥å•é¡µåº”ç”¨ä¸èƒ½å»æ”¹åŠ¨æ„å»ºç›¸å…³çš„ä»£ç ã€‚</li></ul> <h4 id="è§£å†³æ–¹æ¡ˆ"><a href="#è§£å†³æ–¹æ¡ˆ" class="header-anchor">#</a> è§£å†³æ–¹æ¡ˆ</h4> <p>ä¸Šä¸€èŠ‚ä¸­çš„ <code>web-webpack-plugin</code> æ’ä»¶ä¹Ÿå†…ç½®äº†è§£å†³è¿™ä¸ªé—®é¢˜çš„æ–¹æ³•ï¼Œä¸Šä¸€èŠ‚ä¸­åªä½¿ç”¨äº†å®ƒçš„ <code>WebPlugin</code>ï¼Œ è¿™èŠ‚å°†ä½¿ç”¨å®ƒçš„ <code>AutoWebPlugin</code> æ¥è§£å†³ä»¥ä¸Šé—®é¢˜ï¼Œä½¿ç”¨æ–¹æ³•éå¸¸ç®€å•ï¼Œä¸‹é¢æ¥æ•™ä½ å…·ä½“å¦‚ä½•ä½¿ç”¨ã€‚</p> <p>é¡¹ç›®æºç ç›®å½•ç»“æ„å¦‚ä¸‹ï¼š</p> <div class="language- extra-class"><pre class="language-text"><code>â”œâ”€â”€ pages
â”‚   â”œâ”€â”€ index
â”‚   â”‚   â”œâ”€â”€ index.css // è¯¥é¡µé¢å•ç‹¬éœ€è¦çš„ CSS æ ·å¼
â”‚   â”‚   â””â”€â”€ index.js // è¯¥é¡µé¢çš„å…¥å£æ–‡ä»¶
â”‚   â””â”€â”€ login
â”‚       â”œâ”€â”€ index.css
â”‚       â””â”€â”€ index.js
â”œâ”€â”€ common.css // æ‰€æœ‰é¡µé¢éƒ½éœ€è¦çš„å…¬å…± CSS æ ·å¼
â”œâ”€â”€ google_analytics.js
â”œâ”€â”€ template.html
â””â”€â”€ webpack.config.js
</code></pre></div><p>ä»ç›®å½•ç»“æ„ä¸­å¯ä»¥çœ‹æˆå‡ºä¸‹å‡ ç‚¹è¦æ±‚ï¼š</p> <ul><li>æ‰€æœ‰å•é¡µåº”ç”¨çš„ä»£ç éƒ½éœ€è¦æ”¾åˆ°ä¸€ä¸ªç›®å½•ä¸‹ï¼Œä¾‹å¦‚éƒ½æ”¾åœ¨ pages ç›®å½•ä¸‹ï¼›</li> <li>ä¸€ä¸ªå•é¡µåº”ç”¨ä¸€ä¸ªå•ç‹¬çš„æ–‡ä»¶å¤¹ï¼Œä¾‹å¦‚æœ€åç”Ÿæˆçš„ index.html ç›¸å…³çš„ä»£ç éƒ½åœ¨ index ç›®å½•ä¸‹ï¼Œlogin.html åŒç†ï¼›</li> <li>æ¯ä¸ªå•é¡µåº”ç”¨çš„ç›®å½•ä¸‹éƒ½æœ‰ä¸€ä¸ª index.js æ–‡ä»¶ä½œä¸ºå…¥å£æ‰§è¡Œæ–‡ä»¶ã€‚</li></ul> <blockquote><p>è™½ç„¶ AutoWebPlugin å¼ºåˆ¶æ€§çš„è§„å®šäº†é¡¹ç›®éƒ¨åˆ†çš„ç›®å½•ç»“æ„ï¼Œä½†ä»å®æˆ˜ç»éªŒæ¥çœ‹è¿™æ˜¯ä¸€ç§ä¼˜é›…çš„ç›®å½•è§„èŒƒï¼Œåˆç†çš„æ‹†åˆ†äº†ä»£ç ï¼Œåˆèƒ½è®©æ–°äººå¿«é€Ÿçš„çœ‹æ‡‚é¡¹ç›®ç»“æ„ï¼Œä¹Ÿæ–¹ä¾¿æ—¥åçš„ç»´æŠ¤ã€‚</p></blockquote> <p>Webpack é…ç½®æ–‡ä»¶ä¿®æ”¹å¦‚ä¸‹ï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> AutoWebPlugin <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'web-webpack-plugin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// ä½¿ç”¨æœ¬æ–‡çš„ä¸»è§’ AutoWebPluginï¼Œè‡ªåŠ¨å¯»æ‰¾ pages ç›®å½•ä¸‹çš„æ‰€æœ‰ç›®å½•ï¼ŒæŠŠæ¯ä¸€ä¸ªç›®å½•çœ‹æˆä¸€ä¸ªå•é¡µåº”ç”¨</span>
<span class="token keyword">const</span> autoWebPlugin <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AutoWebPlugin</span><span class="token punctuation">(</span><span class="token string">'pages'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">template</span><span class="token operator">:</span> <span class="token string">'./template.html'</span><span class="token punctuation">,</span> <span class="token comment">// HTML æ¨¡ç‰ˆæ–‡ä»¶æ‰€åœ¨çš„æ–‡ä»¶è·¯å¾„</span>
  <span class="token literal-property property">postEntrys</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'./common.css'</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token comment">// æ‰€æœ‰é¡µé¢éƒ½ä¾èµ–è¿™ä»½é€šç”¨çš„ CSS æ ·å¼æ–‡ä»¶</span>
  <span class="token comment">// æå–å‡ºæ‰€æœ‰é¡µé¢å…¬å…±çš„ä»£ç </span>
  <span class="token literal-property property">commonsChunk</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'common'</span><span class="token punctuation">,</span><span class="token comment">// æå–å‡ºå…¬å…±ä»£ç  Chunk çš„åç§°</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// AutoWebPlugin ä¼šä¸ºå¯»æ‰¾åˆ°çš„æ‰€æœ‰å•é¡µåº”ç”¨ï¼Œç”Ÿæˆå¯¹åº”çš„å…¥å£é…ç½®ï¼Œ</span>
  <span class="token comment">// autoWebPlugin.entry æ–¹æ³•å¯ä»¥è·å–åˆ°æ‰€æœ‰ç”± autoWebPlugin ç”Ÿæˆçš„å…¥å£é…ç½®</span>
  <span class="token literal-property property">entry</span><span class="token operator">:</span> autoWebPlugin<span class="token punctuation">.</span><span class="token function">entry</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token comment">// è¿™é‡Œå¯ä»¥åŠ å…¥ä½ é¢å¤–éœ€è¦çš„ Chunk å…¥å£</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    autoWebPlugin<span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p><code>AutoWebPlugin</code> ä¼šæ‰¾å‡º <code>pages</code> ç›®å½•ä¸‹çš„2ä¸ªæ–‡ä»¶å¤¹ <code>index</code> å’Œ <code>login</code>ï¼ŒæŠŠè¿™ä¸¤ä¸ªæ–‡ä»¶å¤¹çœ‹æˆä¸¤ä¸ªå•é¡µåº”ç”¨ã€‚ å¹¶ä¸”åˆ†åˆ«ä¸ºæ¯ä¸ªå•é¡µåº”ç”¨ç”Ÿæˆä¸€ä¸ª <code>Chunk</code> é…ç½®å’Œ <code>WebPlugin</code> é…ç½®ã€‚ æ¯ä¸ªå•é¡µåº”ç”¨çš„ <code>Chunk</code> åç§°å°±ç­‰äºæ–‡ä»¶å¤¹çš„åç§°ï¼Œä¹Ÿå°±æ˜¯è¯´ <code>autoWebPlugin.entry()</code> æ–¹æ³•è¿”å›çš„å†…å®¹å…¶å®æ˜¯ï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">{</span>
  <span class="token string-property property">&quot;index&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">&quot;./pages/index/index.js&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;./common.css&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token string-property property">&quot;login&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">&quot;./pages/login/index.js&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;./common.css&quot;</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="ä¼˜åŒ–"><a href="#ä¼˜åŒ–" class="header-anchor">#</a> ä¼˜åŒ–</h2> <h3 id="åŒºåˆ†ç¯å¢ƒ"><a href="#åŒºåˆ†ç¯å¢ƒ" class="header-anchor">#</a> åŒºåˆ†ç¯å¢ƒ</h3> <h4 id="ä¸ºä»€ä¹ˆéœ€è¦åŒºåˆ†ç¯å¢ƒ"><a href="#ä¸ºä»€ä¹ˆéœ€è¦åŒºåˆ†ç¯å¢ƒ" class="header-anchor">#</a> ä¸ºä»€ä¹ˆéœ€è¦åŒºåˆ†ç¯å¢ƒ</h4> <p>åœ¨å¼€å‘ç½‘é¡µçš„æ—¶å€™ï¼Œä¸€èˆ¬éƒ½ä¼šæœ‰å¤šå¥—è¿è¡Œç¯å¢ƒï¼Œä¾‹å¦‚ï¼š</p> <ul><li>åœ¨å¼€å‘è¿‡ç¨‹ä¸­æ–¹ä¾¿å¼€å‘è°ƒè¯•çš„ç¯å¢ƒã€‚</li> <li>å‘å¸ƒåˆ°çº¿ä¸Šç»™ç”¨æˆ·ä½¿ç”¨çš„è¿è¡Œç¯å¢ƒã€‚</li></ul> <h4 id="å¦‚ä½•åŒºåˆ†ç¯å¢ƒ"><a href="#å¦‚ä½•åŒºåˆ†ç¯å¢ƒ" class="header-anchor">#</a> å¦‚ä½•åŒºåˆ†ç¯å¢ƒ</h4> <p>å…·ä½“åŒºåˆ†æ–¹æ³•å¾ˆç®€å•ï¼Œåœ¨æºç ä¸­é€šè¿‡å¦‚ä¸‹æ–¹å¼ï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">if</span> <span class="token punctuation">(</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span> <span class="token operator">===</span> <span class="token string">'production'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'ä½ æ­£åœ¨çº¿ä¸Šç¯å¢ƒ'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'ä½ æ­£åœ¨ä½¿ç”¨å¼€å‘ç¯å¢ƒ'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>å…¶å¤§æ¦‚åŸç†æ˜¯å€ŸåŠ©äºç¯å¢ƒå˜é‡çš„å€¼å»åˆ¤æ–­æ‰§è¡Œå“ªä¸ªåˆ†æ”¯ã€‚</p> <p>å½“ä½ çš„ä»£ç ä¸­å‡ºç°äº†ä½¿ç”¨ <a href="https://nodejs.org/api/process.html" target="_blank" rel="noopener noreferrer">process<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> æ¨¡å—çš„è¯­å¥æ—¶ï¼ŒWebpack å°±è‡ªåŠ¨æ‰“åŒ…è¿› process æ¨¡å—çš„ä»£ç ä»¥æ”¯æŒé Node.js çš„è¿è¡Œç¯å¢ƒã€‚ å½“ä½ çš„ä»£ç ä¸­æ²¡æœ‰ä½¿ç”¨ process æ—¶å°±ä¸ä¼šæ‰“åŒ…è¿› process æ¨¡å—çš„ä»£ç ã€‚è¿™ä¸ªæ³¨å…¥çš„ process æ¨¡å—ä½œç”¨æ˜¯ä¸ºäº†æ¨¡æ‹Ÿ Node.js ä¸­çš„ processï¼Œä»¥æ”¯æŒä¸Šé¢ä½¿ç”¨çš„ <code>process.env.NODE_ENV === 'production'</code> è¯­å¥ã€‚</p> <p>åœ¨æ„å»ºçº¿ä¸Šç¯å¢ƒä»£ç æ—¶ï¼Œéœ€è¦ç»™å½“å‰è¿è¡Œç¯å¢ƒè®¾ç½®ç¯å¢ƒå˜é‡ <code>NODE_ENV = 'production'</code>ï¼ŒWebpack ç›¸å…³é…ç½®å¦‚ä¸‹ï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> DefinePlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webpack/lib/DefinePlugin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">DefinePlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token comment">// å®šä¹‰ NODE_ENV ç¯å¢ƒå˜é‡ä¸º production</span>
      <span class="token string-property property">'process.env'</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token constant">NODE_ENV</span><span class="token operator">:</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token string">'production'</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="æå–å…¬å…±ä»£ç "><a href="#æå–å…¬å…±ä»£ç " class="header-anchor">#</a> æå–å…¬å…±ä»£ç </h3> <h4 id="ä¸ºä»€ä¹ˆéœ€è¦æå–å…¬å…±ä»£ç "><a href="#ä¸ºä»€ä¹ˆéœ€è¦æå–å…¬å…±ä»£ç " class="header-anchor">#</a> ä¸ºä»€ä¹ˆéœ€è¦æå–å…¬å…±ä»£ç </h4> <p>å¤§å‹ç½‘ç«™é€šå¸¸ä¼šç”±å¤šä¸ªé¡µé¢ç»„æˆï¼Œæ¯ä¸ªé¡µé¢éƒ½æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„å•é¡µåº”ç”¨ã€‚ ä½†ç”±äºæ‰€æœ‰é¡µé¢éƒ½é‡‡ç”¨åŒæ ·çš„æŠ€æœ¯æ ˆï¼Œä»¥åŠä½¿ç”¨åŒä¸€å¥—æ ·å¼ä»£ç ï¼Œè¿™å¯¼è‡´è¿™äº›é¡µé¢ä¹‹é—´æœ‰å¾ˆå¤šç›¸åŒçš„ä»£ç ã€‚</p> <p>å¦‚æœæ¯ä¸ªé¡µé¢çš„ä»£ç éƒ½æŠŠè¿™äº›å…¬å…±çš„éƒ¨åˆ†åŒ…å«è¿›å»ï¼Œä¼šé€ æˆä»¥ä¸‹é—®é¢˜ï¼š</p> <ul><li>ç›¸åŒçš„èµ„æºè¢«é‡å¤çš„åŠ è½½ï¼Œæµªè´¹ç”¨æˆ·çš„æµé‡å’ŒæœåŠ¡å™¨çš„æˆæœ¬ï¼›</li> <li>æ¯ä¸ªé¡µé¢éœ€è¦åŠ è½½çš„èµ„æºå¤ªå¤§ï¼Œå¯¼è‡´ç½‘é¡µé¦–å±åŠ è½½ç¼“æ…¢ï¼Œå½±å“ç”¨æˆ·ä½“éªŒã€‚</li></ul> <p>å¦‚æœæŠŠå¤šä¸ªé¡µé¢å…¬å…±çš„ä»£ç æŠ½ç¦»æˆå•ç‹¬çš„æ–‡ä»¶ï¼Œå°±èƒ½ä¼˜åŒ–ä»¥ä¸Šé—®é¢˜ã€‚ åŸå› æ˜¯å‡å¦‚ç”¨æˆ·è®¿é—®äº†ç½‘ç«™çš„å…¶ä¸­ä¸€ä¸ªç½‘é¡µï¼Œé‚£ä¹ˆè®¿é—®è¿™ä¸ªç½‘ç«™ä¸‹çš„å…¶å®ƒç½‘é¡µçš„æ¦‚ç‡å°†éå¸¸å¤§ã€‚ åœ¨ç”¨æˆ·ç¬¬ä¸€æ¬¡è®¿é—®åï¼Œè¿™äº›é¡µé¢å…¬å…±ä»£ç çš„æ–‡ä»¶å·²ç»è¢«æµè§ˆå™¨ç¼“å­˜èµ·æ¥ï¼Œåœ¨ç”¨æˆ·åˆ‡æ¢åˆ°å…¶å®ƒé¡µé¢æ—¶ï¼Œå­˜æ”¾å…¬å…±ä»£ç çš„æ–‡ä»¶å°±ä¸ä¼šå†é‡æ–°åŠ è½½ï¼Œè€Œæ˜¯ç›´æ¥ä»ç¼“å­˜ä¸­è·å–ã€‚ è¿™æ ·åšåæœ‰å¦‚ä¸‹å¥½å¤„ï¼š</p> <ul><li>å‡å°‘ç½‘ç»œä¼ è¾“æµé‡ï¼Œé™ä½æœåŠ¡å™¨æˆæœ¬ï¼›</li> <li>è™½ç„¶ç”¨æˆ·ç¬¬ä¸€æ¬¡æ‰“å¼€ç½‘ç«™çš„é€Ÿåº¦å¾—ä¸åˆ°ä¼˜åŒ–ï¼Œä½†ä¹‹åè®¿é—®å…¶å®ƒé¡µé¢çš„é€Ÿåº¦å°†å¤§å¤§æå‡ã€‚</li></ul> <h4 id="å¦‚ä½•æå–å…¬å…±ä»£ç "><a href="#å¦‚ä½•æå–å…¬å…±ä»£ç " class="header-anchor">#</a> å¦‚ä½•æå–å…¬å…±ä»£ç </h4> <p>ä½ å·²ç»çŸ¥é“äº†æå–å…¬å…±ä»£ç ä¼šæœ‰ä»€ä¹ˆå¥½å¤„ï¼Œä½†æ˜¯åœ¨å®æˆ˜ä¸­å…·ä½“è¦æ€ä¹ˆåšï¼Œä»¥è¾¾åˆ°æ•ˆæœæœ€ä¼˜å‘¢ï¼Ÿ é€šå¸¸ä½ å¯ä»¥é‡‡ç”¨ä»¥ä¸‹åŸåˆ™å»ä¸ºä½ çš„ç½‘ç«™æå–å…¬å…±ä»£ç ï¼š</p> <ul><li>æ ¹æ®ä½ ç½‘ç«™æ‰€ä½¿ç”¨çš„æŠ€æœ¯æ ˆï¼Œæ‰¾å‡ºç½‘ç«™æ‰€æœ‰é¡µé¢éƒ½éœ€è¦ç”¨åˆ°çš„åŸºç¡€åº“ï¼Œä»¥é‡‡ç”¨ React æŠ€æœ¯æ ˆçš„ç½‘ç«™ä¸ºä¾‹ï¼Œæ‰€æœ‰é¡µé¢éƒ½ä¼šä¾èµ– reactã€react-dom ç­‰åº“ï¼ŒæŠŠå®ƒä»¬æå–åˆ°ä¸€ä¸ªå•ç‹¬çš„æ–‡ä»¶ã€‚ ä¸€èˆ¬æŠŠè¿™ä¸ªæ–‡ä»¶å«åš base.jsï¼Œå› ä¸ºå®ƒåŒ…å«æ‰€æœ‰ç½‘é¡µçš„åŸºç¡€è¿è¡Œç¯å¢ƒï¼›</li> <li>åœ¨å‰”é™¤äº†å„ä¸ªé¡µé¢ä¸­è¢« base.js åŒ…å«çš„éƒ¨åˆ†ä»£ç å¤–ï¼Œå†æ‰¾å‡ºæ‰€æœ‰é¡µé¢éƒ½ä¾èµ–çš„å…¬å…±éƒ¨åˆ†çš„ä»£ç æå–å‡ºæ¥æ”¾åˆ° common.js ä¸­å»ã€‚</li> <li>å†ä¸ºæ¯ä¸ªç½‘é¡µéƒ½ç”Ÿæˆä¸€ä¸ªå•ç‹¬çš„æ–‡ä»¶ï¼Œè¿™ä¸ªæ–‡ä»¶ä¸­ä¸å†åŒ…å« base.js å’Œ common.js ä¸­åŒ…å«çš„éƒ¨åˆ†ï¼Œè€ŒåªåŒ…å«å„ä¸ªé¡µé¢å•ç‹¬éœ€è¦çš„éƒ¨åˆ†ä»£ç ã€‚</li></ul> <p>Webpack å†…ç½®äº†ä¸“é—¨ç”¨äºæå–å¤šä¸ª Chunk ä¸­å…¬å…±éƒ¨åˆ†çš„æ’ä»¶ CommonsChunkPluginï¼ŒCommonsChunkPlugin å¤§è‡´ä½¿ç”¨æ–¹æ³•å¦‚ä¸‹ï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> UglifyJsPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webpack/lib/optimize/UglifyJsPlugin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> ExtractTextPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'extract-text-webpack-plugin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> DefinePlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webpack/lib/DefinePlugin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> CommonsChunkPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webpack/lib/optimize/CommonsChunkPlugin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span>AutoWebPlugin<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'web-webpack-plugin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// AutoWebPluginè‡ªåŠ¨å¯»æ‰¾ pages ç›®å½•ä¸‹çš„æ‰€æœ‰ç›®å½•ï¼ŒæŠŠæ¯ä¸€ä¸ªç›®å½•çœ‹æˆä¸€ä¸ªå•é¡µåº”ç”¨</span>
<span class="token keyword">const</span> autoWebPlugin <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AutoWebPlugin</span><span class="token punctuation">(</span><span class="token string">'pages'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">template</span><span class="token operator">:</span> <span class="token string">'./template.html'</span><span class="token punctuation">,</span> <span class="token comment">// HTML æ¨¡ç‰ˆæ–‡ä»¶æ‰€åœ¨çš„æ–‡ä»¶è·¯å¾„</span>
  <span class="token comment">// æå–å‡ºæ‰€æœ‰é¡µé¢å…¬å…±çš„ä»£ç </span>
  <span class="token literal-property property">commonsChunk</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'common'</span><span class="token punctuation">,</span><span class="token comment">// æå–å‡ºå…¬å…±ä»£ç  Chunk çš„åç§°</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// AutoWebPlugin ä¼šæ‰¾ä¸ºå¯»æ‰¾åˆ°çš„æ‰€æœ‰å•é¡µåº”ç”¨ï¼Œç”Ÿæˆå¯¹åº”çš„å…¥å£é…ç½®ï¼Œ</span>
  <span class="token comment">// autoWebPlugin.entry æ–¹æ³•å¯ä»¥è·å–åˆ°ç”Ÿæˆå…¥å£é…ç½®</span>
  <span class="token literal-property property">entry</span><span class="token operator">:</span> autoWebPlugin<span class="token punctuation">.</span><span class="token function">entry</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token comment">// è¿™é‡Œå¯ä»¥åŠ å…¥ä½ é¢å¤–éœ€è¦çš„ Chunk å…¥å£</span>
    <span class="token literal-property property">base</span><span class="token operator">:</span> <span class="token string">'./base.js'</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token literal-property property">output</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">'[name]_[chunkhash:8].js'</span><span class="token punctuation">,</span><span class="token comment">// ç»™è¾“å‡ºçš„æ–‡ä»¶åç§°åŠ ä¸Š hash å€¼</span>
    <span class="token literal-property property">path</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'./dist'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">module</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token operator">...</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    autoWebPlugin<span class="token punctuation">,</span>
    <span class="token comment">// ä¸ºäº†ä» common ä¸­æå–å‡º base ä¹ŸåŒ…å«çš„éƒ¨åˆ†</span>
    <span class="token keyword">new</span> <span class="token class-name">CommonsChunkPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token comment">// ä» common å’Œ base ä¸¤ä¸ªç°æˆçš„ Chunk ä¸­æå–å…¬å…±çš„éƒ¨åˆ†</span>
      <span class="token literal-property property">chunks</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'common'</span><span class="token punctuation">,</span> <span class="token string">'base'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token comment">// æŠŠå…¬å…±çš„éƒ¨åˆ†æ”¾åˆ° base ä¸­</span>
      <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'base'</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token operator">...</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="åˆ†å‰²ä»£ç æŒ‰éœ€åŠ è½½"><a href="#åˆ†å‰²ä»£ç æŒ‰éœ€åŠ è½½" class="header-anchor">#</a> åˆ†å‰²ä»£ç æŒ‰éœ€åŠ è½½</h3> <h4 id="ä¸ºä»€ä¹ˆéœ€è¦æŒ‰éœ€åŠ è½½"><a href="#ä¸ºä»€ä¹ˆéœ€è¦æŒ‰éœ€åŠ è½½" class="header-anchor">#</a> ä¸ºä»€ä¹ˆéœ€è¦æŒ‰éœ€åŠ è½½</h4> <p>éšç€äº’è”ç½‘çš„å‘å±•ï¼Œä¸€ä¸ªç½‘é¡µéœ€è¦æ‰¿è½½çš„åŠŸèƒ½è¶Šæ¥è¶Šå¤šã€‚ å¯¹äºé‡‡ç”¨å•é¡µåº”ç”¨ä½œä¸ºå‰ç«¯æ¶æ„çš„ç½‘ç«™æ¥è¯´ï¼Œä¼šé¢ä¸´ç€ä¸€ä¸ªç½‘é¡µéœ€è¦åŠ è½½çš„ä»£ç é‡å¾ˆå¤§çš„é—®é¢˜ï¼Œå› ä¸ºè®¸å¤šåŠŸèƒ½éƒ½é›†ä¸­çš„åšåˆ°äº†ä¸€ä¸ª HTML é‡Œã€‚ è¿™ä¼šå¯¼è‡´ç½‘é¡µåŠ è½½ç¼“æ…¢ã€äº¤äº’å¡é¡¿ï¼Œç”¨æˆ·ä½“éªŒå°†éå¸¸ç³Ÿç³•ã€‚</p> <p>å¯¼è‡´è¿™ä¸ªé—®é¢˜çš„æ ¹æœ¬åŸå› åœ¨äºä¸€æ¬¡æ€§çš„åŠ è½½æ‰€æœ‰åŠŸèƒ½å¯¹åº”çš„ä»£ç ï¼Œä½†å…¶å®ç”¨æˆ·æ¯ä¸€é˜¶æ®µåªå¯èƒ½ä½¿ç”¨å…¶ä¸­ä¸€éƒ¨åˆ†åŠŸèƒ½ã€‚ æ‰€ä»¥è§£å†³ä»¥ä¸Šé—®é¢˜çš„æ–¹æ³•å°±æ˜¯ç”¨æˆ·å½“å‰éœ€è¦ç”¨ä»€ä¹ˆåŠŸèƒ½å°±åªåŠ è½½è¿™ä¸ªåŠŸèƒ½å¯¹åº”çš„ä»£ç ï¼Œä¹Ÿå°±æ˜¯æ‰€è°“çš„æŒ‰éœ€åŠ è½½ã€‚</p> <h4 id="å¦‚ä½•ä½¿ç”¨æŒ‰éœ€åŠ è½½"><a href="#å¦‚ä½•ä½¿ç”¨æŒ‰éœ€åŠ è½½" class="header-anchor">#</a> å¦‚ä½•ä½¿ç”¨æŒ‰éœ€åŠ è½½</h4> <p>åœ¨ç»™å•é¡µåº”ç”¨åšæŒ‰éœ€åŠ è½½ä¼˜åŒ–æ—¶ï¼Œä¸€èˆ¬é‡‡ç”¨ä»¥ä¸‹åŸåˆ™ï¼š</p> <ul><li>æŠŠæ•´ä¸ªç½‘ç«™åˆ’åˆ†æˆä¸€ä¸ªä¸ªå°åŠŸèƒ½ï¼Œå†æŒ‰ç…§æ¯ä¸ªåŠŸèƒ½çš„ç›¸å…³ç¨‹åº¦æŠŠå®ƒä»¬åˆ†æˆå‡ ç±»ã€‚</li> <li>æŠŠæ¯ä¸€ç±»åˆå¹¶ä¸ºä¸€ä¸ª Chunkï¼ŒæŒ‰éœ€åŠ è½½å¯¹åº”çš„ Chunkã€‚</li> <li>å¯¹äºç”¨æˆ·é¦–æ¬¡æ‰“å¼€ä½ çš„ç½‘ç«™æ—¶éœ€è¦çœ‹åˆ°çš„ç”»é¢æ‰€å¯¹åº”çš„åŠŸèƒ½ï¼Œä¸è¦å¯¹å®ƒä»¬åšæŒ‰éœ€åŠ è½½ï¼Œè€Œæ˜¯æ”¾åˆ°æ‰§è¡Œå…¥å£æ‰€åœ¨çš„ Chunk ä¸­ï¼Œä»¥é™ä½ç”¨æˆ·èƒ½æ„ŸçŸ¥çš„ç½‘é¡µåŠ è½½æ—¶é—´ã€‚</li> <li>å¯¹äºä¸ªåˆ«ä¾èµ–å¤§é‡ä»£ç çš„åŠŸèƒ½ç‚¹ï¼Œä¾‹å¦‚ä¾èµ– Chart.js å»ç”»å›¾è¡¨ã€ä¾èµ– flv.js å»æ’­æ”¾è§†é¢‘çš„åŠŸèƒ½ç‚¹ï¼Œå¯å†å¯¹å…¶è¿›è¡ŒæŒ‰éœ€åŠ è½½ã€‚</li></ul> <p>è¢«åˆ†å‰²å‡ºå»çš„ä»£ç çš„åŠ è½½éœ€è¦ä¸€å®šçš„æ—¶æœºå»è§¦å‘ï¼Œä¹Ÿå°±æ˜¯å½“ç”¨æˆ·æ“ä½œåˆ°äº†æˆ–è€…å³å°†æ“ä½œåˆ°å¯¹åº”çš„åŠŸèƒ½æ—¶å†å»åŠ è½½å¯¹åº”çš„ä»£ç ã€‚ è¢«åˆ†å‰²å‡ºå»çš„ä»£ç çš„åŠ è½½æ—¶æœºéœ€è¦å¼€å‘è€…è‡ªå·±å»æ ¹æ®ç½‘é¡µçš„éœ€æ±‚å»è¡¡é‡å’Œç¡®å®šã€‚</p> <p>ç”±äºè¢«åˆ†å‰²å‡ºå»è¿›è¡ŒæŒ‰éœ€åŠ è½½çš„ä»£ç åœ¨åŠ è½½çš„è¿‡ç¨‹ä¸­ä¹Ÿéœ€è¦è€—æ—¶ï¼Œä½ å¯ä»¥é¢„è¨€ç”¨æˆ·æ¥ä¸‹æ¥å¯èƒ½ä¼šè¿›è¡Œçš„æ“ä½œï¼Œå¹¶æå‰åŠ è½½å¥½å¯¹åº”çš„ä»£ç ï¼Œä»è€Œè®©ç”¨æˆ·æ„ŸçŸ¥ä¸åˆ°ç½‘ç»œåŠ è½½æ—¶é—´ã€‚</p> <h4 id="ç”¨-webpack-å®ç°æŒ‰éœ€åŠ è½½"><a href="#ç”¨-webpack-å®ç°æŒ‰éœ€åŠ è½½" class="header-anchor">#</a> ç”¨ Webpack å®ç°æŒ‰éœ€åŠ è½½</h4> <p>Webpack å†…ç½®äº†å¼ºå¤§çš„åˆ†å‰²ä»£ç çš„åŠŸèƒ½å»å®ç°æŒ‰éœ€åŠ è½½ï¼Œå®ç°èµ·æ¥éå¸¸ç®€å•ã€‚</p> <p>ä¸¾ä¸ªä¾‹å­ï¼Œç°åœ¨éœ€è¦åšè¿™æ ·ä¸€ä¸ªè¿›è¡Œäº†æŒ‰éœ€åŠ è½½ä¼˜åŒ–çš„ç½‘é¡µï¼š</p> <ul><li>ç½‘é¡µé¦–æ¬¡åŠ è½½æ—¶åªåŠ è½½ main.js æ–‡ä»¶ï¼Œç½‘é¡µä¼šå±•ç¤ºä¸€ä¸ªæŒ‰é’®ï¼Œmain.js æ–‡ä»¶ä¸­åªåŒ…å«ç›‘å¬æŒ‰é’®äº‹ä»¶å’ŒåŠ è½½æŒ‰éœ€åŠ è½½çš„ä»£ç ã€‚</li> <li>å½“æŒ‰é’®è¢«ç‚¹å‡»æ—¶æ‰å»åŠ è½½è¢«åˆ†å‰²å‡ºå»çš„ show.js æ–‡ä»¶ï¼ŒåŠ è½½æˆåŠŸåå†æ‰§è¡Œ show.js é‡Œçš„å‡½æ•°ã€‚</li></ul> <p>å…¶ä¸­æ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code>main<span class="token punctuation">.</span>js 
window<span class="token punctuation">.</span>document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'btn'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// å½“æŒ‰é’®è¢«ç‚¹å‡»åæ‰å»åŠ è½½ show.js æ–‡ä»¶ï¼Œæ–‡ä»¶åŠ è½½æˆåŠŸåæ‰§è¡Œæ–‡ä»¶å¯¼å‡ºçš„å‡½æ•°</span>
  <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token comment">/* webpackChunkName: &quot;show&quot; */</span> <span class="token string">'./show'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">show</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">show</span><span class="token punctuation">(</span><span class="token string">'Webpack'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code>show<span class="token punctuation">.</span>js
module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">content</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  window<span class="token punctuation">.</span><span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'Hello '</span> <span class="token operator">+</span> content<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>ä»£ç ä¸­æœ€å…³é”®çš„ä¸€å¥æ˜¯<code>import(/* webpackChunkName: &quot;show&quot; */ './show')</code>ï¼ŒWebpack å†…ç½®äº†å¯¹ <code>import(*)</code> è¯­å¥çš„æ”¯æŒï¼Œå½“ Webpack é‡åˆ°äº†ç±»ä¼¼çš„è¯­å¥æ—¶ä¼šè¿™æ ·å¤„ç†ï¼š</p> <ul><li>ä»¥ ./show.js ä¸ºå…¥å£æ–°ç”Ÿæˆä¸€ä¸ª Chunkï¼›</li> <li>å½“ä»£ç æ‰§è¡Œåˆ° import æ‰€åœ¨è¯­å¥æ—¶æ‰ä¼šå»åŠ è½½ç”± Chunk å¯¹åº”ç”Ÿæˆçš„æ–‡ä»¶ã€‚</li> <li>import è¿”å›ä¸€ä¸ª Promiseï¼Œå½“æ–‡ä»¶åŠ è½½æˆåŠŸæ—¶å¯ä»¥åœ¨ Promise çš„ then æ–¹æ³•ä¸­è·å–åˆ° show.js å¯¼å‡ºçš„å†…å®¹ã€‚</li></ul> <p>ä¸ºäº†æ­£ç¡®çš„è¾“å‡ºåœ¨ /* webpackChunkName: &quot;show&quot; */ ä¸­é…ç½®çš„ ChunkNameï¼Œè¿˜éœ€è¦é…ç½®ä¸‹ Webpackï¼Œé…ç½®å¦‚ä¸‹ï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// JS æ‰§è¡Œå…¥å£æ–‡ä»¶</span>
  <span class="token literal-property property">entry</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">main</span><span class="token operator">:</span> <span class="token string">'./main.js'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">output</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// ä¸ºä» entry ä¸­é…ç½®ç”Ÿæˆçš„ Chunk é…ç½®è¾“å‡ºæ–‡ä»¶çš„åç§°</span>
    <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">'[name].js'</span><span class="token punctuation">,</span>
    <span class="token comment">// ä¸ºåŠ¨æ€åŠ è½½çš„ Chunk é…ç½®è¾“å‡ºæ–‡ä»¶çš„åç§°</span>
    <span class="token literal-property property">chunkFilename</span><span class="token operator">:</span> <span class="token string">'[name].js'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>å…¶ä¸­æœ€å…³é”®çš„ä¸€è¡Œæ˜¯<code>chunkFilename: '[name].js'</code>,ï¼Œå®ƒä¸“é—¨æŒ‡å®šåŠ¨æ€ç”Ÿæˆçš„ <code>Chunk</code> åœ¨è¾“å‡ºæ—¶çš„æ–‡ä»¶åç§°ã€‚ å¦‚æœæ²¡æœ‰è¿™è¡Œï¼Œåˆ†å‰²å‡ºçš„ä»£ç çš„æ–‡ä»¶åç§°å°†ä¼šæ˜¯ <code>[id].js</code>ã€‚</p> <h2 id="åŸç†"><a href="#åŸç†" class="header-anchor">#</a> åŸç†</h2> <h3 id="å·¥ä½œåŸç†æ¦‚æ‹¬"><a href="#å·¥ä½œåŸç†æ¦‚æ‹¬" class="header-anchor">#</a> å·¥ä½œåŸç†æ¦‚æ‹¬</h3> <h4 id="åŸºæœ¬æ¦‚å¿µ"><a href="#åŸºæœ¬æ¦‚å¿µ" class="header-anchor">#</a> åŸºæœ¬æ¦‚å¿µ</h4> <p>åœ¨äº†è§£ Webpack åŸç†å‰ï¼Œéœ€è¦æŒæ¡ä»¥ä¸‹å‡ ä¸ªæ ¸å¿ƒæ¦‚å¿µï¼Œä»¥æ–¹ä¾¿åé¢çš„ç†è§£ï¼š</p> <ul><li>Entryï¼šå…¥å£ï¼ŒWebpack æ‰§è¡Œæ„å»ºçš„ç¬¬ä¸€æ­¥å°†ä» Entry å¼€å§‹ï¼Œå¯æŠ½è±¡æˆè¾“å…¥ã€‚</li> <li>Moduleï¼šæ¨¡å—ï¼Œåœ¨ Webpack é‡Œä¸€åˆ‡çš†æ¨¡å—ï¼Œä¸€ä¸ªæ¨¡å—å¯¹åº”ç€ä¸€ä¸ªæ–‡ä»¶ã€‚Webpack ä¼šä»é…ç½®çš„ Entry å¼€å§‹é€’å½’æ‰¾å‡ºæ‰€æœ‰ä¾èµ–çš„æ¨¡å—ã€‚</li> <li>Chunkï¼šä»£ç å—ï¼Œä¸€ä¸ª Chunk ç”±å¤šä¸ªæ¨¡å—ç»„åˆè€Œæˆï¼Œç”¨äºä»£ç åˆå¹¶ä¸åˆ†å‰²ã€‚</li> <li>Loaderï¼šæ¨¡å—è½¬æ¢å™¨ï¼Œç”¨äºæŠŠæ¨¡å—åŸå†…å®¹æŒ‰ç…§éœ€æ±‚è½¬æ¢æˆæ–°å†…å®¹ã€‚</li> <li>Pluginï¼šæ‰©å±•æ’ä»¶ï¼Œåœ¨ Webpack æ„å»ºæµç¨‹ä¸­çš„ç‰¹å®šæ—¶æœºä¼šå¹¿æ’­å‡ºå¯¹åº”çš„äº‹ä»¶ï¼Œæ’ä»¶å¯ä»¥ç›‘å¬è¿™äº›äº‹ä»¶çš„å‘ç”Ÿï¼Œåœ¨ç‰¹å®šæ—¶æœºåšå¯¹åº”çš„äº‹æƒ…ã€‚</li></ul> <h4 id="æµç¨‹æ¦‚æ‹¬"><a href="#æµç¨‹æ¦‚æ‹¬" class="header-anchor">#</a> æµç¨‹æ¦‚æ‹¬</h4> <p>Webpack çš„è¿è¡Œæµç¨‹æ˜¯ä¸€ä¸ªä¸²è¡Œçš„è¿‡ç¨‹ï¼Œä»å¯åŠ¨åˆ°ç»“æŸä¼šä¾æ¬¡æ‰§è¡Œä»¥ä¸‹æµç¨‹ï¼š</p> <ol><li>åˆå§‹åŒ–å‚æ•°ï¼šä»é…ç½®æ–‡ä»¶å’Œ Shell è¯­å¥ä¸­è¯»å–ä¸åˆå¹¶å‚æ•°ï¼Œå¾—å‡ºæœ€ç»ˆçš„å‚æ•°ï¼›</li> <li>å¼€å§‹ç¼–è¯‘ï¼šç”¨ä¸Šä¸€æ­¥å¾—åˆ°çš„å‚æ•°åˆå§‹åŒ– Compiler å¯¹è±¡ï¼ŒåŠ è½½æ‰€æœ‰é…ç½®çš„æ’ä»¶ï¼Œæ‰§è¡Œå¯¹è±¡çš„ run æ–¹æ³•å¼€å§‹æ‰§è¡Œç¼–è¯‘ï¼›</li> <li>ç¡®å®šå…¥å£ï¼šæ ¹æ®é…ç½®ä¸­çš„ entry æ‰¾å‡ºæ‰€æœ‰çš„å…¥å£æ–‡ä»¶ï¼›</li> <li>ç¼–è¯‘æ¨¡å—ï¼šä»å…¥å£æ–‡ä»¶å‡ºå‘ï¼Œè°ƒç”¨æ‰€æœ‰é…ç½®çš„ Loader å¯¹æ¨¡å—è¿›è¡Œç¿»è¯‘ï¼Œå†æ‰¾å‡ºè¯¥æ¨¡å—ä¾èµ–çš„æ¨¡å—ï¼Œå†é€’å½’æœ¬æ­¥éª¤ç›´åˆ°æ‰€æœ‰å…¥å£ä¾èµ–çš„æ–‡ä»¶éƒ½ç»è¿‡äº†æœ¬æ­¥éª¤çš„å¤„ç†ï¼›</li> <li>å®Œæˆæ¨¡å—ç¼–è¯‘ï¼šåœ¨ç»è¿‡ç¬¬4æ­¥ä½¿ç”¨ Loader ç¿»è¯‘å®Œæ‰€æœ‰æ¨¡å—åï¼Œå¾—åˆ°äº†æ¯ä¸ªæ¨¡å—è¢«ç¿»è¯‘åçš„æœ€ç»ˆå†…å®¹ä»¥åŠå®ƒä»¬ä¹‹é—´çš„ä¾èµ–å…³ç³»ï¼›</li> <li>è¾“å‡ºèµ„æºï¼šæ ¹æ®å…¥å£å’Œæ¨¡å—ä¹‹é—´çš„ä¾èµ–å…³ç³»ï¼Œç»„è£…æˆä¸€ä¸ªä¸ªåŒ…å«å¤šä¸ªæ¨¡å—çš„ Chunkï¼Œå†æŠŠæ¯ä¸ª Chunk è½¬æ¢æˆä¸€ä¸ªå•ç‹¬çš„æ–‡ä»¶åŠ å…¥åˆ°è¾“å‡ºåˆ—è¡¨ï¼Œè¿™æ­¥æ˜¯å¯ä»¥ä¿®æ”¹è¾“å‡ºå†…å®¹çš„æœ€åæœºä¼šï¼›</li> <li>è¾“å‡ºå®Œæˆï¼šåœ¨ç¡®å®šå¥½è¾“å‡ºå†…å®¹åï¼Œæ ¹æ®é…ç½®ç¡®å®šè¾“å‡ºçš„è·¯å¾„å’Œæ–‡ä»¶åï¼ŒæŠŠæ–‡ä»¶å†…å®¹å†™å…¥åˆ°æ–‡ä»¶ç³»ç»Ÿã€‚</li></ol> <p>åœ¨ä»¥ä¸Šè¿‡ç¨‹ä¸­ï¼ŒWebpack ä¼šåœ¨ç‰¹å®šçš„æ—¶é—´ç‚¹å¹¿æ’­å‡ºç‰¹å®šçš„äº‹ä»¶ï¼Œæ’ä»¶åœ¨ç›‘å¬åˆ°æ„Ÿå…´è¶£çš„äº‹ä»¶åä¼šæ‰§è¡Œç‰¹å®šçš„é€»è¾‘ï¼Œå¹¶ä¸”æ’ä»¶å¯ä»¥è°ƒç”¨ Webpack æä¾›çš„ API æ”¹å˜ Webpack çš„è¿è¡Œç»“æœã€‚</p> <h4 id="æµç¨‹ç»†èŠ‚"><a href="#æµç¨‹ç»†èŠ‚" class="header-anchor">#</a> æµç¨‹ç»†èŠ‚</h4> <p>Webpack çš„æ„å»ºæµç¨‹å¯ä»¥åˆ†ä¸ºä»¥ä¸‹ä¸‰å¤§é˜¶æ®µï¼š</p> <ol><li>åˆå§‹åŒ–ï¼šå¯åŠ¨æ„å»ºï¼Œè¯»å–ä¸åˆå¹¶é…ç½®å‚æ•°ï¼ŒåŠ è½½ Pluginï¼Œå®ä¾‹åŒ– Compilerã€‚</li> <li>ç¼–è¯‘ï¼šä» Entry å‘å‡ºï¼Œé’ˆå¯¹æ¯ä¸ª Module ä¸²è¡Œè°ƒç”¨å¯¹åº”çš„ Loader å»ç¿»è¯‘æ–‡ä»¶å†…å®¹ï¼Œå†æ‰¾åˆ°è¯¥ Module ä¾èµ–çš„ Moduleï¼Œé€’å½’åœ°è¿›è¡Œç¼–è¯‘å¤„ç†ã€‚</li> <li>è¾“å‡ºï¼šå¯¹ç¼–è¯‘åçš„ Module ç»„åˆæˆ Chunkï¼ŒæŠŠ Chunk è½¬æ¢æˆæ–‡ä»¶ï¼Œè¾“å‡ºåˆ°æ–‡ä»¶ç³»ç»Ÿã€‚
å¦‚æœåªæ‰§è¡Œä¸€æ¬¡æ„å»ºï¼Œä»¥ä¸Šé˜¶æ®µå°†ä¼šæŒ‰ç…§é¡ºåºå„æ‰§è¡Œä¸€æ¬¡ã€‚ä½†åœ¨å¼€å¯ç›‘å¬æ¨¡å¼ä¸‹ï¼Œæµç¨‹å°†å˜ä¸ºå¦‚ä¸‹ï¼š</li></ol> <p>åœ¨æ¯ä¸ªå¤§é˜¶æ®µä¸­åˆä¼šå‘ç”Ÿå¾ˆå¤šäº‹ä»¶ï¼ŒWebpack ä¼šæŠŠè¿™äº›äº‹ä»¶å¹¿æ’­å‡ºæ¥ä¾›ç»™ <code>Plugin</code> ä½¿ç”¨</p> <h4 id="åˆå§‹åŒ–é˜¶æ®µ"><a href="#åˆå§‹åŒ–é˜¶æ®µ" class="header-anchor">#</a> åˆå§‹åŒ–é˜¶æ®µ</h4> <table><thead><tr><th>äº‹ä»¶å</th> <th>è§£é‡Š</th></tr></thead> <tbody><tr><td>åˆå§‹åŒ–å‚æ•°</td> <td>ä»é…ç½®æ–‡ä»¶å’Œ Shell è¯­å¥ä¸­è¯»å–ä¸åˆå¹¶å‚æ•°ï¼Œå¾—å‡ºæœ€ç»ˆçš„å‚æ•°ã€‚ è¿™ä¸ªè¿‡ç¨‹ä¸­è¿˜ä¼šæ‰§è¡Œé…ç½®æ–‡ä»¶ä¸­çš„æ’ä»¶å®ä¾‹åŒ–è¯­å¥ new Plugin()ã€‚</td></tr> <tr><td>å®ä¾‹åŒ– Compiler</td> <td>ç”¨ä¸Šä¸€æ­¥å¾—åˆ°çš„å‚æ•°åˆå§‹åŒ– Compiler å®ä¾‹ï¼ŒCompiler è´Ÿè´£æ–‡ä»¶ç›‘å¬å’Œå¯åŠ¨ç¼–è¯‘ã€‚Compiler å®ä¾‹ä¸­åŒ…å«äº†å®Œæ•´çš„ Webpack é…ç½®ï¼Œå…¨å±€åªæœ‰ä¸€ä¸ª Compiler å®ä¾‹ã€‚</td></tr> <tr><td>åŠ è½½æ’ä»¶</td> <td>ä¾æ¬¡è°ƒç”¨æ’ä»¶çš„ apply æ–¹æ³•ï¼Œè®©æ’ä»¶å¯ä»¥ç›‘å¬åç»­çš„æ‰€æœ‰äº‹ä»¶èŠ‚ç‚¹ã€‚åŒæ—¶ç»™æ’ä»¶ä¼ å…¥ compiler å®ä¾‹çš„å¼•ç”¨ï¼Œä»¥æ–¹ä¾¿æ’ä»¶é€šè¿‡ compiler è°ƒç”¨ Webpack æä¾›çš„ APIã€‚</td></tr> <tr><td>environment</td> <td>å¼€å§‹åº”ç”¨ Node.js é£æ ¼çš„æ–‡ä»¶ç³»ç»Ÿåˆ° compiler å¯¹è±¡ï¼Œä»¥æ–¹ä¾¿åç»­çš„æ–‡ä»¶å¯»æ‰¾å’Œè¯»å–ã€‚</td></tr> <tr><td>entry-option</td> <td>è¯»å–é…ç½®çš„ Entrysï¼Œä¸ºæ¯ä¸ª Entry å®ä¾‹åŒ–ä¸€ä¸ªå¯¹åº”çš„ EntryPluginï¼Œä¸ºåé¢è¯¥ Entry çš„é€’å½’è§£æå·¥ä½œåšå‡†å¤‡ã€‚</td></tr> <tr><td>after-plugins</td> <td>è°ƒç”¨å®Œæ‰€æœ‰å†…ç½®çš„å’Œé…ç½®çš„æ’ä»¶çš„ apply æ–¹æ³•ã€‚</td></tr> <tr><td>after-resolvers</td> <td>æ ¹æ®é…ç½®åˆå§‹åŒ–å®Œ resolverï¼Œresolver è´Ÿè´£åœ¨æ–‡ä»¶ç³»ç»Ÿä¸­å¯»æ‰¾æŒ‡å®šè·¯å¾„çš„æ–‡ä»¶ã€‚</td></tr></tbody></table> <h4 id="ç¼–è¯‘é˜¶æ®µ"><a href="#ç¼–è¯‘é˜¶æ®µ" class="header-anchor">#</a> ç¼–è¯‘é˜¶æ®µ</h4> <table><thead><tr><th>äº‹ä»¶å</th> <th>è§£é‡Š</th></tr></thead> <tbody><tr><td>run</td> <td>å¯åŠ¨ä¸€æ¬¡æ–°çš„ç¼–è¯‘ã€‚</td></tr> <tr><td>watch-run	å’Œ run</td> <td>ç±»ä¼¼ï¼ŒåŒºåˆ«åœ¨äºå®ƒæ˜¯åœ¨ç›‘å¬æ¨¡å¼ä¸‹å¯åŠ¨çš„ç¼–è¯‘ï¼Œåœ¨è¿™ä¸ªäº‹ä»¶ä¸­å¯ä»¥è·å–åˆ°æ˜¯å“ªäº›æ–‡ä»¶å‘ç”Ÿäº†å˜åŒ–å¯¼è‡´é‡æ–°å¯åŠ¨ä¸€æ¬¡æ–°çš„ç¼–è¯‘ã€‚</td></tr> <tr><td>compile</td> <td>è¯¥äº‹ä»¶æ˜¯ä¸ºäº†å‘Šè¯‰æ’ä»¶ä¸€æ¬¡æ–°çš„ç¼–è¯‘å°†è¦å¯åŠ¨ï¼ŒåŒæ—¶ä¼šç»™æ’ä»¶å¸¦ä¸Š compiler å¯¹è±¡ã€‚</td></tr> <tr><td>compilation</td> <td>å½“ Webpack ä»¥å¼€å‘æ¨¡å¼è¿è¡Œæ—¶ï¼Œæ¯å½“æ£€æµ‹åˆ°æ–‡ä»¶å˜åŒ–ï¼Œä¸€æ¬¡æ–°çš„ Compilation å°†è¢«åˆ›å»ºã€‚ä¸€ä¸ª Compilation å¯¹è±¡åŒ…å«äº†å½“å‰çš„æ¨¡å—èµ„æºã€ç¼–è¯‘ç”Ÿæˆèµ„æºã€å˜åŒ–çš„æ–‡ä»¶ç­‰ã€‚Compilation</td></tr> <tr><td>make</td> <td>ä¸€ä¸ªæ–°çš„ Compilation åˆ›å»ºå®Œæ¯•ï¼Œå³å°†ä» Entry å¼€å§‹è¯»å–æ–‡ä»¶ï¼Œæ ¹æ®æ–‡ä»¶ç±»å‹å’Œé…ç½®çš„ Loader å¯¹æ–‡ä»¶è¿›è¡Œç¼–è¯‘ï¼Œç¼–è¯‘å®Œåå†æ‰¾å‡ºè¯¥æ–‡ä»¶ä¾èµ–çš„æ–‡ä»¶ï¼Œé€’å½’çš„ç¼–è¯‘å’Œè§£æã€‚</td></tr> <tr><td>after-compile</td> <td>ä¸€æ¬¡ Compilation æ‰§è¡Œå®Œæˆã€‚</td></tr> <tr><td>invalid</td> <td>å½“é‡åˆ°æ–‡ä»¶ä¸å­˜åœ¨ã€æ–‡ä»¶ç¼–è¯‘é”™è¯¯ç­‰å¼‚å¸¸æ—¶ä¼šè§¦å‘è¯¥äº‹ä»¶ï¼Œè¯¥äº‹ä»¶ä¸ä¼šå¯¼è‡´ Webpack é€€å‡ºã€‚</td></tr></tbody></table> <p>åœ¨ç¼–è¯‘é˜¶æ®µä¸­ï¼Œæœ€é‡è¦çš„è¦æ•° compilation äº‹ä»¶äº†ï¼Œå› ä¸ºåœ¨ compilation é˜¶æ®µè°ƒç”¨äº† Loader å®Œæˆäº†æ¯ä¸ªæ¨¡å—çš„è½¬æ¢æ“ä½œï¼Œåœ¨ compilation é˜¶æ®µåˆåŒ…æ‹¬å¾ˆå¤šå°çš„äº‹ä»¶ï¼Œå®ƒä»¬åˆ†åˆ«æ˜¯ï¼š</p> <table><thead><tr><th>äº‹ä»¶å</th> <th>è§£é‡Š</th></tr></thead> <tbody><tr><td>build-module</td> <td>ä½¿ç”¨å¯¹åº”çš„ Loader å»è½¬æ¢ä¸€ä¸ªæ¨¡å—ã€‚</td></tr> <tr><td>normal-module-loader</td> <td>åœ¨ç”¨ Loader å¯¹ä¸€ä¸ªæ¨¡å—è½¬æ¢å®Œåï¼Œä½¿ç”¨ acorn è§£æè½¬æ¢åçš„å†…å®¹ï¼Œè¾“å‡ºå¯¹åº”çš„æŠ½è±¡è¯­æ³•æ ‘ï¼ˆASTï¼‰ï¼Œä»¥æ–¹ä¾¿ Webpack åé¢å¯¹ä»£ç çš„åˆ†æã€‚</td></tr> <tr><td>program</td> <td>ä»é…ç½®çš„å…¥å£æ¨¡å—å¼€å§‹ï¼Œåˆ†æå…¶ ASTï¼Œå½“é‡åˆ° require</td></tr> <tr><td>seal</td> <td>æ‰€æœ‰æ¨¡å—åŠå…¶ä¾èµ–çš„æ¨¡å—éƒ½é€šè¿‡ Loader è½¬æ¢å®Œæˆåï¼Œæ ¹æ®ä¾èµ–å…³ç³»å¼€å§‹ç”Ÿæˆ Chunkã€‚</td></tr></tbody></table> <h4 id="è¾“å‡ºé˜¶æ®µ"><a href="#è¾“å‡ºé˜¶æ®µ" class="header-anchor">#</a> è¾“å‡ºé˜¶æ®µ</h4> <table><thead><tr><th>äº‹ä»¶å</th> <th>è§£é‡Š</th></tr></thead> <tbody><tr><td>should-emit</td> <td>æ‰€æœ‰éœ€è¦è¾“å‡ºçš„æ–‡ä»¶å·²ç»ç”Ÿæˆå¥½ï¼Œè¯¢é—®æ’ä»¶å“ªäº›æ–‡ä»¶éœ€è¦è¾“å‡ºï¼Œå“ªäº›ä¸éœ€è¦ã€‚</td></tr> <tr><td>emit</td> <td>ç¡®å®šå¥½è¦è¾“å‡ºå“ªäº›æ–‡ä»¶åï¼Œæ‰§è¡Œæ–‡ä»¶è¾“å‡ºï¼Œå¯ä»¥åœ¨è¿™é‡Œè·å–å’Œä¿®æ”¹è¾“å‡ºå†…å®¹ã€‚</td></tr> <tr><td>after-emit</td> <td>æ–‡ä»¶è¾“å‡ºå®Œæ¯•ã€‚</td></tr> <tr><td>done</td> <td>æˆåŠŸå®Œæˆä¸€æ¬¡å®Œæˆçš„ç¼–è¯‘å’Œè¾“å‡ºæµç¨‹ã€‚</td></tr> <tr><td>failed</td> <td>å¦‚æœåœ¨ç¼–è¯‘å’Œè¾“å‡ºæµç¨‹ä¸­é‡åˆ°å¼‚å¸¸å¯¼è‡´ Webpack é€€å‡ºæ—¶ï¼Œå°±ä¼šç›´æ¥è·³è½¬åˆ°æœ¬æ­¥éª¤ï¼Œæ’ä»¶å¯ä»¥åœ¨æœ¬äº‹ä»¶ä¸­è·å–åˆ°å…·ä½“çš„é”™è¯¯åŸå› ã€‚</td></tr></tbody></table> <p>åœ¨è¾“å‡ºé˜¶æ®µå·²ç»å¾—åˆ°äº†å„ä¸ªæ¨¡å—ç»è¿‡è½¬æ¢åçš„ç»“æœå’Œå…¶ä¾èµ–å…³ç³»ï¼Œå¹¶ä¸”æŠŠç›¸å…³æ¨¡å—ç»„åˆåœ¨ä¸€èµ·å½¢æˆä¸€ä¸ªä¸ª Chunkã€‚ åœ¨è¾“å‡ºé˜¶æ®µä¼šæ ¹æ® Chunk çš„ç±»å‹ï¼Œä½¿ç”¨å¯¹åº”çš„æ¨¡ç‰ˆç”Ÿæˆæœ€ç»ˆè¦è¾“å‡ºçš„æ–‡ä»¶å†…å®¹ã€‚</p> <h3 id="è¾“å‡ºæ–‡ä»¶åˆ†æ"><a href="#è¾“å‡ºæ–‡ä»¶åˆ†æ" class="header-anchor">#</a> è¾“å‡ºæ–‡ä»¶åˆ†æ</h3> <h4 id="åŸºæœ¬å†…å®¹åˆ†æ"><a href="#åŸºæœ¬å†…å®¹åˆ†æ" class="header-anchor">#</a> åŸºæœ¬å†…å®¹åˆ†æ</h4> <p>ä»¥å…¥é—¨ç¯‡çš„ã€Šå®‰è£…ä¸ä½¿ç”¨ã€‹ä¸­æ‰“åŒ…çš„bundle.jsæ–‡ä»¶ä¸ºä¾‹</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// webpackBootstrapå¯åŠ¨å‡½æ•°</span>
<span class="token comment">// modules å³ä¸ºå­˜æ”¾æ‰€æœ‰æ¨¡å—çš„æ•°ç»„ï¼Œæ•°ç»„ä¸­çš„æ¯ä¸€ä¸ªå…ƒç´ éƒ½æ˜¯ä¸€ä¸ªå‡½æ•°</span>
<span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">modules</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// å®‰è£…è¿‡çš„æ¨¡å—éƒ½å­˜æ”¾åœ¨è¿™é‡Œé¢</span>
  <span class="token comment">// ä½œç”¨æ˜¯æŠŠå·²ç»åŠ è½½è¿‡çš„æ¨¡å—ç¼“å­˜åœ¨å†…å­˜ä¸­ï¼Œæå‡æ€§èƒ½</span>
  <span class="token keyword">var</span> installedModules <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token comment">// å»æ•°ç»„ä¸­åŠ è½½ä¸€ä¸ªæ¨¡å—ï¼ŒmoduleId ä¸ºè¦åŠ è½½æ¨¡å—åœ¨æ•°ç»„ä¸­çš„ index</span>
  <span class="token keyword">function</span> <span class="token function">__webpack_require__</span><span class="token punctuation">(</span><span class="token parameter">moduleId</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token comment">// å¦‚æœéœ€è¦åŠ è½½çš„æ¨¡å—å·²ç»è¢«åŠ è½½è¿‡ï¼Œå°±ç›´æ¥ä»å†…å­˜ç¼“å­˜ä¸­è¿”å›</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>installedModules<span class="token punctuation">[</span>moduleId<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> installedModules<span class="token punctuation">[</span>moduleId<span class="token punctuation">]</span><span class="token punctuation">.</span>exports<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// å¦‚æœç¼“å­˜ä¸­ä¸å­˜åœ¨éœ€è¦åŠ è½½çš„æ¨¡å—ï¼Œå°±æ–°å»ºä¸€ä¸ªæ¨¡å—ï¼Œå¹¶æŠŠå®ƒå­˜åœ¨ç¼“å­˜ä¸­</span>
    <span class="token keyword">var</span> module <span class="token operator">=</span> installedModules<span class="token punctuation">[</span>moduleId<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
      <span class="token comment">// æ¨¡å—åœ¨æ•°ç»„ä¸­çš„ index</span>
      <span class="token literal-property property">i</span><span class="token operator">:</span> moduleId<span class="token punctuation">,</span>
      <span class="token comment">// è¯¥æ¨¡å—æ˜¯å¦å·²ç»åŠ è½½å®Œæ¯•</span>
      <span class="token literal-property property">l</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
      <span class="token comment">// è¯¥æ¨¡å—çš„å¯¼å‡ºå€¼</span>
      <span class="token literal-property property">exports</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token comment">// ä» modules ä¸­è·å– index ä¸º moduleId çš„æ¨¡å—å¯¹åº”çš„å‡½æ•°</span>
    <span class="token comment">// å†è°ƒç”¨è¿™ä¸ªå‡½æ•°ï¼ŒåŒæ—¶æŠŠå‡½æ•°éœ€è¦çš„å‚æ•°ä¼ å…¥</span>
    modules<span class="token punctuation">[</span>moduleId<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>module<span class="token punctuation">.</span>exports<span class="token punctuation">,</span> module<span class="token punctuation">,</span> module<span class="token punctuation">.</span>exports<span class="token punctuation">,</span> __webpack_require__<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// æŠŠè¿™ä¸ªæ¨¡å—æ ‡è®°ä¸ºå·²åŠ è½½</span>
    module<span class="token punctuation">.</span>l <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>

    <span class="token comment">// è¿”å›è¿™ä¸ªæ¨¡å—çš„å¯¼å‡ºå€¼</span>
    <span class="token keyword">return</span> module<span class="token punctuation">.</span>exports<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>


  <span class="token comment">// ä¼ å…¥æ¨¡å—å¯¹è±¡</span>
  __webpack_require__<span class="token punctuation">.</span>m <span class="token operator">=</span> modules<span class="token punctuation">;</span>

  <span class="token comment">// ä¼ å…¥æ¨¡å—ç¼“å­˜</span>
  __webpack_require__<span class="token punctuation">.</span>c <span class="token operator">=</span> installedModules<span class="token punctuation">;</span>

  <span class="token comment">// define getter function for harmony exports</span>
  __webpack_require__<span class="token punctuation">.</span><span class="token function-variable function">d</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">exports<span class="token punctuation">,</span> name<span class="token punctuation">,</span> getter</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>__webpack_require__<span class="token punctuation">.</span><span class="token function">o</span><span class="token punctuation">(</span>exports<span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>exports<span class="token punctuation">,</span> name<span class="token punctuation">,</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">configurable</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
        <span class="token literal-property property">enumerable</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token literal-property property">get</span><span class="token operator">:</span> getter
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token comment">// getDefaultExport function for compatibility with non-harmony modules</span>
  __webpack_require__<span class="token punctuation">.</span><span class="token function-variable function">n</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">module</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> getter <span class="token operator">=</span> module <span class="token operator">&amp;&amp;</span> module<span class="token punctuation">.</span>__esModule <span class="token operator">?</span>
      <span class="token keyword">function</span> <span class="token function">getDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> module<span class="token punctuation">[</span><span class="token string">'default'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token operator">:</span>
      <span class="token keyword">function</span> <span class="token function">getModuleExports</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> module<span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">;</span>
    __webpack_require__<span class="token punctuation">.</span><span class="token function">d</span><span class="token punctuation">(</span>getter<span class="token punctuation">,</span> <span class="token string">'a'</span><span class="token punctuation">,</span> getter<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> getter<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token comment">// Object.prototype.hasOwnProperty.call</span>
  __webpack_require__<span class="token punctuation">.</span><span class="token function-variable function">o</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">object<span class="token punctuation">,</span> property</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>object<span class="token punctuation">,</span> property<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token comment">// Webpack é…ç½®ä¸­çš„ publicPathï¼Œç”¨äºåŠ è½½è¢«åˆ†å‰²å‡ºå»çš„å¼‚æ­¥ä»£ç </span>
  __webpack_require__<span class="token punctuation">.</span>p <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>

  <span class="token comment">// ä½¿ç”¨ __webpack_require__ å»åŠ è½½ index ä¸º 0 çš„æ¨¡å—ï¼Œå¹¶ä¸”è¿”å›è¯¥æ¨¡å—å¯¼å‡ºçš„å†…å®¹</span>
  <span class="token comment">// index ä¸º 0 çš„æ¨¡å—å°±æ˜¯ main.js å¯¹åº”çš„æ–‡ä»¶ï¼Œä¹Ÿå°±æ˜¯æ‰§è¡Œå…¥å£æ¨¡å—</span>
  <span class="token comment">// __webpack_require__.s çš„å«ä¹‰æ˜¯å¯åŠ¨æ¨¡å—å¯¹åº”çš„ index</span>
  <span class="token keyword">return</span> <span class="token function">__webpack_require__</span><span class="token punctuation">(</span>__webpack_require__<span class="token punctuation">.</span>s <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">/************************************************************************/</span>
<span class="token punctuation">(</span><span class="token punctuation">[</span>

  <span class="token comment">// æ‰€æœ‰çš„æ¨¡å—éƒ½å­˜æ”¾åœ¨äº†ä¸€ä¸ªæ•°ç»„é‡Œï¼Œæ ¹æ®æ¯ä¸ªæ¨¡å—åœ¨æ•°ç»„çš„ index æ¥åŒºåˆ†å’Œå®šä½æ¨¡å—</span>
  <span class="token comment">/* 0 */</span>
  <span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">module<span class="token punctuation">,</span> exports<span class="token punctuation">,</span> __webpack_require__</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token comment">// é€šè¿‡ __webpack_require__ è§„èŒƒå¯¼å…¥ show å‡½æ•°ï¼Œshow.js å¯¹åº”çš„æ¨¡å— index ä¸º 1</span>
    <span class="token keyword">const</span> show <span class="token operator">=</span> <span class="token function">__webpack_require__</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// æ‰§è¡Œ show å‡½æ•°</span>
    <span class="token function">show</span><span class="token punctuation">(</span><span class="token string">'Webpack'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token comment">/* 1 */</span>
  <span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">module<span class="token punctuation">,</span> exports</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// æ“ä½œ DOM å…ƒç´ ï¼ŒæŠŠ content æ˜¾ç¤ºåˆ°ç½‘é¡µä¸Š</span>
    <span class="token keyword">function</span> <span class="token function">show</span><span class="token punctuation">(</span><span class="token parameter">content</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      window<span class="token punctuation">.</span>document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'app'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>innerText <span class="token operator">=</span> <span class="token string">'Hello,'</span> <span class="token operator">+</span> content<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// é€šè¿‡ CommonJS è§„èŒƒå¯¼å‡º show å‡½æ•°</span>
    module<span class="token punctuation">.</span>exports <span class="token operator">=</span> show<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>ä»¥ä¸Šçœ‹ä¸Šå»å¤æ‚çš„ä»£ç å…¶å®æ˜¯ä¸€ä¸ªç«‹å³æ‰§è¡Œå‡½æ•°ï¼Œå¯ä»¥ç®€å†™ä¸ºå¦‚ä¸‹ï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">modules</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

  <span class="token comment">// æ¨¡æ‹Ÿ require è¯­å¥</span>
  <span class="token keyword">function</span> <span class="token function">__webpack_require__</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// æ‰§è¡Œå­˜æ”¾æ‰€æœ‰æ¨¡å—æ•°ç»„ä¸­çš„ç¬¬0ä¸ªæ¨¡å—</span>
  <span class="token function">__webpack_require__</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token comment">/*å­˜æ”¾æ‰€æœ‰æ¨¡å—çš„æ•°ç»„*/</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre></div><p><code>bundle.js</code> èƒ½ç›´æ¥è¿è¡Œåœ¨æµè§ˆå™¨ä¸­çš„åŸå› åœ¨äºè¾“å‡ºçš„æ–‡ä»¶ä¸­é€šè¿‡ <code>__webpack_require__</code> å‡½æ•°å®šä¹‰äº†ä¸€ä¸ªå¯ä»¥åœ¨æµè§ˆå™¨ä¸­æ‰§è¡Œçš„åŠ è½½å‡½æ•°æ¥æ¨¡æ‹Ÿ Node.js ä¸­çš„ require è¯­å¥ã€‚</p> <p>åŸæ¥ä¸€ä¸ªä¸ªç‹¬ç«‹çš„æ¨¡å—æ–‡ä»¶è¢«åˆå¹¶åˆ°äº†ä¸€ä¸ªå•ç‹¬çš„ bundle.js çš„åŸå› åœ¨äºæµè§ˆå™¨ä¸èƒ½åƒ Node.js é‚£æ ·å¿«é€Ÿåœ°å»æœ¬åœ°åŠ è½½ä¸€ä¸ªä¸ªæ¨¡å—æ–‡ä»¶ï¼Œè€Œå¿…é¡»é€šè¿‡ç½‘ç»œè¯·æ±‚å»åŠ è½½è¿˜æœªå¾—åˆ°çš„æ–‡ä»¶ã€‚ å¦‚æœæ¨¡å—æ•°é‡å¾ˆå¤šï¼ŒåŠ è½½æ—¶é—´ä¼šå¾ˆé•¿ï¼Œå› æ­¤æŠŠæ‰€æœ‰æ¨¡å—éƒ½å­˜æ”¾åœ¨äº†æ•°ç»„ä¸­ï¼Œæ‰§è¡Œä¸€æ¬¡ç½‘ç»œåŠ è½½ã€‚</p> <p>Webpack åšäº†ç¼“å­˜ä¼˜åŒ–ï¼š æ‰§è¡ŒåŠ è½½è¿‡çš„æ¨¡å—ä¸ä¼šå†æ‰§è¡Œç¬¬äºŒæ¬¡ï¼Œæ‰§è¡Œç»“æœä¼šç¼“å­˜åœ¨å†…å­˜ä¸­ï¼Œå½“æŸä¸ªæ¨¡å—ç¬¬äºŒæ¬¡è¢«è®¿é—®æ—¶ä¼šç›´æ¥å»å†…å­˜ä¸­è¯»å–è¢«ç¼“å­˜çš„è¿”å›å€¼ã€‚</p> <h4 id="åˆ†å‰²ä»£ç æ—¶çš„è¾“å‡º"><a href="#åˆ†å‰²ä»£ç æ—¶çš„è¾“å‡º" class="header-anchor">#</a> åˆ†å‰²ä»£ç æ—¶çš„è¾“å‡º</h4> <p>åœ¨é‡‡ç”¨äº†æŒ‰éœ€åŠ è½½çš„ä¼˜åŒ–æ–¹æ³•æ—¶ï¼ŒWebpack çš„è¾“å‡ºæ–‡ä»¶ä¼šå‘ç”Ÿå˜åŒ–ã€‚</p> <p>ä¾‹å¦‚æŠŠæºç ä¸­çš„ main.js ä¿®æ”¹ä¸ºå¦‚ä¸‹ï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// å¼‚æ­¥åŠ è½½ show.js</span>
<span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'./show'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">show</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// æ‰§è¡Œ show å‡½æ•°</span>
  <span class="token function">show</span><span class="token punctuation">(</span><span class="token string">'Webpack'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>é‡æ–°æ„å»ºåä¼šè¾“å‡ºä¸¤ä¸ªæ–‡ä»¶ï¼Œåˆ†åˆ«æ˜¯æ‰§è¡Œå…¥å£æ–‡ä»¶ bundle.js å’Œ å¼‚æ­¥åŠ è½½æ–‡ä»¶ 0.bundle.jsã€‚</p> <p>å…¶ä¸­ 0.bundle.js å†…å®¹å¦‚ä¸‹ï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// åŠ è½½åœ¨æœ¬æ–‡ä»¶(0.bundle.js)ä¸­åŒ…å«çš„æ¨¡å—</span>
<span class="token function">webpackJsonp</span><span class="token punctuation">(</span>
  <span class="token comment">// åœ¨å…¶å®ƒæ–‡ä»¶ä¸­å­˜æ”¾ç€çš„æ¨¡å—çš„ ID</span>
  <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token comment">// æœ¬æ–‡ä»¶æ‰€åŒ…å«çš„æ¨¡å—</span>
  <span class="token punctuation">[</span>
    <span class="token comment">// show.js æ‰€å¯¹åº”çš„æ¨¡å—</span>
    <span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">module<span class="token punctuation">,</span> exports</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

      <span class="token comment">// æ“ä½œ DOM å…ƒç´ ï¼ŒæŠŠ content æ˜¾ç¤ºåˆ°ç½‘é¡µä¸Š</span>
      <span class="token keyword">function</span> <span class="token function">show</span><span class="token punctuation">(</span><span class="token parameter">content</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        window<span class="token punctuation">.</span>document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'app'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>innerText <span class="token operator">=</span> <span class="token string">'Hello,'</span> <span class="token operator">+</span> content<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token comment">// é€šè¿‡ CommonJS è§„èŒƒå¯¼å‡º show å‡½æ•°</span>
      module<span class="token punctuation">.</span>exports <span class="token operator">=</span> show<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><code>bundle.js</code> å†…å®¹å¦‚ä¸‹ï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// webpackBootstrapå¯åŠ¨å‡½æ•°</span>
<span class="token comment">// modules å³ä¸ºå­˜æ”¾æ‰€æœ‰æ¨¡å—çš„æ•°ç»„ï¼Œæ•°ç»„ä¸­çš„æ¯ä¸€ä¸ªå…ƒç´ éƒ½æ˜¯ä¸€ä¸ªå‡½æ•°</span>
<span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">modules</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">/***
   * webpackJsonp ç”¨äºä»å¼‚æ­¥åŠ è½½çš„æ–‡ä»¶ä¸­å®‰è£…æ¨¡å—ã€‚
   * æŠŠ webpackJsonp æŒ‚è½½åˆ°å…¨å±€æ˜¯ä¸ºäº†æ–¹ä¾¿åœ¨å…¶å®ƒæ–‡ä»¶ä¸­è°ƒç”¨ã€‚
   *
   * @param chunkIds å¼‚æ­¥åŠ è½½çš„æ–‡ä»¶ä¸­å­˜æ”¾çš„éœ€è¦å®‰è£…çš„æ¨¡å—å¯¹åº”çš„ Chunk ID
   * @param moreModules å¼‚æ­¥åŠ è½½çš„æ–‡ä»¶ä¸­å­˜æ”¾çš„éœ€è¦å®‰è£…çš„æ¨¡å—åˆ—è¡¨
   * @param executeModules åœ¨å¼‚æ­¥åŠ è½½çš„æ–‡ä»¶ä¸­å­˜æ”¾çš„éœ€è¦å®‰è£…çš„æ¨¡å—éƒ½å®‰è£…æˆåŠŸåï¼Œéœ€è¦æ‰§è¡Œçš„æ¨¡å—å¯¹åº”çš„ index
   */</span>
  <span class="token keyword">var</span> parentJsonpFunction <span class="token operator">=</span> window<span class="token punctuation">[</span><span class="token string">&quot;webpackJsonp&quot;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  window<span class="token punctuation">[</span><span class="token string">&quot;webpackJsonp&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token function">webpackJsonpCallback</span><span class="token punctuation">(</span><span class="token parameter">chunkIds<span class="token punctuation">,</span> moreModules<span class="token punctuation">,</span> executeModules</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// æŠŠ moreModules æ·»åŠ åˆ° modules å¯¹è±¡ä¸­</span>
    <span class="token comment">// æŠŠæ‰€æœ‰ chunkIds å¯¹åº”çš„æ¨¡å—éƒ½æ ‡è®°æˆå·²ç»åŠ è½½æˆåŠŸ </span>
    <span class="token keyword">var</span> moduleId<span class="token punctuation">,</span> chunkId<span class="token punctuation">,</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>
      resolves <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      result<span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> chunkIds<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      chunkId <span class="token operator">=</span> chunkIds<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>installedChunks<span class="token punctuation">[</span>chunkId<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        resolves<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>installedChunks<span class="token punctuation">[</span>chunkId<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      installedChunks<span class="token punctuation">[</span>chunkId<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span>moduleId <span class="token keyword">in</span> moreModules<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>moreModules<span class="token punctuation">,</span> moduleId<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        modules<span class="token punctuation">[</span>moduleId<span class="token punctuation">]</span> <span class="token operator">=</span> moreModules<span class="token punctuation">[</span>moduleId<span class="token punctuation">]</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>parentJsonpFunction<span class="token punctuation">)</span> <span class="token function">parentJsonpFunction</span><span class="token punctuation">(</span>chunkIds<span class="token punctuation">,</span> moreModules<span class="token punctuation">,</span> executeModules<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span>resolves<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      resolves<span class="token punctuation">.</span><span class="token function">shift</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token comment">// ç¼“å­˜å·²ç»å®‰è£…çš„æ¨¡å—</span>
  <span class="token keyword">var</span> installedModules <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token comment">// å­˜å‚¨æ¯ä¸ª Chunk çš„åŠ è½½çŠ¶æ€ï¼›</span>
  <span class="token comment">// é”®ä¸º Chunk çš„ IDï¼Œå€¼ä¸º0ä»£è¡¨å·²ç»åŠ è½½æˆåŠŸ</span>
  <span class="token keyword">var</span> installedChunks <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token number">1</span><span class="token operator">:</span> <span class="token number">0</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token comment">// å»æ•°ç»„ä¸­åŠ è½½ä¸€ä¸ªæ¨¡å—ï¼ŒmoduleId ä¸ºè¦åŠ è½½æ¨¡å—åœ¨æ•°ç»„ä¸­çš„ index</span>
  <span class="token keyword">function</span> <span class="token function">__webpack_require__</span><span class="token punctuation">(</span><span class="token parameter">moduleId</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token comment">// å¦‚æœéœ€è¦åŠ è½½çš„æ¨¡å—å·²ç»è¢«åŠ è½½è¿‡ï¼Œå°±ç›´æ¥ä»å†…å­˜ç¼“å­˜ä¸­è¿”å›</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>installedModules<span class="token punctuation">[</span>moduleId<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> installedModules<span class="token punctuation">[</span>moduleId<span class="token punctuation">]</span><span class="token punctuation">.</span>exports<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// å¦‚æœç¼“å­˜ä¸­ä¸å­˜åœ¨éœ€è¦åŠ è½½çš„æ¨¡å—ï¼Œå°±æ–°å»ºä¸€ä¸ªæ¨¡å—ï¼Œå¹¶æŠŠå®ƒå­˜åœ¨ç¼“å­˜ä¸­</span>
    <span class="token keyword">var</span> module <span class="token operator">=</span> installedModules<span class="token punctuation">[</span>moduleId<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
      <span class="token comment">// æ¨¡å—åœ¨æ•°ç»„ä¸­çš„ index</span>
      <span class="token literal-property property">i</span><span class="token operator">:</span> moduleId<span class="token punctuation">,</span>
      <span class="token comment">// è¯¥æ¨¡å—æ˜¯å¦å·²ç»åŠ è½½å®Œæ¯•</span>
      <span class="token literal-property property">l</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
      <span class="token comment">// è¯¥æ¨¡å—çš„å¯¼å‡ºå€¼</span>
      <span class="token literal-property property">exports</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token comment">// ä» modules ä¸­è·å– index ä¸º moduleId çš„æ¨¡å—å¯¹åº”çš„å‡½æ•°</span>
    <span class="token comment">// å†è°ƒç”¨è¿™ä¸ªå‡½æ•°ï¼ŒåŒæ—¶æŠŠå‡½æ•°éœ€è¦çš„å‚æ•°ä¼ å…¥</span>
    modules<span class="token punctuation">[</span>moduleId<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>module<span class="token punctuation">.</span>exports<span class="token punctuation">,</span> module<span class="token punctuation">,</span> module<span class="token punctuation">.</span>exports<span class="token punctuation">,</span> __webpack_require__<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// æŠŠè¿™ä¸ªæ¨¡å—æ ‡è®°ä¸ºå·²åŠ è½½</span>
    module<span class="token punctuation">.</span>l <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>

    <span class="token comment">// è¿”å›è¿™ä¸ªæ¨¡å—çš„å¯¼å‡ºå€¼</span>
    <span class="token keyword">return</span> module<span class="token punctuation">.</span>exports<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment">/**
   * ç”¨äºåŠ è½½è¢«åˆ†å‰²å‡ºå»çš„ï¼Œéœ€è¦å¼‚æ­¥åŠ è½½çš„ Chunk å¯¹åº”çš„æ–‡ä»¶
   * @param chunkId éœ€è¦å¼‚æ­¥åŠ è½½çš„ Chunk å¯¹åº”çš„ ID
   * @returns {Promise}
   */</span>
  __webpack_require__<span class="token punctuation">.</span><span class="token function-variable function">e</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token function">requireEnsure</span><span class="token punctuation">(</span><span class="token parameter">chunkId</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// ä»ä¸Šé¢å®šä¹‰çš„ installedChunks ä¸­è·å– chunkId å¯¹åº”çš„ Chunk çš„åŠ è½½çŠ¶æ€</span>
    <span class="token keyword">var</span> installedChunkData <span class="token operator">=</span> installedChunks<span class="token punctuation">[</span>chunkId<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token comment">// å¦‚æœåŠ è½½çŠ¶æ€ä¸º0è¡¨ç¤ºè¯¥ Chunk å·²ç»åŠ è½½æˆåŠŸäº†ï¼Œç›´æ¥è¿”å› resolve Promise</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>installedChunkData <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">resolve</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// installedChunkData ä¸ä¸ºç©ºä¸”ä¸ä¸º0è¡¨ç¤ºè¯¥ Chunk æ­£åœ¨ç½‘ç»œåŠ è½½ä¸­</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>installedChunkData<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// è¿”å›å­˜æ”¾åœ¨ installedChunkData æ•°ç»„ä¸­çš„ Promise å¯¹è±¡</span>
      <span class="token keyword">return</span> installedChunkData<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// installedChunkData ä¸ºç©ºï¼Œè¡¨ç¤ºè¯¥ Chunk è¿˜æ²¡æœ‰åŠ è½½è¿‡ï¼Œå»åŠ è½½è¯¥ Chunk å¯¹åº”çš„æ–‡ä»¶</span>
    <span class="token keyword">var</span> promise <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      installedChunkData <span class="token operator">=</span> installedChunks<span class="token punctuation">[</span>chunkId<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span>resolve<span class="token punctuation">,</span> reject<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    installedChunkData<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> promise<span class="token punctuation">;</span>

    <span class="token comment">// é€šè¿‡ DOM æ“ä½œï¼Œå¾€ HTML head ä¸­æ’å…¥ä¸€ä¸ª script æ ‡ç­¾å»å¼‚æ­¥åŠ è½½ Chunk å¯¹åº”çš„ JavaScript æ–‡ä»¶</span>
    <span class="token keyword">var</span> head <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementsByTagName</span><span class="token punctuation">(</span><span class="token string">'head'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> script <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'script'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    script<span class="token punctuation">.</span>type <span class="token operator">=</span> <span class="token string">'text/javascript'</span><span class="token punctuation">;</span>
    script<span class="token punctuation">.</span>charset <span class="token operator">=</span> <span class="token string">'utf-8'</span><span class="token punctuation">;</span>
    script<span class="token punctuation">.</span>async <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    script<span class="token punctuation">.</span>timeout <span class="token operator">=</span> <span class="token number">120000</span><span class="token punctuation">;</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>__webpack_require__<span class="token punctuation">.</span>nc<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      script<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">&quot;nonce&quot;</span><span class="token punctuation">,</span> __webpack_require__<span class="token punctuation">.</span>nc<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// æ–‡ä»¶çš„è·¯å¾„ä¸ºé…ç½®çš„ publicPathã€chunkId æ‹¼æ¥è€Œæˆ</span>
    script<span class="token punctuation">.</span>src <span class="token operator">=</span> __webpack_require__<span class="token punctuation">.</span>p <span class="token operator">+</span> <span class="token string">&quot;&quot;</span> <span class="token operator">+</span> chunkId <span class="token operator">+</span> <span class="token string">&quot;.bundle.js&quot;</span><span class="token punctuation">;</span>
    <span class="token comment">// è®¾ç½®å¼‚æ­¥åŠ è½½çš„æœ€é•¿è¶…æ—¶æ—¶é—´</span>
    <span class="token keyword">var</span> timeout <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span>onScriptComplete<span class="token punctuation">,</span> <span class="token number">120000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    script<span class="token punctuation">.</span>onerror <span class="token operator">=</span> script<span class="token punctuation">.</span>onload <span class="token operator">=</span> onScriptComplete<span class="token punctuation">;</span>
    <span class="token comment">// åœ¨ script åŠ è½½å’Œæ‰§è¡Œå®Œæˆæ—¶å›è°ƒ</span>
    <span class="token keyword">function</span> <span class="token function">onScriptComplete</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// é˜²æ­¢å†…å­˜æ³„éœ²</span>
      script<span class="token punctuation">.</span>onerror <span class="token operator">=</span> script<span class="token punctuation">.</span>onload <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
      <span class="token function">clearTimeout</span><span class="token punctuation">(</span>timeout<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">// å»æ£€æŸ¥ chunkId å¯¹åº”çš„ Chunk æ˜¯å¦å®‰è£…æˆåŠŸï¼Œå®‰è£…æˆåŠŸæ—¶æ‰ä¼šå­˜åœ¨äº installedChunks ä¸­</span>
      <span class="token keyword">var</span> chunk <span class="token operator">=</span> installedChunks<span class="token punctuation">[</span>chunkId<span class="token punctuation">]</span><span class="token punctuation">;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>chunk <span class="token operator">!==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>chunk<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          chunk<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'Loading chunk '</span> <span class="token operator">+</span> chunkId <span class="token operator">+</span> <span class="token string">' failed.'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        installedChunks<span class="token punctuation">[</span>chunkId<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    head<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>script<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> promise<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token comment">// expose the modules object (__webpack_modules__)</span>
  __webpack_require__<span class="token punctuation">.</span>m <span class="token operator">=</span> modules<span class="token punctuation">;</span>

  <span class="token comment">// expose the module cache</span>
  __webpack_require__<span class="token punctuation">.</span>c <span class="token operator">=</span> installedModules<span class="token punctuation">;</span>

  <span class="token comment">// define getter function for harmony exports</span>
  __webpack_require__<span class="token punctuation">.</span><span class="token function-variable function">d</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">exports<span class="token punctuation">,</span> name<span class="token punctuation">,</span> getter</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>__webpack_require__<span class="token punctuation">.</span><span class="token function">o</span><span class="token punctuation">(</span>exports<span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>exports<span class="token punctuation">,</span> name<span class="token punctuation">,</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">configurable</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
        <span class="token literal-property property">enumerable</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token literal-property property">get</span><span class="token operator">:</span> getter
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token comment">// getDefaultExport function for compatibility with non-harmony modules</span>
  __webpack_require__<span class="token punctuation">.</span><span class="token function-variable function">n</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">module</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> getter <span class="token operator">=</span> module <span class="token operator">&amp;&amp;</span> module<span class="token punctuation">.</span>__esModule <span class="token operator">?</span>
      <span class="token keyword">function</span> <span class="token function">getDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> module<span class="token punctuation">[</span><span class="token string">'default'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token operator">:</span>
      <span class="token keyword">function</span> <span class="token function">getModuleExports</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> module<span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">;</span>
    __webpack_require__<span class="token punctuation">.</span><span class="token function">d</span><span class="token punctuation">(</span>getter<span class="token punctuation">,</span> <span class="token string">'a'</span><span class="token punctuation">,</span> getter<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> getter<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token comment">// Object.prototype.hasOwnProperty.call</span>
  __webpack_require__<span class="token punctuation">.</span><span class="token function-variable function">o</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">object<span class="token punctuation">,</span> property</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>object<span class="token punctuation">,</span> property<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token comment">// Webpack é…ç½®ä¸­çš„ publicPathï¼Œç”¨äºåŠ è½½è¢«åˆ†å‰²å‡ºå»çš„å¼‚æ­¥ä»£ç </span>
  __webpack_require__<span class="token punctuation">.</span>p <span class="token operator">=</span> <span class="token string">&quot;./dist/&quot;</span><span class="token punctuation">;</span>

  <span class="token comment">// on error function for async loading</span>
  __webpack_require__<span class="token punctuation">.</span><span class="token function-variable function">oe</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">throw</span> err<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token comment">// ä½¿ç”¨ __webpack_require__ å»åŠ è½½ index ä¸º 0 çš„æ¨¡å—ï¼Œå¹¶ä¸”è¿”å›è¯¥æ¨¡å—å¯¼å‡ºçš„å†…å®¹</span>
  <span class="token comment">// index ä¸º 0 çš„æ¨¡å—å°±æ˜¯ main.js å¯¹åº”çš„æ–‡ä»¶ï¼Œä¹Ÿå°±æ˜¯æ‰§è¡Œå…¥å£æ¨¡å—</span>
  <span class="token comment">// __webpack_require__.s çš„å«ä¹‰æ˜¯å¯åŠ¨æ¨¡å—å¯¹åº”çš„ index</span>
  <span class="token keyword">return</span> <span class="token function">__webpack_require__</span><span class="token punctuation">(</span>__webpack_require__<span class="token punctuation">.</span>s <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">/************************************************************************/</span>
<span class="token punctuation">(</span><span class="token punctuation">[</span>
  <span class="token comment">// æ‰€æœ‰çš„æ¨¡å—éƒ½å­˜æ”¾åœ¨äº†ä¸€ä¸ªæ•°ç»„é‡Œï¼Œæ ¹æ®æ¯ä¸ªæ¨¡å—åœ¨æ•°ç»„çš„ index æ¥åŒºåˆ†å’Œå®šä½æ¨¡å—</span>
  <span class="token comment">/* 0 */</span>
  <span class="token comment">/***/</span>
  <span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">module<span class="token punctuation">,</span> __webpack_exports__<span class="token punctuation">,</span> __webpack_require__</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token string">&quot;use strict&quot;</span><span class="token punctuation">;</span>
    Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>__webpack_exports__<span class="token punctuation">,</span> <span class="token string">&quot;__esModule&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">/* harmony import */</span>
    <span class="token keyword">var</span> __WEBPACK_IMPORTED_MODULE_0__vendor_sum__ <span class="token operator">=</span> <span class="token function">__webpack_require__</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">/**
     * webpackæ”¯æŒES6ã€CommonJså’ŒAMDè§„èŒƒ
     */</span>

    <span class="token comment">// ES6</span>

    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;sum(1, 2) = &quot;</span><span class="token punctuation">,</span> <span class="token function">Object</span><span class="token punctuation">(</span>__WEBPACK_IMPORTED_MODULE_0__vendor_sum__<span class="token punctuation">[</span><span class="token string">&quot;a&quot;</span> <span class="token comment">/* default */</span> <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// CommonJs</span>
    <span class="token keyword">var</span> minus <span class="token operator">=</span> <span class="token function">__webpack_require__</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;minus(1, 2) = &quot;</span><span class="token punctuation">,</span> <span class="token function">minus</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// AMD</span>
    __webpack_require__<span class="token punctuation">.</span>e <span class="token comment">/* require */</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">var</span> __WEBPACK_AMD_REQUIRE_ARRAY__ <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token function">__webpack_require__</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
      <span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">multi</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;multi(1, 2) = &quot;</span><span class="token punctuation">,</span> <span class="token function">multi</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> __WEBPACK_AMD_REQUIRE_ARRAY__<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span>__webpack_require__<span class="token punctuation">.</span>oe<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">/***/</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token comment">/* 1 */</span>
  <span class="token comment">/***/</span>
  <span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">module<span class="token punctuation">,</span> __webpack_exports__<span class="token punctuation">,</span> __webpack_require__</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;use strict&quot;</span><span class="token punctuation">;</span>
    <span class="token comment">/* harmony default export */</span>
    __webpack_exports__<span class="token punctuation">[</span><span class="token string">&quot;a&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> a <span class="token operator">+</span> b<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">/***/</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token comment">/* 2 */</span>
  <span class="token comment">/***/</span>
  <span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">module<span class="token punctuation">,</span> exports</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> a <span class="token operator">-</span> b<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token comment">/***/</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>è¿™é‡Œçš„ <code>bundle.js</code> å’Œä¸Šé¢æ‰€è®²çš„ <code>bundle.js</code> éå¸¸ç›¸ä¼¼ï¼ŒåŒºåˆ«åœ¨äºï¼š</p> <ul><li>å¤šäº†ä¸€ä¸ª <code>__webpack_require__.e</code> ç”¨äºåŠ è½½è¢«åˆ†å‰²å‡ºå»çš„ï¼Œéœ€è¦å¼‚æ­¥åŠ è½½çš„ Chunk å¯¹åº”çš„æ–‡ä»¶</li> <li>å¤šäº†ä¸€ä¸ª <code>webpackJsonp</code> å‡½æ•°ç”¨äºä»å¼‚æ­¥åŠ è½½çš„æ–‡ä»¶ä¸­å®‰è£…æ¨¡å—ã€‚</li></ul> <p>åœ¨ä½¿ç”¨äº† <code>CommonsChunkPlugin</code> å»æå–å…¬å…±ä»£ç æ—¶è¾“å‡ºçš„æ–‡ä»¶å’Œä½¿ç”¨äº†å¼‚æ­¥åŠ è½½æ—¶è¾“å‡ºçš„æ–‡ä»¶æ˜¯ä¸€æ ·çš„ï¼Œéƒ½ä¼šæœ‰ <code>__webpack_require__.e</code> å’Œ <code>webpackJsonp</code> ã€‚åŸå› åœ¨äºæå–å…¬å…±ä»£ç å’Œå¼‚æ­¥åŠ è½½æœ¬è´¨ä¸Šéƒ½æ˜¯ä»£ç åˆ†å‰²ã€‚</p> <h3 id="å…³äº-loader"><a href="#å…³äº-loader" class="header-anchor">#</a> å…³äº Loader</h3> <p>Loader å°±åƒæ˜¯ä¸€ä¸ªç¿»è¯‘å‘˜ï¼Œèƒ½æŠŠæºæ–‡ä»¶ç»è¿‡è½¬åŒ–åè¾“å‡ºæ–°çš„ç»“æœï¼Œå¹¶ä¸”ä¸€ä¸ªæ–‡ä»¶è¿˜å¯ä»¥é“¾å¼çš„ç»è¿‡å¤šä¸ªç¿»è¯‘å‘˜ç¿»è¯‘ã€‚</p> <p>ä»¥å¤„ç† SCSS æ–‡ä»¶ä¸ºä¾‹ï¼š</p> <ol><li>SCSS æºä»£ç ä¼šå…ˆäº¤ç»™ sass-loader æŠŠ SCSS è½¬æ¢æˆ CSSï¼›</li> <li>æŠŠ sass-loader è¾“å‡ºçš„ CSS äº¤ç»™ css-loader å¤„ç†ï¼Œæ‰¾å‡º CSS ä¸­ä¾èµ–çš„èµ„æºã€å‹ç¼© CSS ç­‰ï¼›</li> <li>æŠŠ css-loader è¾“å‡ºçš„ CSS äº¤ç»™ style-loader å¤„ç†ï¼Œè½¬æ¢æˆé€šè¿‡è„šæœ¬åŠ è½½çš„ JavaScript ä»£ç ï¼›</li></ol> <h4 id="loader-çš„èŒè´£"><a href="#loader-çš„èŒè´£" class="header-anchor">#</a> Loader çš„èŒè´£</h4> <p>ç”±ä¸Šé¢çš„ä¾‹å­å¯ä»¥çœ‹å‡ºï¼šä¸€ä¸ª Loader çš„èŒè´£æ˜¯å•ä¸€çš„ï¼Œåªéœ€è¦å®Œæˆä¸€ç§è½¬æ¢ã€‚ å¦‚æœä¸€ä¸ªæºæ–‡ä»¶éœ€è¦ç»å†å¤šæ­¥è½¬æ¢æ‰èƒ½æ­£å¸¸ä½¿ç”¨ï¼Œå°±é€šè¿‡å¤šä¸ª Loader å»è½¬æ¢ã€‚ åœ¨è°ƒç”¨å¤šä¸ª Loader å»è½¬æ¢ä¸€ä¸ªæ–‡ä»¶æ—¶ï¼Œæ¯ä¸ª Loader ä¼šé“¾å¼çš„é¡ºåºæ‰§è¡Œï¼Œ ç¬¬ä¸€ä¸ª Loader å°†ä¼šæ‹¿åˆ°éœ€å¤„ç†çš„åŸå†…å®¹ï¼Œä¸Šä¸€ä¸ª Loader å¤„ç†åçš„ç»“æœä¼šä¼ ç»™ä¸‹ä¸€ä¸ªæ¥ç€å¤„ç†ï¼Œæœ€åçš„ Loader å°†å¤„ç†åçš„æœ€ç»ˆç»“æœè¿”å›ç»™ Webpackã€‚</p> <p>æ‰€ä»¥ï¼Œåœ¨ä½ å¼€å‘ä¸€ä¸ª Loader æ—¶ï¼Œè¯·ä¿æŒå…¶èŒè´£çš„å•ä¸€æ€§ï¼Œä½ åªéœ€å…³å¿ƒè¾“å…¥å’Œè¾“å‡ºã€‚</p> <h4 id="loader-åŸºç¡€"><a href="#loader-åŸºç¡€" class="header-anchor">#</a> Loader åŸºç¡€</h4> <p>ç”±äº Webpack æ˜¯è¿è¡Œåœ¨ Node.js ä¹‹ä¸Šçš„ï¼Œä¸€ä¸ª Loader å…¶å®å°±æ˜¯ä¸€ä¸ª Node.js æ¨¡å—ï¼Œè¿™ä¸ªæ¨¡å—éœ€è¦å¯¼å‡ºä¸€ä¸ªå‡½æ•°ã€‚ è¿™ä¸ªå¯¼å‡ºçš„å‡½æ•°çš„å·¥ä½œå°±æ˜¯è·å¾—å¤„ç†å‰çš„åŸå†…å®¹ï¼Œå¯¹åŸå†…å®¹æ‰§è¡Œå¤„ç†åï¼Œè¿”å›å¤„ç†åçš„å†…å®¹ã€‚</p> <p>ä¸€ä¸ªæœ€ç®€å•çš„ Loader çš„æºç å¦‚ä¸‹ï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code>module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">source</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// source ä¸º compiler ä¼ é€’ç»™ Loader çš„ä¸€ä¸ªæ–‡ä»¶çš„åŸå†…å®¹</span>
  <span class="token comment">// è¯¥å‡½æ•°éœ€è¦è¿”å›å¤„ç†åçš„å†…å®¹ï¼Œè¿™é‡Œç®€å•èµ·è§ï¼Œç›´æ¥æŠŠåŸå†…å®¹è¿”å›äº†ï¼Œç›¸å½“äºè¯¥ Loader æ²¡æœ‰åšä»»ä½•è½¬æ¢</span>
  <span class="token keyword">return</span> source<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>ç”±äº Loader è¿è¡Œåœ¨ Node.js ä¸­ï¼Œä½ å¯ä»¥è°ƒç”¨ä»»ä½• Node.js è‡ªå¸¦çš„ APIï¼Œæˆ–è€…å®‰è£…ç¬¬ä¸‰æ–¹æ¨¡å—è¿›è¡Œè°ƒç”¨ï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> sass <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'node-sass'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">source</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token function">sass</span><span class="token punctuation">(</span>source<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="è·å¾—-loader-çš„-options"><a href="#è·å¾—-loader-çš„-options" class="header-anchor">#</a> è·å¾— Loader çš„ options</h4> <p>åœ¨å¤„ç† SCSS æ–‡ä»¶çš„ Webpack é…ç½®ä¸­ï¼Œç»™ css-loader ä¼ äº† options å‚æ•°ï¼Œä»¥æ§åˆ¶ css-loaderã€‚</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">{</span>
  <span class="token literal-property property">loader</span><span class="token operator">:</span><span class="token string">'css-loader'</span><span class="token punctuation">,</span>
  <span class="token comment">// ç»™ css-loader ä¼ å…¥é…ç½®é¡¹</span>
  <span class="token literal-property property">options</span><span class="token operator">:</span><span class="token punctuation">{</span>
    <span class="token literal-property property">minimize</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span> 
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>å¦‚ä½•åœ¨è‡ªå·±ç¼–å†™çš„ Loader ä¸­è·å–åˆ°ç”¨æˆ·ä¼ å…¥çš„ options å‘¢ï¼Ÿéœ€è¦è¿™æ ·åšï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> loaderUtils <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'loader-utils'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">source</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// è·å–åˆ°ç”¨æˆ·ç»™å½“å‰ Loader ä¼ å…¥çš„ options</span>
  <span class="token keyword">const</span> options <span class="token operator">=</span> loaderUtils<span class="token punctuation">.</span><span class="token function">getOptions</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> source<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="è¿”å›å…¶å®ƒç»“æœ"><a href="#è¿”å›å…¶å®ƒç»“æœ" class="header-anchor">#</a> è¿”å›å…¶å®ƒç»“æœ</h4> <p>ä¸Šé¢çš„ Loader éƒ½åªæ˜¯è¿”å›äº†åŸå†…å®¹è½¬æ¢åçš„å†…å®¹ï¼Œä½†æœ‰äº›åœºæ™¯ä¸‹è¿˜éœ€è¦è¿”å›é™¤äº†å†…å®¹ä¹‹å¤–çš„ä¸œè¥¿ã€‚</p> <p>ä¾‹å¦‚ä»¥ç”¨ babel-loader è½¬æ¢ ES6 ä»£ç ä¸ºä¾‹ï¼Œå®ƒè¿˜éœ€è¦è¾“å‡ºè½¬æ¢åçš„ ES5 ä»£ç å¯¹åº”çš„ Source Mapï¼Œä»¥æ–¹ä¾¿è°ƒè¯•æºç ã€‚ ä¸ºäº†æŠŠ Source Map ä¹Ÿä¸€èµ·éšç€ ES5 ä»£ç è¿”å›ç»™ Webpackï¼Œå¯ä»¥è¿™æ ·å†™ï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code>module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">source</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// é€šè¿‡ this.callback å‘Šè¯‰ Webpack è¿”å›çš„ç»“æœ</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">callback</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> source<span class="token punctuation">,</span> sourceMaps<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// å½“ä½ ä½¿ç”¨ this.callback è¿”å›å†…å®¹æ—¶ï¼Œè¯¥ Loader å¿…é¡»è¿”å› undefinedï¼Œ</span>
  <span class="token comment">// ä»¥è®© Webpack çŸ¥é“è¯¥ Loader è¿”å›çš„ç»“æœåœ¨ this.callback ä¸­ï¼Œè€Œä¸æ˜¯ return ä¸­ </span>
  <span class="token keyword">return</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>å…¶ä¸­çš„ this.callback æ˜¯ Webpack ç»™ Loader æ³¨å…¥çš„ APIï¼Œä»¥æ–¹ä¾¿ Loader å’Œ Webpack ä¹‹é—´é€šä¿¡ã€‚ this.callback çš„è¯¦ç»†ä½¿ç”¨æ–¹æ³•å¦‚ä¸‹ï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">callback</span><span class="token punctuation">(</span>
    <span class="token comment">// å½“æ— æ³•è½¬æ¢åŸå†…å®¹æ—¶ï¼Œç»™ Webpack è¿”å›ä¸€ä¸ª Error</span>
    <span class="token literal-property property">err</span><span class="token operator">:</span> Error <span class="token operator">|</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
    <span class="token comment">// åŸå†…å®¹è½¬æ¢åçš„å†…å®¹</span>
    <span class="token literal-property property">content</span><span class="token operator">:</span> string <span class="token operator">|</span> Buffer<span class="token punctuation">,</span>
    <span class="token comment">// ç”¨äºæŠŠè½¬æ¢åçš„å†…å®¹å¾—å‡ºåŸå†…å®¹çš„ Source Mapï¼Œæ–¹ä¾¿è°ƒè¯•</span>
    sourceMap<span class="token operator">?</span><span class="token operator">:</span> SourceMap<span class="token punctuation">,</span>
    <span class="token comment">// å¦‚æœæœ¬æ¬¡è½¬æ¢ä¸ºåŸå†…å®¹ç”Ÿæˆäº† AST è¯­æ³•æ ‘ï¼Œå¯ä»¥æŠŠè¿™ä¸ª AST è¿”å›ï¼Œ</span>
    <span class="token comment">// ä»¥æ–¹ä¾¿ä¹‹åéœ€è¦ AST çš„ Loader å¤ç”¨è¯¥ ASTï¼Œä»¥é¿å…é‡å¤ç”Ÿæˆ ASTï¼Œæå‡æ€§èƒ½</span>
    abstractSyntaxTree<span class="token operator">?</span><span class="token operator">:</span> <span class="token constant">AST</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><blockquote><p>Source Map çš„ç”Ÿæˆå¾ˆè€—æ—¶ï¼Œé€šå¸¸åœ¨å¼€å‘ç¯å¢ƒä¸‹æ‰ä¼šç”Ÿæˆ Source Mapï¼Œå…¶å®ƒç¯å¢ƒä¸‹ä¸ç”¨ç”Ÿæˆï¼Œä»¥åŠ é€Ÿæ„å»ºã€‚ ä¸ºæ­¤ Webpack ä¸º Loader æä¾›äº† this.sourceMap API å»å‘Šè¯‰ Loader å½“å‰æ„å»ºç¯å¢ƒä¸‹ç”¨æˆ·æ˜¯å¦éœ€è¦ Source Mapã€‚ å¦‚æœä½ ç¼–å†™çš„ Loader ä¼šç”Ÿæˆ Source Mapï¼Œè¯·è€ƒè™‘åˆ°è¿™ç‚¹ã€‚</p></blockquote> <h4 id="åŒæ­¥ä¸å¼‚æ­¥"><a href="#åŒæ­¥ä¸å¼‚æ­¥" class="header-anchor">#</a> åŒæ­¥ä¸å¼‚æ­¥</h4> <p>Loader æœ‰åŒæ­¥å’Œå¼‚æ­¥ä¹‹åˆ†ï¼Œä¸Šé¢ä»‹ç»çš„ Loader éƒ½æ˜¯åŒæ­¥çš„ Loaderï¼Œå› ä¸ºå®ƒä»¬çš„è½¬æ¢æµç¨‹éƒ½æ˜¯åŒæ­¥çš„ï¼Œè½¬æ¢å®Œæˆåå†è¿”å›ç»“æœã€‚ ä½†åœ¨æœ‰äº›åœºæ™¯ä¸‹è½¬æ¢çš„æ­¥éª¤åªèƒ½æ˜¯å¼‚æ­¥å®Œæˆçš„ï¼Œä¾‹å¦‚ä½ éœ€è¦é€šè¿‡ç½‘ç»œè¯·æ±‚æ‰èƒ½å¾—å‡ºç»“æœï¼Œå¦‚æœé‡‡ç”¨åŒæ­¥çš„æ–¹å¼ç½‘ç»œè¯·æ±‚å°±ä¼šé˜»å¡æ•´ä¸ªæ„å»ºï¼Œå¯¼è‡´æ„å»ºéå¸¸ç¼“æ…¢ã€‚</p> <p>åœ¨è½¬æ¢æ­¥éª¤æ˜¯å¼‚æ­¥æ—¶ï¼Œå¯ä»¥è¿™æ ·ï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code>module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">source</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// å‘Šè¯‰ Webpack æœ¬æ¬¡è½¬æ¢æ˜¯å¼‚æ­¥çš„ï¼ŒLoader ä¼šåœ¨ callback ä¸­å›è°ƒç»“æœ</span>
    <span class="token keyword">var</span> callback <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">async</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">someAsyncOperation</span><span class="token punctuation">(</span>source<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> result<span class="token punctuation">,</span> sourceMaps<span class="token punctuation">,</span> ast</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// é€šè¿‡ callback è¿”å›å¼‚æ­¥æ‰§è¡Œåçš„ç»“æœ</span>
        <span class="token function">callback</span><span class="token punctuation">(</span>err<span class="token punctuation">,</span> result<span class="token punctuation">,</span> sourceMaps<span class="token punctuation">,</span> ast<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="å¤„ç†äºŒè¿›åˆ¶æ•°æ®"><a href="#å¤„ç†äºŒè¿›åˆ¶æ•°æ®" class="header-anchor">#</a> å¤„ç†äºŒè¿›åˆ¶æ•°æ®</h4> <p>åœ¨é»˜è®¤çš„æƒ…å†µä¸‹ï¼ŒWebpack ä¼ ç»™ Loader çš„åŸå†…å®¹éƒ½æ˜¯ UTF-8 æ ¼å¼ç¼–ç çš„å­—ç¬¦ä¸²ã€‚ ä½†æœ‰äº›åœºæ™¯ä¸‹ Loader ä¸æ˜¯å¤„ç†æ–‡æœ¬æ–‡ä»¶ï¼Œè€Œæ˜¯å¤„ç†äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œä¾‹å¦‚ file-loaderï¼Œå°±éœ€è¦ Webpack ç»™ Loader ä¼ å…¥äºŒè¿›åˆ¶æ ¼å¼çš„æ•°æ®ã€‚ ä¸ºæ­¤éœ€è¦è¿™æ ·ç¼–å†™ Loaderï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code>module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">source</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// åœ¨ exports.raw === true æ—¶ï¼ŒWebpack ä¼ ç»™ Loader çš„ source æ˜¯ Buffer ç±»å‹çš„</span>
    source <span class="token keyword">instanceof</span> <span class="token class-name">Buffer</span> <span class="token operator">===</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token comment">// Loader è¿”å›çš„ç±»å‹ä¹Ÿå¯ä»¥æ˜¯ Buffer ç±»å‹çš„</span>
    <span class="token comment">// åœ¨ exports.raw !== true æ—¶ï¼ŒLoader ä¹Ÿå¯ä»¥è¿”å› Buffer ç±»å‹çš„ç»“æœ</span>
    <span class="token keyword">return</span> source<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">// é€šè¿‡ exports.raw å±æ€§å‘Šè¯‰ Webpack è¯¥ Loader æ˜¯å¦éœ€è¦äºŒè¿›åˆ¶æ•°æ® </span>
module<span class="token punctuation">.</span>exports<span class="token punctuation">.</span>raw <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
</code></pre></div><p>ä»¥ä¸Šä»£ç ä¸­æœ€å…³é”®çš„ä»£ç æ˜¯æœ€åä¸€è¡Œ module.exports.raw = true;ï¼Œæ²¡æœ‰è¯¥è¡Œ Loader åªèƒ½æ‹¿åˆ°å­—ç¬¦ä¸²ã€‚</p> <h4 id="ç¼“å­˜åŠ é€Ÿ"><a href="#ç¼“å­˜åŠ é€Ÿ" class="header-anchor">#</a> ç¼“å­˜åŠ é€Ÿ</h4> <p>åœ¨æœ‰äº›æƒ…å†µä¸‹ï¼Œæœ‰äº›è½¬æ¢æ“ä½œéœ€è¦å¤§é‡è®¡ç®—éå¸¸è€—æ—¶ï¼Œå¦‚æœæ¯æ¬¡æ„å»ºéƒ½é‡æ–°æ‰§è¡Œé‡å¤çš„è½¬æ¢æ“ä½œï¼Œæ„å»ºå°†ä¼šå˜å¾—éå¸¸ç¼“æ…¢ã€‚ ä¸ºæ­¤ï¼ŒWebpack ä¼šé»˜è®¤ç¼“å­˜æ‰€æœ‰ Loader çš„å¤„ç†ç»“æœï¼Œä¹Ÿå°±æ˜¯è¯´åœ¨éœ€è¦è¢«å¤„ç†çš„æ–‡ä»¶æˆ–è€…å…¶ä¾èµ–çš„æ–‡ä»¶æ²¡æœ‰å‘ç”Ÿå˜åŒ–æ—¶ï¼Œ æ˜¯ä¸ä¼šé‡æ–°è°ƒç”¨å¯¹åº”çš„ Loader å»æ‰§è¡Œè½¬æ¢æ“ä½œçš„ã€‚</p> <p>å¦‚æœä½ æƒ³è®© Webpack ä¸ç¼“å­˜è¯¥ Loader çš„å¤„ç†ç»“æœï¼Œå¯ä»¥è¿™æ ·ï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code>module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">source</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// å…³é—­è¯¥ Loader çš„ç¼“å­˜åŠŸèƒ½</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">cacheable</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> source<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="å…¶å®ƒ-loader-api"><a href="#å…¶å®ƒ-loader-api" class="header-anchor">#</a> å…¶å®ƒ Loader API</h4> <p>å…¶å®ƒæ²¡æœ‰æåˆ°çš„ API å¯ä»¥å» <a href="https://webpack.js.org/api/loaders" target="_blank" rel="noopener noreferrer">Webpack<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> å®˜ç½‘ æŸ¥çœ‹ã€‚</p> <h4 id="åŠ è½½æœ¬åœ°-loader"><a href="#åŠ è½½æœ¬åœ°-loader" class="header-anchor">#</a> åŠ è½½æœ¬åœ° Loader</h4> <p>åœ¨å¼€å‘ Loader çš„è¿‡ç¨‹ä¸­ï¼Œä¸ºäº†æµ‹è¯•ç¼–å†™çš„ Loader æ˜¯å¦èƒ½æ­£å¸¸å·¥ä½œï¼Œéœ€è¦æŠŠå®ƒé…ç½®åˆ° Webpack ä¸­åï¼Œæ‰å¯èƒ½ä¼šè°ƒç”¨è¯¥ Loaderã€‚ åœ¨å‰é¢çš„ç« èŠ‚ä¸­ï¼Œä½¿ç”¨çš„ Loader éƒ½æ˜¯é€šè¿‡ Npm å®‰è£…çš„ï¼Œè¦ä½¿ç”¨ Loader æ—¶ä¼šç›´æ¥ä½¿ç”¨ Loader çš„åç§°ã€‚</p> <p>å¦‚æœè¿˜é‡‡å–ä»¥ä¸Šçš„æ–¹æ³•å»ä½¿ç”¨æœ¬åœ°å¼€å‘çš„ Loader å°†ä¼šå¾ˆéº»çƒ¦ï¼Œå› ä¸ºä½ éœ€è¦ç¡®ä¿ç¼–å†™çš„ Loader çš„æºç æ˜¯åœ¨ node_modules ç›®å½•ä¸‹ã€‚ ä¸ºæ­¤ä½ éœ€è¦å…ˆæŠŠç¼–å†™çš„ Loader å‘å¸ƒåˆ° Npm ä»“åº“åå†å®‰è£…åˆ°æœ¬åœ°é¡¹ç›®ä½¿ç”¨ã€‚</p> <p>è§£å†³ä»¥ä¸Šé—®é¢˜çš„ä¾¿æ·æ–¹æ³•æœ‰ä¸¤ç§ï¼Œåˆ†åˆ«å¦‚ä¸‹ï¼š</p> <h5 id="npm-link"><a href="#npm-link" class="header-anchor">#</a> Npm link</h5> <p>Npm link ä¸“é—¨ç”¨äºå¼€å‘å’Œè°ƒè¯•æœ¬åœ° Npm æ¨¡å—ï¼Œèƒ½åšåˆ°åœ¨ä¸å‘å¸ƒæ¨¡å—çš„æƒ…å†µä¸‹ï¼ŒæŠŠæœ¬åœ°çš„ä¸€ä¸ªæ­£åœ¨å¼€å‘çš„æ¨¡å—çš„æºç é“¾æ¥åˆ°é¡¹ç›®çš„ node_modules ç›®å½•ä¸‹ï¼Œè®©é¡¹ç›®å¯ä»¥ç›´æ¥ä½¿ç”¨æœ¬åœ°çš„ Npm æ¨¡å—ã€‚</p> <p>å®Œæˆ Npm link çš„æ­¥éª¤å¦‚ä¸‹ï¼š</p> <ol><li>ç¡®ä¿æ­£åœ¨å¼€å‘çš„æœ¬åœ° Npm æ¨¡å—ï¼ˆä¹Ÿå°±æ˜¯æ­£åœ¨å¼€å‘çš„ Loaderï¼‰çš„ package.json å·²ç»æ­£ç¡®é…ç½®å¥½ï¼›</li> <li>åœ¨æœ¬åœ° Npm æ¨¡å—æ ¹ç›®å½•ä¸‹æ‰§è¡Œ npm linkï¼ŒæŠŠæœ¬åœ°æ¨¡å—æ³¨å†Œåˆ°å…¨å±€ï¼›</li> <li>åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹æ‰§è¡Œ npm link loader-nameï¼ŒæŠŠç¬¬2æ­¥æ³¨å†Œåˆ°å…¨å±€çš„æœ¬åœ° Npm æ¨¡å—é“¾æ¥åˆ°é¡¹ç›®çš„ node_moduels ä¸‹ï¼Œå…¶ä¸­çš„ loader-name æ˜¯æŒ‡åœ¨ç¬¬1æ­¥ä¸­çš„ package.json æ–‡ä»¶ä¸­é…ç½®çš„æ¨¡å—åç§°ã€‚</li></ol> <p>é“¾æ¥å¥½ Loader åˆ°é¡¹ç›®åä½ å°±å¯ä»¥åƒä½¿ç”¨ä¸€ä¸ªçœŸæ­£çš„ Npm æ¨¡å—ä¸€æ ·ä½¿ç”¨æœ¬åœ°çš„ Loader äº†ã€‚</p> <h5 id="resolveloader"><a href="#resolveloader" class="header-anchor">#</a> ResolveLoader</h5> <p><code>Webpack</code>é»˜è®¤æƒ…å†µä¸‹åªä¼šå» <code>node_modules</code> ç›®å½•ä¸‹å¯»æ‰¾ï¼Œä¸ºäº†è®© <code>Webpack</code> åŠ è½½æ”¾åœ¨æœ¬åœ°é¡¹ç›®ä¸­çš„ <code>Loader</code> éœ€è¦ä¿®æ”¹ <code>resolveLoader.modules</code>ã€‚</p> <p>å‡å¦‚æœ¬åœ°çš„ <code>Loader</code> åœ¨é¡¹ç›®ç›®å½•ä¸­çš„ <code>./loaders/loader-name</code> ä¸­ï¼Œåˆ™éœ€è¦å¦‚ä¸‹é…ç½®ï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">resolveLoader</span><span class="token operator">:</span><span class="token punctuation">{</span>
    <span class="token comment">// å»å“ªäº›ç›®å½•ä¸‹å¯»æ‰¾ Loaderï¼Œæœ‰å…ˆåé¡ºåºä¹‹åˆ†</span>
    <span class="token literal-property property">modules</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'node_modules'</span><span class="token punctuation">,</span><span class="token string">'./loaders/'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>åŠ ä¸Šä»¥ä¸Šé…ç½®åï¼Œ Webpack ä¼šå…ˆå» <code>node_modules</code> é¡¹ç›®ä¸‹å¯»æ‰¾ <code>Loader</code>ï¼Œå¦‚æœæ‰¾ä¸åˆ°ï¼Œä¼šå†å»<code>./loaders/</code> ç›®å½•ä¸‹å¯»æ‰¾ã€‚</p> <h3 id="ç¼–å†™-loader"><a href="#ç¼–å†™-loader" class="header-anchor">#</a> ç¼–å†™ Loader</h3> <p>ä¸Šé¢è®²äº†è®¸å¤šç†è®ºï¼Œæ¥ä¸‹æ¥ä»å®é™…å‡ºå‘ï¼Œæ¥ç¼–å†™ä¸€ä¸ªè§£å†³å®é™…é—®é¢˜çš„ Loaderã€‚</p> <p>è¯¥ Loader åå« comment-require-loaderï¼Œä½œç”¨æ˜¯æŠŠ JavaScript ä»£ç ä¸­çš„æ³¨é‡Šè¯­æ³•</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// @require '../style/index.css'</span>
</code></pre></div><p>è½¬åŒ–æˆ</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'../style/index.css'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>è¯¥ Loader çš„ä½¿ç”¨åœºæ™¯æ˜¯å»æ­£ç¡®åŠ è½½é’ˆå¯¹ Fis3 ç¼–å†™çš„ JavaScriptï¼Œè¿™äº› JavaScript ä¸­å­˜åœ¨é€šè¿‡æ³¨é‡Šçš„æ–¹å¼åŠ è½½ä¾èµ–çš„ CSS æ–‡ä»¶ã€‚</p> <p>è¯¥ Loader çš„ä½¿ç”¨æ–¹æ³•å¦‚ä¸‹ï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">module</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.js$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        <span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'comment-require-loader'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token comment">// é’ˆå¯¹é‡‡ç”¨äº† fis3 CSS å¯¼å…¥è¯­æ³•çš„ JavaScript æ–‡ä»¶é€šè¿‡ comment-require-loader å»è½¬æ¢ </span>
        <span class="token literal-property property">include</span><span class="token operator">:</span> <span class="token punctuation">[</span>path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'node_modules/imui'</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>è¯¥ Loader çš„å®ç°éå¸¸ç®€å•ï¼Œå®Œæ•´ä»£ç å¦‚ä¸‹ï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">replace</span><span class="token punctuation">(</span><span class="token parameter">source</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// ä½¿ç”¨æ­£åˆ™æŠŠ // @require '../style/index.css' è½¬æ¢æˆ require('../style/index.css');  </span>
    <span class="token keyword">return</span> source<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">(\/\/ *@require) +(('|&quot;).+('|&quot;)).*</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span> <span class="token string">'require($2);'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">content</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">replace</span><span class="token punctuation">(</span>content<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="å…³äº-plugin"><a href="#å…³äº-plugin" class="header-anchor">#</a> å…³äº Plugin</h3> <p>Webpack é€šè¿‡ Plugin æœºåˆ¶è®©å…¶æ›´åŠ çµæ´»ï¼Œä»¥é€‚åº”å„ç§åº”ç”¨åœºæ™¯ã€‚ åœ¨ Webpack è¿è¡Œçš„ç”Ÿå‘½å‘¨æœŸä¸­ä¼šå¹¿æ’­å‡ºè®¸å¤šäº‹ä»¶ï¼ŒPlugin å¯ä»¥ç›‘å¬è¿™äº›äº‹ä»¶ï¼Œåœ¨åˆé€‚çš„æ—¶æœºé€šè¿‡ Webpack æä¾›çš„ API æ”¹å˜è¾“å‡ºç»“æœã€‚</p> <p>ä¸€ä¸ªæœ€åŸºç¡€çš„ Plugin çš„ä»£ç æ˜¯è¿™æ ·çš„ï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">BasicPlugin</span><span class="token punctuation">{</span>
  <span class="token comment">// åœ¨æ„é€ å‡½æ•°ä¸­è·å–ç”¨æˆ·ç»™è¯¥æ’ä»¶ä¼ å…¥çš„é…ç½®</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">options</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// Webpack ä¼šè°ƒç”¨ BasicPlugin å®ä¾‹çš„ apply æ–¹æ³•ç»™æ’ä»¶å®ä¾‹ä¼ å…¥ compiler å¯¹è±¡</span>
  <span class="token function">apply</span><span class="token punctuation">(</span><span class="token parameter">compiler</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    compiler<span class="token punctuation">.</span><span class="token function">plugin</span><span class="token punctuation">(</span><span class="token string">'compilation'</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">compilation</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// å¯¼å‡º Plugin</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> BasicPlugin<span class="token punctuation">;</span>
</code></pre></div><p>åœ¨ä½¿ç”¨è¿™ä¸ª Plugin æ—¶ï¼Œç›¸å…³é…ç½®ä»£ç å¦‚ä¸‹ï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> BasicPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./BasicPlugin.js'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
module<span class="token punctuation">.</span>export <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span><span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">BasicPlugin</span><span class="token punctuation">(</span>options<span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Webpack å¯åŠ¨åï¼Œåœ¨è¯»å–é…ç½®çš„è¿‡ç¨‹ä¸­ä¼šå…ˆæ‰§è¡Œ <code>new BasicPlugin(options)</code>åˆå§‹åŒ–ä¸€ä¸ª BasicPlugin è·å¾—å…¶å®ä¾‹ã€‚ åœ¨åˆå§‹åŒ– compiler å¯¹è±¡åï¼Œå†è°ƒç”¨ <code>basicPlugin.apply(compiler)</code>ç»™æ’ä»¶å®ä¾‹ä¼ å…¥ compiler å¯¹è±¡ã€‚ æ’ä»¶å®ä¾‹åœ¨è·å–åˆ° compiler å¯¹è±¡åï¼Œå°±å¯ä»¥é€šè¿‡ <code>compiler.plugin(äº‹ä»¶åç§°, å›è°ƒå‡½æ•°)</code>ç›‘å¬åˆ° Webpack å¹¿æ’­å‡ºæ¥çš„äº‹ä»¶ã€‚ å¹¶ä¸”å¯ä»¥é€šè¿‡ compiler å¯¹è±¡å»æ“ä½œ Webpackã€‚</p> <p>é€šè¿‡ä»¥ä¸Šæœ€ç®€å•çš„ Plugin ç›¸ä¿¡ä½ å¤§æ¦‚æ˜ç™½äº† Plugin çš„å·¥ä½œåŸç†ï¼Œä½†å®é™…å¼€å‘ä¸­è¿˜æœ‰å¾ˆå¤šç»†èŠ‚éœ€è¦æ³¨æ„ï¼Œä¸‹é¢æ¥è¯¦ç»†ä»‹ç»ã€‚</p> <h4 id="compiler-å’Œ-compilation"><a href="#compiler-å’Œ-compilation" class="header-anchor">#</a> Compiler å’Œ Compilation</h4> <p>åœ¨å¼€å‘ Plugin æ—¶æœ€å¸¸ç”¨çš„ä¸¤ä¸ªå¯¹è±¡å°±æ˜¯ Compiler å’Œ Compilationï¼Œå®ƒä»¬æ˜¯ Plugin å’Œ Webpack ä¹‹é—´çš„æ¡¥æ¢ã€‚ Compiler å’Œ Compilation çš„å«ä¹‰å¦‚ä¸‹ï¼š</p> <ul><li>Compiler å¯¹è±¡åŒ…å«äº† Webpack ç¯å¢ƒæ‰€æœ‰çš„çš„é…ç½®ä¿¡æ¯ï¼ŒåŒ…å« optionsï¼Œloadersï¼Œplugins è¿™äº›ä¿¡æ¯ï¼Œè¿™ä¸ªå¯¹è±¡åœ¨ Webpack å¯åŠ¨æ—¶å€™è¢«å®ä¾‹åŒ–ï¼Œå®ƒæ˜¯å…¨å±€å”¯ä¸€çš„ï¼Œå¯ä»¥ç®€å•åœ°æŠŠå®ƒç†è§£ä¸º Webpack å®ä¾‹ï¼›</li> <li>Compilation å¯¹è±¡åŒ…å«äº†å½“å‰çš„æ¨¡å—èµ„æºã€ç¼–è¯‘ç”Ÿæˆèµ„æºã€å˜åŒ–çš„æ–‡ä»¶ç­‰ã€‚å½“ Webpack ä»¥å¼€å‘æ¨¡å¼è¿è¡Œæ—¶ï¼Œæ¯å½“æ£€æµ‹åˆ°ä¸€ä¸ªæ–‡ä»¶å˜åŒ–ï¼Œä¸€æ¬¡æ–°çš„ Compilation å°†è¢«åˆ›å»ºã€‚Compilation å¯¹è±¡ä¹Ÿæä¾›äº†å¾ˆå¤šäº‹ä»¶å›è°ƒä¾›æ’ä»¶åšæ‰©å±•ã€‚é€šè¿‡ Compilation ä¹Ÿèƒ½è¯»å–åˆ° Compiler å¯¹è±¡ã€‚</li></ul> <p>Compiler å’Œ Compilation çš„åŒºåˆ«åœ¨äºï¼šCompiler ä»£è¡¨äº†æ•´ä¸ª Webpack ä»å¯åŠ¨åˆ°å…³é—­çš„ç”Ÿå‘½å‘¨æœŸï¼Œè€Œ Compilation åªæ˜¯ä»£è¡¨äº†ä¸€æ¬¡æ–°çš„ç¼–è¯‘ã€‚</p> <h4 id="äº‹ä»¶æµ"><a href="#äº‹ä»¶æµ" class="header-anchor">#</a> äº‹ä»¶æµ</h4> <p>Webpack å°±åƒä¸€æ¡ç”Ÿäº§çº¿ï¼Œè¦ç»è¿‡ä¸€ç³»åˆ—å¤„ç†æµç¨‹åæ‰èƒ½å°†æºæ–‡ä»¶è½¬æ¢æˆè¾“å‡ºç»“æœã€‚ è¿™æ¡ç”Ÿäº§çº¿ä¸Šçš„æ¯ä¸ªå¤„ç†æµç¨‹çš„èŒè´£éƒ½æ˜¯å•ä¸€çš„ï¼Œå¤šä¸ªæµç¨‹ä¹‹é—´æœ‰å­˜åœ¨ä¾èµ–å…³ç³»ï¼Œåªæœ‰å®Œæˆå½“å‰å¤„ç†åæ‰èƒ½äº¤ç»™ä¸‹ä¸€ä¸ªæµç¨‹å»å¤„ç†ã€‚ æ’ä»¶å°±åƒæ˜¯ä¸€ä¸ªæ’å…¥åˆ°ç”Ÿäº§çº¿ä¸­çš„ä¸€ä¸ªåŠŸèƒ½ï¼Œåœ¨ç‰¹å®šçš„æ—¶æœºå¯¹ç”Ÿäº§çº¿ä¸Šçš„èµ„æºåšå¤„ç†ã€‚</p> <p>Webpack é€šè¿‡ Tapable æ¥ç»„ç»‡è¿™æ¡å¤æ‚çš„ç”Ÿäº§çº¿ã€‚ Webpack åœ¨è¿è¡Œè¿‡ç¨‹ä¸­ä¼šå¹¿æ’­äº‹ä»¶ï¼Œæ’ä»¶åªéœ€è¦ç›‘å¬å®ƒæ‰€å…³å¿ƒçš„äº‹ä»¶ï¼Œå°±èƒ½åŠ å…¥åˆ°è¿™æ¡ç”Ÿäº§çº¿ä¸­ï¼Œå»æ”¹å˜ç”Ÿäº§çº¿çš„è¿ä½œã€‚ Webpack çš„äº‹ä»¶æµæœºåˆ¶ä¿è¯äº†æ’ä»¶çš„æœ‰åºæ€§ï¼Œä½¿å¾—æ•´ä¸ªç³»ç»Ÿæ‰©å±•æ€§å¾ˆå¥½ã€‚</p> <p>Webpack çš„äº‹ä»¶æµæœºåˆ¶åº”ç”¨äº†è§‚å¯Ÿè€…æ¨¡å¼ï¼Œå’Œ Node.js ä¸­çš„ EventEmitter éå¸¸ç›¸ä¼¼ã€‚ Compiler å’Œ Compilation éƒ½ç»§æ‰¿è‡ª Tapableï¼Œå¯ä»¥ç›´æ¥åœ¨ Compiler å’Œ Compilation å¯¹è±¡ä¸Šå¹¿æ’­å’Œç›‘å¬äº‹ä»¶ï¼Œæ–¹æ³•å¦‚ä¸‹ï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">/**
* å¹¿æ’­å‡ºäº‹ä»¶
* event-name ä¸ºäº‹ä»¶åç§°ï¼Œæ³¨æ„ä¸è¦å’Œç°æœ‰çš„äº‹ä»¶é‡å
* params ä¸ºé™„å¸¦çš„å‚æ•°
*/</span>
<span class="token function">compiler</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token string">'event-name'</span><span class="token punctuation">,</span>params<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">/**
* ç›‘å¬åç§°ä¸º event-name çš„äº‹ä»¶ï¼Œå½“ event-name äº‹ä»¶å‘ç”Ÿæ—¶ï¼Œå‡½æ•°å°±ä¼šè¢«æ‰§è¡Œã€‚
* åŒæ—¶å‡½æ•°ä¸­çš„ params å‚æ•°ä¸ºå¹¿æ’­äº‹ä»¶æ—¶é™„å¸¦çš„å‚æ•°ã€‚
*/</span>
compiler<span class="token punctuation">.</span><span class="token function">plugin</span><span class="token punctuation">(</span><span class="token string">'event-name'</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">params</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>åŒç†ï¼Œcompilation.apply å’Œ compilation.plugin ä½¿ç”¨æ–¹æ³•å’Œä¸Šé¢ä¸€è‡´ã€‚</p> <p>åœ¨å¼€å‘æ’ä»¶æ—¶ï¼Œè¿˜éœ€è¦æ³¨æ„ä»¥ä¸‹ä¸¤ç‚¹ï¼š</p> <ul><li>åªè¦èƒ½æ‹¿åˆ° Compiler æˆ– Compilation å¯¹è±¡ï¼Œå°±èƒ½å¹¿æ’­å‡ºæ–°çš„äº‹ä»¶ï¼Œæ‰€ä»¥åœ¨æ–°å¼€å‘çš„æ’ä»¶ä¸­ä¹Ÿèƒ½å¹¿æ’­å‡ºäº‹ä»¶ï¼Œç»™å…¶å®ƒæ’ä»¶ç›‘å¬ä½¿ç”¨ã€‚</li> <li>ä¼ ç»™æ¯ä¸ªæ’ä»¶çš„ Compiler å’Œ Compilation å¯¹è±¡éƒ½æ˜¯åŒä¸€ä¸ªå¼•ç”¨ã€‚ä¹Ÿå°±æ˜¯è¯´åœ¨ä¸€ä¸ªæ’ä»¶ä¸­ä¿®æ”¹äº† Compiler æˆ– Compilation å¯¹è±¡ä¸Šçš„å±æ€§ï¼Œä¼šå½±å“åˆ°åé¢çš„æ’ä»¶ã€‚</li> <li>æœ‰äº›äº‹ä»¶æ˜¯å¼‚æ­¥çš„ï¼Œè¿™äº›å¼‚æ­¥çš„äº‹ä»¶ä¼šé™„å¸¦ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬äºŒä¸ªå‚æ•°ä¸ºå›è°ƒå‡½æ•°ï¼Œåœ¨æ’ä»¶å¤„ç†å®Œä»»åŠ¡æ—¶éœ€è¦è°ƒç”¨å›è°ƒå‡½æ•°é€šçŸ¥ Webpackï¼Œæ‰ä¼šè¿›å…¥ä¸‹ä¸€å¤„ç†æµç¨‹ã€‚ä¾‹å¦‚ï¼š</li></ul> <div class="language-js extra-class"><pre class="language-js"><code>  compiler<span class="token punctuation">.</span><span class="token function">plugin</span><span class="token punctuation">(</span><span class="token string">'emit'</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">compilation<span class="token punctuation">,</span> callback</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// æ”¯æŒå¤„ç†é€»è¾‘</span>

    <span class="token comment">// å¤„ç†å®Œæ¯•åæ‰§è¡Œ callback ä»¥é€šçŸ¥ Webpack </span>
    <span class="token comment">// å¦‚æœä¸æ‰§è¡Œ callbackï¼Œè¿è¡Œæµç¨‹å°†ä¼šä¸€ç›´å¡åœ¨è¿™ä¸å¾€ä¸‹æ‰§è¡Œ </span>
    <span class="token function">callback</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="è¯»å–è¾“å‡ºèµ„æºã€ä»£ç å—ã€æ¨¡å—åŠå…¶ä¾èµ–"><a href="#è¯»å–è¾“å‡ºèµ„æºã€ä»£ç å—ã€æ¨¡å—åŠå…¶ä¾èµ–" class="header-anchor">#</a> è¯»å–è¾“å‡ºèµ„æºã€ä»£ç å—ã€æ¨¡å—åŠå…¶ä¾èµ–</h4> <p>æœ‰äº›æ’ä»¶å¯èƒ½éœ€è¦è¯»å– Webpack çš„å¤„ç†ç»“æœï¼Œä¾‹å¦‚è¾“å‡ºèµ„æºã€ä»£ç å—ã€æ¨¡å—åŠå…¶ä¾èµ–ï¼Œä»¥ä¾¿åšä¸‹ä¸€æ­¥å¤„ç†ã€‚</p> <p>åœ¨ emit äº‹ä»¶å‘ç”Ÿæ—¶ï¼Œä»£è¡¨æºæ–‡ä»¶çš„è½¬æ¢å’Œç»„è£…å·²ç»å®Œæˆï¼Œåœ¨è¿™é‡Œå¯ä»¥è¯»å–åˆ°æœ€ç»ˆå°†è¾“å‡ºçš„èµ„æºã€ä»£ç å—ã€æ¨¡å—åŠå…¶ä¾èµ–ï¼Œå¹¶ä¸”å¯ä»¥ä¿®æ”¹è¾“å‡ºèµ„æºçš„å†…å®¹ã€‚ æ’ä»¶ä»£ç å¦‚ä¸‹ï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Plugin</span> <span class="token punctuation">{</span>
  <span class="token function">apply</span><span class="token punctuation">(</span><span class="token parameter">compiler</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    compiler<span class="token punctuation">.</span><span class="token function">plugin</span><span class="token punctuation">(</span><span class="token string">'emit'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">compilation<span class="token punctuation">,</span> callback</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// compilation.chunks å­˜æ”¾æ‰€æœ‰ä»£ç å—ï¼Œæ˜¯ä¸€ä¸ªæ•°ç»„</span>
      compilation<span class="token punctuation">.</span>chunks<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">chunk</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// chunk ä»£è¡¨ä¸€ä¸ªä»£ç å—</span>
        <span class="token comment">// ä»£ç å—ç”±å¤šä¸ªæ¨¡å—ç»„æˆï¼Œé€šè¿‡ chunk.forEachModule èƒ½è¯»å–ç»„æˆä»£ç å—çš„æ¯ä¸ªæ¨¡å—</span>
        chunk<span class="token punctuation">.</span><span class="token function">forEachModule</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">module</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token comment">// module ä»£è¡¨ä¸€ä¸ªæ¨¡å—</span>
          <span class="token comment">// module.fileDependencies å­˜æ”¾å½“å‰æ¨¡å—çš„æ‰€æœ‰ä¾èµ–çš„æ–‡ä»¶è·¯å¾„ï¼Œæ˜¯ä¸€ä¸ªæ•°ç»„</span>
          module<span class="token punctuation">.</span>fileDependencies<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">filepath</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// Webpack ä¼šæ ¹æ® Chunk å»ç”Ÿæˆè¾“å‡ºçš„æ–‡ä»¶èµ„æºï¼Œæ¯ä¸ª Chunk éƒ½å¯¹åº”ä¸€ä¸ªåŠå…¶ä»¥ä¸Šçš„è¾“å‡ºæ–‡ä»¶</span>
        <span class="token comment">// ä¾‹å¦‚åœ¨ Chunk ä¸­åŒ…å«äº† CSS æ¨¡å—å¹¶ä¸”ä½¿ç”¨äº† ExtractTextPlugin æ—¶ï¼Œ</span>
        <span class="token comment">// è¯¥ Chunk å°±ä¼šç”Ÿæˆ .js å’Œ .css ä¸¤ä¸ªæ–‡ä»¶</span>
        chunk<span class="token punctuation">.</span>files<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">filename</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token comment">// compilation.assets å­˜æ”¾å½“å‰æ‰€æœ‰å³å°†è¾“å‡ºçš„èµ„æº</span>
          <span class="token comment">// è°ƒç”¨ä¸€ä¸ªè¾“å‡ºèµ„æºçš„ source() æ–¹æ³•èƒ½è·å–åˆ°è¾“å‡ºèµ„æºçš„å†…å®¹</span>
          <span class="token keyword">let</span> source <span class="token operator">=</span> compilation<span class="token punctuation">.</span>assets<span class="token punctuation">[</span>filename<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">source</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token comment">// è¿™æ˜¯ä¸€ä¸ªå¼‚æ­¥äº‹ä»¶ï¼Œè¦è®°å¾—è°ƒç”¨ callback é€šçŸ¥ Webpack æœ¬æ¬¡äº‹ä»¶ç›‘å¬å¤„ç†ç»“æŸã€‚</span>
      <span class="token comment">// å¦‚æœå¿˜è®°äº†è°ƒç”¨ callbackï¼ŒWebpack å°†ä¸€ç›´å¡åœ¨è¿™é‡Œè€Œä¸ä¼šå¾€åæ‰§è¡Œã€‚</span>
      <span class="token function">callback</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="ç›‘å¬æ–‡ä»¶å˜åŒ–"><a href="#ç›‘å¬æ–‡ä»¶å˜åŒ–" class="header-anchor">#</a> ç›‘å¬æ–‡ä»¶å˜åŒ–</h4> <p>Webpack ä¼šä»é…ç½®çš„å…¥å£æ¨¡å—å‡ºå‘ï¼Œä¾æ¬¡æ‰¾å‡ºæ‰€æœ‰çš„ä¾èµ–æ¨¡å—ï¼Œå½“å…¥å£æ¨¡å—æˆ–è€…å…¶ä¾èµ–çš„æ¨¡å—å‘ç”Ÿå˜åŒ–æ—¶ï¼Œ å°±ä¼šè§¦å‘ä¸€æ¬¡æ–°çš„ Compilationã€‚</p> <p>åœ¨å¼€å‘æ’ä»¶æ—¶ç»å¸¸éœ€è¦çŸ¥é“æ˜¯å“ªä¸ªæ–‡ä»¶å‘ç”Ÿå˜åŒ–å¯¼è‡´äº†æ–°çš„ Compilationï¼Œä¸ºæ­¤å¯ä»¥ä½¿ç”¨å¦‚ä¸‹ä»£ç ï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// å½“ä¾èµ–çš„æ–‡ä»¶å‘ç”Ÿå˜åŒ–æ—¶ä¼šè§¦å‘ watch-run äº‹ä»¶</span>
compiler<span class="token punctuation">.</span><span class="token function">plugin</span><span class="token punctuation">(</span><span class="token string">'watch-run'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">watching<span class="token punctuation">,</span> callback</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// è·å–å‘ç”Ÿå˜åŒ–çš„æ–‡ä»¶åˆ—è¡¨</span>
    <span class="token keyword">const</span> changedFiles <span class="token operator">=</span> watching<span class="token punctuation">.</span>compiler<span class="token punctuation">.</span>watchFileSystem<span class="token punctuation">.</span>watcher<span class="token punctuation">.</span>mtimes<span class="token punctuation">;</span>
    <span class="token comment">// changedFiles æ ¼å¼ä¸ºé”®å€¼å¯¹ï¼Œé”®ä¸ºå‘ç”Ÿå˜åŒ–çš„æ–‡ä»¶è·¯å¾„ã€‚</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>changedFiles<span class="token punctuation">[</span>filePath<span class="token punctuation">]</span> <span class="token operator">!==</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// filePath å¯¹åº”çš„æ–‡ä»¶å‘ç”Ÿäº†å˜åŒ–</span>
    <span class="token punctuation">}</span>
    <span class="token function">callback</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>é»˜è®¤æƒ…å†µä¸‹ Webpack åªä¼šç›‘è§†å…¥å£å’Œå…¶ä¾èµ–çš„æ¨¡å—æ˜¯å¦å‘ç”Ÿå˜åŒ–ï¼Œç”±äº JavaScript æ–‡ä»¶ä¸ä¼šå»å¯¼å…¥ HTML æ–‡ä»¶ï¼ŒWebpack å°±ä¸ä¼šç›‘å¬ HTML æ–‡ä»¶çš„å˜åŒ–ï¼Œç¼–è¾‘ HTML æ–‡ä»¶æ—¶å°±ä¸ä¼šé‡æ–°è§¦å‘æ–°çš„ Compilationã€‚ ä¸ºäº†ç›‘å¬ HTML æ–‡ä»¶çš„å˜åŒ–ï¼Œæˆ‘ä»¬éœ€è¦æŠŠ HTML æ–‡ä»¶åŠ å…¥åˆ°ä¾èµ–åˆ—è¡¨ä¸­ï¼Œä¸ºæ­¤å¯ä»¥ä½¿ç”¨å¦‚ä¸‹ä»£ç ï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code>compiler<span class="token punctuation">.</span><span class="token function">plugin</span><span class="token punctuation">(</span><span class="token string">'after-compile'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">compilation<span class="token punctuation">,</span> callback</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// æŠŠ HTML æ–‡ä»¶æ·»åŠ åˆ°æ–‡ä»¶ä¾èµ–åˆ—è¡¨ï¼Œå¥½è®© Webpack å»ç›‘å¬ HTML æ¨¡å—æ–‡ä»¶ï¼Œåœ¨ HTML æ¨¡ç‰ˆæ–‡ä»¶å‘ç”Ÿå˜åŒ–æ—¶é‡æ–°å¯åŠ¨ä¸€æ¬¡ç¼–è¯‘</span>
    compilation<span class="token punctuation">.</span>fileDependencies<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>filePath<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">callback</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="ä¿®æ”¹è¾“å‡ºèµ„æº"><a href="#ä¿®æ”¹è¾“å‡ºèµ„æº" class="header-anchor">#</a> ä¿®æ”¹è¾“å‡ºèµ„æº</h4> <p>æœ‰äº›åœºæ™¯ä¸‹æ’ä»¶éœ€è¦ä¿®æ”¹ã€å¢åŠ ã€åˆ é™¤è¾“å‡ºçš„èµ„æºï¼Œè¦åšåˆ°è¿™ç‚¹éœ€è¦ç›‘å¬ emit äº‹ä»¶ï¼Œå› ä¸ºå‘ç”Ÿ emit äº‹ä»¶æ—¶æ‰€æœ‰æ¨¡å—çš„è½¬æ¢å’Œä»£ç å—å¯¹åº”çš„æ–‡ä»¶å·²ç»ç”Ÿæˆå¥½ï¼Œ éœ€è¦è¾“å‡ºçš„èµ„æºå³å°†è¾“å‡ºï¼Œå› æ­¤ emit äº‹ä»¶æ˜¯ä¿®æ”¹ Webpack è¾“å‡ºèµ„æºçš„æœ€åæ—¶æœºã€‚</p> <p>æ‰€æœ‰éœ€è¦è¾“å‡ºçš„èµ„æºä¼šå­˜æ”¾åœ¨ <code>compilation.assets</code> ä¸­ï¼Œ<code>compilation.assets</code> æ˜¯ä¸€ä¸ªé”®å€¼å¯¹ï¼Œé”®ä¸ºéœ€è¦è¾“å‡ºçš„æ–‡ä»¶åç§°ï¼Œå€¼ä¸ºæ–‡ä»¶å¯¹åº”çš„å†…å®¹ã€‚</p> <p>è®¾ç½® <code>compilation.assets</code> çš„ä»£ç å¦‚ä¸‹ï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code>compiler<span class="token punctuation">.</span><span class="token function">plugin</span><span class="token punctuation">(</span><span class="token string">'emit'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">compilation<span class="token punctuation">,</span> callback</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// è®¾ç½®åç§°ä¸º fileName çš„è¾“å‡ºèµ„æº</span>
  compilation<span class="token punctuation">.</span>assets<span class="token punctuation">[</span>fileName<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token comment">// è¿”å›æ–‡ä»¶å†…å®¹</span>
    <span class="token function-variable function">source</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token comment">// fileContent æ—¢å¯ä»¥æ˜¯ä»£è¡¨æ–‡æœ¬æ–‡ä»¶çš„å­—ç¬¦ä¸²ï¼Œä¹Ÿå¯ä»¥æ˜¯ä»£è¡¨äºŒè¿›åˆ¶æ–‡ä»¶çš„ Buffer</span>
      <span class="token keyword">return</span> fileContent<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// è¿”å›æ–‡ä»¶å¤§å°</span>
    <span class="token function-variable function">size</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> Buffer<span class="token punctuation">.</span><span class="token function">byteLength</span><span class="token punctuation">(</span>fileContent<span class="token punctuation">,</span> <span class="token string">'utf8'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token function">callback</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>è¯»å– <code>compilation.assets</code> çš„ä»£ç å¦‚ä¸‹ï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code>compiler<span class="token punctuation">.</span><span class="token function">plugin</span><span class="token punctuation">(</span><span class="token string">'emit'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">compilation<span class="token punctuation">,</span> callback</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// è¯»å–åç§°ä¸º fileName çš„è¾“å‡ºèµ„æº</span>
  <span class="token keyword">const</span> asset <span class="token operator">=</span> compilation<span class="token punctuation">.</span>assets<span class="token punctuation">[</span>fileName<span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token comment">// è·å–è¾“å‡ºèµ„æºçš„å†…å®¹</span>
  asset<span class="token punctuation">.</span><span class="token function">source</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// è·å–è¾“å‡ºèµ„æºçš„æ–‡ä»¶å¤§å°</span>
  asset<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">callback</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="åˆ¤æ–­-webpack-ä½¿ç”¨äº†å“ªäº›æ’ä»¶"><a href="#åˆ¤æ–­-webpack-ä½¿ç”¨äº†å“ªäº›æ’ä»¶" class="header-anchor">#</a> åˆ¤æ–­ Webpack ä½¿ç”¨äº†å“ªäº›æ’ä»¶</h4> <p>åœ¨å¼€å‘ä¸€ä¸ªæ’ä»¶æ—¶å¯èƒ½éœ€è¦æ ¹æ®å½“å‰é…ç½®æ˜¯å¦ä½¿ç”¨äº†å…¶å®ƒæŸä¸ªæ’ä»¶è€Œåšä¸‹ä¸€æ­¥å†³å®šï¼Œå› æ­¤éœ€è¦è¯»å– Webpack å½“å‰çš„æ’ä»¶é…ç½®æƒ…å†µã€‚ ä»¥åˆ¤æ–­å½“å‰æ˜¯å¦ä½¿ç”¨äº† ExtractTextPlugin ä¸ºä¾‹ï¼Œå¯ä»¥ä½¿ç”¨å¦‚ä¸‹ä»£ç ï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// åˆ¤æ–­å½“å‰é…ç½®ä½¿ç”¨ä½¿ç”¨äº† ExtractTextPluginï¼Œ</span>
<span class="token comment">// compiler å‚æ•°å³ä¸º Webpack åœ¨ apply(compiler) ä¸­ä¼ å…¥çš„å‚æ•°</span>
<span class="token keyword">function</span> <span class="token function">hasExtractTextPlugin</span><span class="token punctuation">(</span><span class="token parameter">compiler</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// å½“å‰é…ç½®æ‰€æœ‰ä½¿ç”¨çš„æ’ä»¶åˆ—è¡¨</span>
  <span class="token keyword">const</span> plugins <span class="token operator">=</span> compiler<span class="token punctuation">.</span>options<span class="token punctuation">.</span>plugins<span class="token punctuation">;</span>
  <span class="token comment">// å» plugins ä¸­å¯»æ‰¾æœ‰æ²¡æœ‰ ExtractTextPlugin çš„å®ä¾‹</span>
  <span class="token keyword">return</span> plugins<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token parameter">plugin</span><span class="token operator">=&gt;</span>plugin<span class="token punctuation">.</span><span class="token class-name">__proto__</span><span class="token punctuation">.</span>constructor <span class="token operator">===</span> ExtractTextPlugin<span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="ç¼–å†™-plugin"><a href="#ç¼–å†™-plugin" class="header-anchor">#</a> ç¼–å†™ Plugin</h3> <p>è¯¥æ’ä»¶çš„åç§°å–åå« EndWebpackPluginï¼Œä½œç”¨æ˜¯åœ¨ Webpack å³å°†é€€å‡ºæ—¶å†é™„åŠ ä¸€äº›é¢å¤–çš„æ“ä½œï¼Œä¾‹å¦‚åœ¨ Webpack æˆåŠŸç¼–è¯‘å’Œè¾“å‡ºäº†æ–‡ä»¶åæ‰§è¡Œå‘å¸ƒæ“ä½œæŠŠè¾“å‡ºçš„æ–‡ä»¶ä¸Šä¼ åˆ°æœåŠ¡å™¨ã€‚ åŒæ—¶è¯¥æ’ä»¶è¿˜èƒ½åŒºåˆ† Webpack æ„å»ºæ˜¯å¦æ‰§è¡ŒæˆåŠŸã€‚ä½¿ç”¨è¯¥æ’ä»¶æ—¶æ–¹æ³•å¦‚ä¸‹ï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span><span class="token punctuation">[</span>
    <span class="token comment">// åœ¨åˆå§‹åŒ– EndWebpackPlugin æ—¶ä¼ å…¥äº†ä¸¤ä¸ªå‚æ•°ï¼Œåˆ†åˆ«æ˜¯åœ¨æˆåŠŸæ—¶çš„å›è°ƒå‡½æ•°å’Œå¤±è´¥æ—¶çš„å›è°ƒå‡½æ•°ï¼›</span>
    <span class="token keyword">new</span> <span class="token class-name">EndWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token comment">// Webpack æ„å»ºæˆåŠŸï¼Œå¹¶ä¸”æ–‡ä»¶è¾“å‡ºäº†åä¼šæ‰§è¡Œåˆ°è¿™é‡Œï¼Œåœ¨è¿™é‡Œå¯ä»¥åšå‘å¸ƒæ–‡ä»¶æ“ä½œ</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token comment">// Webpack æ„å»ºå¤±è´¥ï¼Œerr æ˜¯å¯¼è‡´é”™è¯¯çš„åŸå› </span>
      console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>        
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><p>è¦å®ç°è¯¥æ’ä»¶ï¼Œéœ€è¦å€ŸåŠ©ä¸¤ä¸ªäº‹ä»¶ï¼š</p> <ul><li>doneï¼šåœ¨æˆåŠŸæ„å»ºå¹¶ä¸”è¾“å‡ºäº†æ–‡ä»¶åï¼ŒWebpack å³å°†é€€å‡ºæ—¶å‘ç”Ÿï¼›</li> <li>failedï¼šåœ¨æ„å»ºå‡ºç°å¼‚å¸¸å¯¼è‡´æ„å»ºå¤±è´¥ï¼ŒWebpack å³å°†é€€å‡ºæ—¶å‘ç”Ÿï¼›</li></ul> <p>å®ç°è¯¥æ’ä»¶å®Œæ•´ä»£ç å¦‚ä¸‹ï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">EndWebpackPlugin</span> <span class="token punctuation">{</span>

  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">doneCallback<span class="token punctuation">,</span> failCallback</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// å­˜ä¸‹åœ¨æ„é€ å‡½æ•°ä¸­ä¼ å…¥çš„å›è°ƒå‡½æ•°</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>doneCallback <span class="token operator">=</span> doneCallback<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>failCallback <span class="token operator">=</span> failCallback<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">apply</span><span class="token punctuation">(</span><span class="token parameter">compiler</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    compiler<span class="token punctuation">.</span><span class="token function">plugin</span><span class="token punctuation">(</span><span class="token string">'done'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">stats</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token comment">// åœ¨ done äº‹ä»¶ä¸­å›è°ƒ doneCallback</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">doneCallback</span><span class="token punctuation">(</span>stats<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    compiler<span class="token punctuation">.</span><span class="token function">plugin</span><span class="token punctuation">(</span><span class="token string">'failed'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token comment">// åœ¨ failed äº‹ä»¶ä¸­å›è°ƒ failCallback</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">failCallback</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">// å¯¼å‡ºæ’ä»¶ </span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> EndWebpackPlugin<span class="token punctuation">;</span>
</code></pre></div><p>ä»å¼€å‘è¿™ä¸ªæ’ä»¶å¯ä»¥çœ‹å‡ºï¼Œæ‰¾åˆ°åˆé€‚çš„äº‹ä»¶ç‚¹å»å®ŒæˆåŠŸèƒ½åœ¨å¼€å‘æ’ä»¶æ—¶æ˜¾å¾—å°¤ä¸ºé‡è¦ã€‚ åœ¨åŸç†ç¯‡çš„ã€Šå·¥ä½œåŸç†æ¦‚æ‹¬ã€‹ ä¸­è¯¦ç»†ä»‹ç»è¿‡ Webpack åœ¨è¿è¡Œè¿‡ç¨‹ä¸­å¹¿æ’­å‡ºå¸¸ç”¨äº‹ä»¶ï¼Œå¯ä»¥ä»ä¸­æ‰¾åˆ°éœ€è¦çš„äº‹ä»¶ã€‚</p> <h2 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="header-anchor">#</a> å‚è€ƒèµ„æ–™</h2> <p><a href="https://github.com/gwuhaolin/dive-into-webpack/" target="_blank" rel="noopener noreferrer">ã€Šæ·±å…¥æµ…å‡ºWebpackã€‹<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <div class="to-top"><svg t="1547627942927" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1955" xmlns:xlink="http://www.w3.org/1999/xlink" width="64" height="64" class="icon"><path d="M752.736 431.063C757.159 140.575 520.41 8.97 504.518 0.41V0l-0.45 0.205-0.41-0.205v0.41c-15.934 8.56-252.723 140.165-248.259 430.653-48.21 31.457-98.713 87.368-90.685 184.074 8.028 96.666 101.007 160.768 136.601 157.287 35.595-3.482 25.232-30.31 25.232-30.31l12.206-50.095s52.47 80.569 69.304 80.528c15.114-1.23 87-0.123 95.6 0h0.82c8.602-0.123 80.486-1.23 95.6 0 16.794 0 69.305-80.528 69.305-80.528l12.165 50.094s-10.322 26.83 25.272 30.31c35.595 3.482 128.574-60.62 136.602-157.286 8.028-96.665-42.475-152.617-90.685-184.074z m-248.669-4.26c-6.758-0.123-94.781-3.359-102.891-107.192 2.95-98.714 95.97-107.438 102.891-107.93 6.964 0.492 99.943 9.216 102.892 107.93-8.11 103.833-96.174 107.07-102.892 107.192z m-52.019 500.531c0 11.838-9.42 21.382-21.012 21.382a21.217 21.217 0 0 1-21.054-21.34V821.74c0-11.797 9.421-21.382 21.054-21.382 11.591 0 21.012 9.585 21.012 21.382v105.635z m77.333 57.222a21.504 21.504 0 0 1-21.34 21.626 21.504 21.504 0 0 1-21.34-21.626V827.474c0-11.96 9.543-21.668 21.299-21.668 11.796 0 21.38 9.708 21.38 21.668v157.082z m71.147-82.043c0 11.796-9.42 21.34-21.053 21.34a21.217 21.217 0 0 1-21.013-21.34v-75.367c0-11.755 9.421-21.299 21.013-21.299 11.632 0 21.053 9.544 21.053 21.3v75.366z" fill="#3eaf7c" p-id="1956"></path></svg></div></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">10/16/2020, 11:04:04 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      â†
      <a href="/./dailyRecord/qdmkh.html" class="prev">
        å‰ç«¯æ¨¡å—åŒ–çš„å‘å±•
      </a></span> <span class="next"><a href="/./dailyRecord/webpackAdvanced.html">
        Webpack æ‰“åŒ…åˆ†æä»¥åŠloaderç¼–å†™
      </a>
      â†’
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="./assets/js/app.09835454.js" defer></script><script src="./assets/js/3.9a8cb714.js" defer></script><script src="./assets/js/22.bb17a60f.js" defer></script><script src="./assets/js/17.7a89769a.js" defer></script>
  </body>
</html>
